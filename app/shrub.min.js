!function(){var a={};a.bluebird=function(a,b,c){!function(c){if("object"==typeof b)a.exports=c();else if("function"==typeof define&&define.amd)define(c);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self),d.bluebird=c()}}(function(){return function a(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof c&&c;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,a,b,d,e)}return d[h].exports}for(var g="function"==typeof c&&c,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){"use strict";b.exports=function(b,c,d){function e(a,b,d){var e=c(a,f,d,b===!0&&a._isBound()?a._boundTo:void 0),g=e.promise();return g.isRejected()?g:(e.setHowMany(1),e.setUnwrap(),e.init(),g)}{var f=a("./some_promise_array.js")(d);a("./assert.js")}b.any=function(a){return e(a,!1,b.any)},b.prototype.any=function(){return e(this,!0,this.any)}}},{"./assert.js":2,"./some_promise_array.js":35}],2:[function(a,b){"use strict";b.exports=function(){var a=function(){function a(a){this.constructor$(a),this.message=a,this.name="AssertionError"}return a.prototype=new Error,a.prototype.constructor=a,a.prototype.constructor$=Error,a}();return function b(c,d){if(c!==!0){var e=new a(d);throw Error.captureStackTrace&&Error.captureStackTrace(e,b),console&&console.error&&console.error(e.stack+""),e}}}()},{}],3:[function(a,b){"use strict";function c(){this._isTickUsed=!1,this._length=0,this._lateBuffer=new e,this._functionBuffer=new e(75e3);var a=this;this.consumeFunctionBuffer=function(){a._consumeFunctionBuffer()}}var d=(a("./assert.js"),a("./schedule.js")),e=a("./queue.js"),f=a("./util.js").errorObj,g=a("./util.js").tryCatch1;c.prototype.haveItemsQueued=function(){return this._length>0},c.prototype.invokeLater=function(a,b,c){this._lateBuffer.push(a,b,c),this._queueTick()},c.prototype.invoke=function(a,b,c){var d=this._functionBuffer;d.push(a,b,c),this._length=d.length(),this._queueTick()},c.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift();b.call(c,d)}this._reset(),this._consumeLateBuffer()},c.prototype._consumeLateBuffer=function(){for(var a=this._lateBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift(),e=g(b,c,d);if(e===f)throw this._queueTick(),e.e}},c.prototype._queueTick=function(){this._isTickUsed||(d(this.consumeFunctionBuffer),this._isTickUsed=!0)},c.prototype._reset=function(){this._isTickUsed=!1,this._length=0},b.exports=new c},{"./assert.js":2,"./queue.js":28,"./schedule.js":31,"./util.js":39}],4:[function(a,b){"use strict";var c=a("./promise.js")();b.exports=c},{"./promise.js":20}],5:[function(a,b){"use strict";b.exports=function(a){function b(a){var b="string"==typeof this?this:""+this;return a[b]}a.prototype.call=function(a){for(var b=arguments.length,c=new Array(b-1),d=1;b>d;++d)c[d-1]=arguments[d];return this._then(function(b){return b[a].apply(b,c)},void 0,void 0,void 0,void 0,this.call)},a.prototype.get=function(a){return this._then(b,void 0,void 0,a,void 0,this.get)}}},{}],6:[function(a,b){"use strict";b.exports=function(b,c){var d=a("./errors.js"),e=a("./async.js"),f=(a("./assert.js"),d.CancellationError),g={};b.prototype._cancel=function(){if(!this.isCancellable())return this;var a;if(void 0!==(a=this._cancellationParent))return void a.cancel(g);var b=new f;this._attachExtraTrace(b),this._rejectUnchecked(b)},b.prototype.cancel=function(a){return this.isCancellable()?a===g?(this._cancel(),this):(e.invokeLater(this._cancel,this,void 0),this):this},b.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},b.prototype.uncancellable=function(){var a=new b(c);return a._setTrace(this.uncancellable,this),a._follow(this),a._unsetCancellable(),this._isBound()&&a._setBoundTo(this._boundTo),a},b.prototype.fork=function(a,b,c){var d=this._then(a,b,c,void 0,void 0,this.fork);return d._setCancellable(),d._cancellationParent=void 0,d}}},{"./assert.js":2,"./async.js":3,"./errors.js":10}],7:[function(a,b){"use strict";b.exports=function(){function b(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a.toString();var d=/\[object [a-zA-Z0-9$_]+\]/;if(d.test(b))try{var e=JSON.stringify(a);b=e}catch(f){}0===b.length&&(b="(empty array)")}return"(<"+c(b)+">, no stack trace)"}function c(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function d(a,b){this.captureStackTrace(a,b)}var e=(a("./assert.js"),a("./util.js").inherits),f=a("./es5.js").defineProperty,g=new RegExp("\\b(?:[\\w.]*Promise(?:Array|Spawn)?\\$_\\w+|tryCatch(?:1|2|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),h=null,i=null,j=!1;e(d,Error),d.prototype.captureStackTrace=function(a,b){k(this,a,b)},d.possiblyUnhandledRejection=function(a){if("object"==typeof console){var b;if("object"==typeof a||"function"==typeof a){var c=a.stack;b="Possibly unhandled "+i(c,a)}else b="Possibly unhandled "+String(a);"function"==typeof console.error||"object"==typeof console.error?console.error(b):("function"==typeof console.log||"object"==typeof console.error)&&console.log(b)}},j="CapturedTrace$captureStackTrace"!==d.prototype.captureStackTrace.name,d.combine=function(a,b){for(var c=a.length-1,d=b.length-1;d>=0;--d){var e=b[d];if(a[c]!==e)break;a.pop(),c--}a.push("From previous event:");for(var f=a.concat(b),i=[],d=0,j=f.length;j>d;++d)g.test(f[d])||d>0&&!h.test(f[d])&&"From previous event:"!==f[d]||i.push(f[d]);return i},d.isSupported=function(){return"function"==typeof k};var k=function l(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){h=/^\s*at\s*/,i=function(a,c){return"string"==typeof a?a:void 0!==c.name&&void 0!==c.message?c.name+". "+c.message:b(c)};var a=Error.captureStackTrace;return function(b,c){a(b,c)}}var c=new Error;if(!j&&"string"==typeof c.stack&&"function"==typeof"".startsWith&&c.stack.startsWith("stackDetection@")&&"stackDetection"===l.name){f(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),h=/@/;var d=/[@\n]/;return i=function(a,c){return"string"==typeof a?c.name+". "+c.message+"\n"+a:void 0!==c.name&&void 0!==c.message?c.name+". "+c.message:b(c)},function(a,b){var c,e=b.name,f=(new Error).stack,g=f.split(d),h=g.length;for(c=0;h>c&&g[c]!==e;c+=2);g=g.slice(c+2),h=g.length-2;var i="";for(c=0;h>c;c+=2)i+=g[c],i+="@",i+=g[c+1],i+="\n";a.stack=i}}return i=function(a,c){return"string"==typeof a?a:"object"!=typeof c&&"function"!=typeof c||void 0===c.name||void 0===c.message?b(c):c.name+". "+c.message},null}();return d}},{"./assert.js":2,"./es5.js":12,"./util.js":39}],8:[function(a,b){"use strict";b.exports=function(b){function c(a,b,c){this._instances=a,this._callback=b,this._promise=c}function d(a,b){var c={},d=g(a,c,b);if(d===h)return d;var e=i(c);return e.length?(h.e=new TypeError("Catch filter must inherit from Error or be a simple predicate function"),h):d}var e=a("./util.js"),f=a("./errors.js"),g=e.tryCatch1,h=e.errorObj,i=a("./es5.js").keys;return c.prototype.doFilter=function(a){for(var c=this._callback,e=this._promise,i=e._isBound()?e._boundTo:void 0,j=0,k=this._instances.length;k>j;++j){var l=this._instances[j],m=l===Error||null!=l&&l.prototype instanceof Error;if(m&&a instanceof l){var n=g(c,i,a);return n===h?(b.e=n.e,b):n}if("function"==typeof l&&!m){var o=d(l,a);if(o===h){var p=f.canAttach(h.e)?h.e:new Error(h.e+"");this._promise._attachExtraTrace(p),a=h.e;break}if(o){var n=g(c,i,a);return n===h?(b.e=n.e,b):n}}}return b.e=a,b},c}},{"./errors.js":10,"./es5.js":12,"./util.js":39}],9:[function(a,b){"use strict";var c=a("./util.js"),d=(a("./assert.js"),c.isPrimitive),e=c.wrapsPrimitiveReceiver;b.exports=function(a){var b=function(){return this},c=function(){throw this},f=function(a,b){return 1===b?function(){throw a}:2===b?function(){return a}:void 0};a.prototype["return"]=a.prototype.thenReturn=function(a){return e&&d(a)?this._then(f(a,2),void 0,void 0,void 0,void 0,this.thenReturn):this._then(b,void 0,void 0,a,void 0,this.thenReturn)},a.prototype["throw"]=a.prototype.thenThrow=function(a){return e&&d(a)?this._then(f(a,1),void 0,void 0,void 0,void 0,this.thenThrow):this._then(c,void 0,void 0,a,void 0,this.thenThrow)}}},{"./assert.js":2,"./util.js":39}],10:[function(a,b){"use strict";function c(a){try{m(a,"isAsync",!0)}catch(b){}}function d(a){return null==a?!1:a instanceof h||a.isAsync===!0}function e(a){return a instanceof n}function f(a){return e(a)}function g(a,b){function c(d){return this instanceof c?(this.message="string"==typeof d?d:b,this.name=a,void(n.captureStackTrace&&n.captureStackTrace(this,this.constructor))):new c(d)}return l(c,n),c}function h(a){this.name="RejectionError",this.message=a,this.cause=a,this.isAsync=!0,a instanceof n?(this.message=a.message,this.stack=a.stack):n.captureStackTrace&&n.captureStackTrace(this,this.constructor)}var i=a("./global.js"),j=a("./es5.js").freeze,k=a("./util.js"),l=k.inherits,m=k.notEnumerableProp,n=i.Error,o=i.TypeError;"function"!=typeof o&&(o=g("TypeError","type error"));var p=i.RangeError;"function"!=typeof p&&(p=g("RangeError","range error"));var q=g("CancellationError","cancellation error"),r=g("TimeoutError","timeout error");l(h,n);var s="__BluebirdErrorTypes__",t=i[s];t||(t=j({CancellationError:q,TimeoutError:r,RejectionError:h}),m(i,s,t)),b.exports={Error:n,TypeError:o,RangeError:p,CancellationError:t.CancellationError,RejectionError:t.RejectionError,TimeoutError:t.TimeoutError,originatesFromRejection:d,markAsOriginatingFromRejection:c,canAttach:f}},{"./es5.js":12,"./global.js":16,"./util.js":39}],11:[function(a,b){"use strict";b.exports=function(b){function c(a){var c=new d(a),e=b.rejected(c),f=e._peekContext();return null!=f&&f._attachExtraTrace(c),e}var d=a("./errors.js").TypeError;return c}},{"./errors.js":10}],12:[function(a,b){function c(a){var b=[];for(var c in a)i.call(a,c)&&b.push(c);return b}function d(a,b,c){return a[b]=c.value,a}function e(a){return a}function f(a){try{return Object(a).constructor.prototype}catch(b){return k}}function g(a){try{return"[object Array]"===j.call(a)}catch(b){return!1}}var h=function(){"use strict";return void 0===this}();if(h)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:h};else{var i={}.hasOwnProperty,j={}.toString,k={}.constructor.prototype;b.exports={isArray:g,keys:c,defineProperty:d,freeze:e,getPrototypeOf:f,isES5:h}}},{}],13:[function(a,b){"use strict";b.exports=function(b){function c(a){for(var b=this._settledValue,c=b.length,d=new Array(c),e=0,f=0;c>f;++f)a[f]&&(d[e++]=b[f]);return d.length=e,d}var d=(a("./assert.js"),a("./util.js").isArray,{ref:null});b.filter=function(a,e){return b.map(a,e,d)._then(c,void 0,void 0,d.ref,void 0,b.filter)},b.prototype.filter=function(a){return this.map(a,d)._then(c,void 0,void 0,d.ref,void 0,this.filter)}}},{"./assert.js":2,"./util.js":39}],14:[function(a,b){b.exports=function(b,c){function d(){return this}function e(){throw this}function f(a){return function(){return a}}function g(a){return function(){throw a}}function h(a,b,c){var i=k&&l(b);return c?a._then(i?d:f(b),m,void 0,b,void 0,h):a._then(i?e:g(b),m,void 0,b,void 0,h)}function i(a){var d=this.promise,e=this.handler,f=d._isBound()?e.call(d._boundTo):e();if(void 0!==f){var g=b._cast(f,i,void 0);if(b.is(g))return h(g,a,d.isFulfilled())}return d.isRejected()?(c.e=a,c):a}var j=a("./util.js"),k=j.wrapsPrimitiveReceiver,l=j.isPrimitive,m=j.thrower;b.prototype.lastly=b.prototype["finally"]=function(a){if("function"!=typeof a)return this.then();var b={promise:this,handler:a};return this._then(i,i,void 0,b,void 0,this.lastly)}}},{"./util.js":39}],15:[function(a,b){"use strict";b.exports=function(b,c,d){var e=a("./promise_spawn.js")(b,d),f=a("./errors.js"),g=f.TypeError;b.coroutine=function(a){if("function"!=typeof a)throw new g("generatorFunction must be a function");var b=e;return function c(){var d=a.apply(this,arguments),e=new b(void 0,void 0,c);return e._generator=d,e._next(void 0),e.promise()}},b.spawn=function(a){if("function"!=typeof a)return c("generatorFunction must be a function");var d=new e(a,this,b.spawn),f=d.promise();return d._run(b.spawn),f}}},{"./errors.js":10,"./promise_spawn.js":24}],16:[function(a,b){"use strict";b.exports=function(){return"undefined"!=typeof this?this:"undefined"!=typeof process&&"undefined"!=typeof global&&"string"==typeof process.execPath?global:"undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator&&null!==navigator&&"string"==typeof navigator.appName?void 0!==window.wrappedJSObject?window.wrappedJSObject:window:void 0}()},{}],17:[function(a,b){"use strict";b.exports=function(b,c,d,e){function f(a){var e=this,g=void 0;"function"!=typeof e&&(g=e.receiver,e=e.fn);var h=!1,i=new Array(a.length);if(void 0===g)for(var j=0,k=a.length;k>j;++j){var l=e(a[j],j,k);if(!h){var m=b._cast(l,f,void 0);if(m instanceof b){if(m.isFulfilled()){i[j]=m._settledValue;continue}h=!0,l=m}}i[j]=l}else for(var j=0,k=a.length;k>j;++j){var l=e.call(g,a[j],j,k);if(!h){var m=b._cast(l,f,void 0);if(m instanceof b){if(m.isFulfilled()){i[j]=m._settledValue;continue}h=!0,l=m}}i[j]=l}return h?c(i,d,f,void 0).promise():i}function g(a,b,g,h,i){if("function"!=typeof b)return e("fn must be a function");g===!0&&a._isBound()&&(b={fn:b,receiver:a._boundTo});var j=c(a,d,h,g===!0&&a._isBound()?a._boundTo:void 0).promise();return void 0!==i&&(i.ref=j),j._then(f,void 0,void 0,b,void 0,h)}a("./assert.js");b.prototype.map=function(a,b){return g(this,a,!0,this.map,b)},b.map=function(a,c,d){return g(a,c,!1,b.map,d)}}},{"./assert.js":2}],18:[function(a,b){"use strict";b.exports=function(b){function c(a){throw a}function d(a,b){var d=this,e=h(d,b,null,a);e===j&&g.invokeLater(c,void 0,e.e)}function e(a,b){var d=this,e=i(d,b,a);e===j&&g.invokeLater(c,void 0,e.e)}var f=a("./util.js"),g=a("./async.js"),h=(a("./assert.js"),f.tryCatch2),i=f.tryCatch1,j=f.errorObj;b.prototype.nodeify=function(a){return"function"==typeof a&&this._then(d,e,void 0,a,this._isBound()?this._boundTo:null,this.nodeify),this}}},{"./assert.js":2,"./async.js":3,"./util.js":39}],19:[function(a,b){"use strict";b.exports=function(b,c){var d=(a("./assert.js"),a("./util.js")),e=a("./async.js"),f=a("./errors.js"),g=d.tryCatch1,h=d.errorObj;b.prototype.progressed=function(a){return this._then(void 0,void 0,a,void 0,void 0,this.progressed)},b.prototype._progress=function(a){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(a)},b.prototype._progressHandlerAt=function(a){return 0===a?this._progressHandler0:this[a+2-5]},b.prototype._doProgressWith=function(a){var c=a.value,d=a.handler,e=a.promise,i=a.receiver;this._pushContext();var j=g(d,i,c);if(this._popContext(),j===h){if(null!=j.e&&"StopProgressPropagation"!==j.e.name){var k=f.canAttach(j.e)?j.e:new Error(j.e+"");e._attachExtraTrace(k),e._progress(j.e)}}else b.is(j)?j._then(e._progress,null,null,e,void 0,this._progress):e._progress(j)},b.prototype._progressUnchecked=function(a){if(this.isPending())for(var d=this._length(),f=0;d>f;f+=5){var g=this._progressHandlerAt(f),h=this._promiseAt(f);if(b.is(h))"function"==typeof g?e.invoke(this._doProgressWith,this,{handler:g,promise:h,receiver:this._receiverAt(f),value:a}):e.invoke(h._progress,h,a);else{var i=this._receiverAt(f);"function"==typeof g?g.call(i,a,h):b.is(i)&&i._isProxied()?i._progressUnchecked(a):c(i,h)&&i._promiseProgressed(a,h)}}}}},{"./assert.js":2,"./async.js":3,"./errors.js":10,"./util.js":39}],20:[function(a,b){"use strict";b.exports=function(){function b(a){return void 0===a?!1:a instanceof d}function c(a,b){return a instanceof n?b>=0:!1}function d(a){if("function"!=typeof a)throw new x("the promise constructor requires a resolver function");if(this.constructor!==d)throw new x("the promise constructor cannot be invoked directly");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,a!==k&&this._resolveFromResolver(a)}function e(a,b,c){return f(a,n,c,b===!0&&a._isBound()?a._boundTo:void 0).promise()}function f(a,c,e,g){var h=null;return r(a)?h=a:(h=d._cast(a,e,void 0),h!==a?h._setBoundTo(g):b(h)||(h=null)),null!==h?new c(h,"function"==typeof e?e:f,g):{promise:function(){return F("expecting an array, a promise or a thenable")}}}var g=a("./global.js"),h=(a("./assert.js"),a("./util.js")),i=a("./async.js"),j=a("./errors.js"),k=function(){},l={},m={e:null},n=a("./promise_array.js")(d,k),o=a("./captured_trace.js")(),p=a("./catch_filter.js")(m),q=a("./promise_resolver.js"),r=h.isArray,s=h.errorObj,t=h.tryCatch1,u=h.tryCatch2,v=h.tryCatchApply,w=j.RangeError,x=j.TypeError,y=j.CancellationError,z=j.TimeoutError,A=j.RejectionError,B=j.originatesFromRejection,C=j.markAsOriginatingFromRejection,D=j.canAttach,E=h.thrower,F=a("./errors_api_rejection")(d),G=function(){return new x("circular promise resolution chain")};d.prototype.bind=function(a){var b=new d(k);return H&&b._setTrace(this.bind,this),b._follow(this),b._setBoundTo(a),this._cancellable()&&(b._setCancellable(),b._cancellationParent=this),b},d.prototype.toString=function(){return"[object Promise]"},d.prototype.caught=d.prototype["catch"]=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;b-1>c;++c){var f=arguments[c];if("function"!=typeof f){var g=new x("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(g),void i.invoke(this._reject,this,g)}d[e++]=f}d.length=e,a=arguments[c],this._resetTrace(this.caught);var h=new p(d,a,this);return this._then(void 0,h.doFilter,void 0,h,void 0,this.caught)}return this._then(void 0,a,void 0,void 0,void 0,this.caught)},d.prototype.then=function(a,b,c){return this._then(a,b,c,void 0,void 0,this.then)},d.prototype.done=function(a,b,c){var d=this._then(a,b,c,void 0,void 0,this.done);d._setIsFinal()},d.prototype.spread=function(a,b){return this._then(a,b,void 0,l,void 0,this.spread)},d.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},d.prototype.isRejected=function(){return(134217728&this._bitField)>0},d.prototype.isPending=function(){return!this.isResolved()},d.prototype.isResolved=function(){return(402653184&this._bitField)>0},d.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},d.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this._settledValue,a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this._settledValue,a.isRejected=!0),a},d.prototype.all=function(){return e(this,!0,this.all)},d.is=b,d.all=function(a){return e(a,!1,d.all)},d.join=function(){for(var a=arguments.length,b=new Array(a),c=0;a>c;++c)b[c]=arguments[c];return f(b,n,d.join,void 0).promise()},d.resolve=d.fulfilled=function(a,b){var c=new d(k);return H&&c._setTrace("function"==typeof b?b:d.resolve,void 0),c._tryFollow(a)?c:(c._cleanValues(),c._setFulfilled(),c._settledValue=a,c)},d.reject=d.rejected=function(a){var b=new d(k);if(H&&b._setTrace(d.reject,void 0),C(a),b._cleanValues(),b._setRejected(),b._settledValue=a,!D(a)){var c=new Error(a+"");b._setCarriedStackTrace(c)}return b._ensurePossibleRejectionHandled(),b},d.prototype.error=function(a){return this.caught(B,a)},d.prototype._resolveFromSyncValue=function(a,b){if(a===s)this._cleanValues(),this._setRejected(),this._settledValue=a.e,this._ensurePossibleRejectionHandled();else{var c=d._cast(a,b,void 0);c instanceof d?this._follow(c):(this._cleanValues(),this._setFulfilled(),this._settledValue=a)}},d.method=function(a){if("function"!=typeof a)throw new x("fn must be a function");return function b(){var c;switch(arguments.length){case 0:c=t(a,this,void 0);break;case 1:c=t(a,this,arguments[0]);break;case 2:c=u(a,this,arguments[0],arguments[1]);break;default:for(var e=arguments.length,f=new Array(e),g=0;e>g;++g)f[g]=arguments[g];c=v(a,f,this)}var h=new d(k);return H&&h._setTrace(b,void 0),h._resolveFromSyncValue(c,b),h}},d.attempt=d["try"]=function(a,b,c){if("function"!=typeof a)return F("fn must be a function");var e=r(b)?v(a,b,c):t(a,c,b),f=new d(k);return H&&f._setTrace(d.attempt,void 0),f._resolveFromSyncValue(e,d.attempt),f},d.defer=d.pending=function(a){var b=new d(k);return H&&b._setTrace("function"==typeof a?a:d.defer,void 0),new q(b)},d.bind=function(a){var b=new d(k);return H&&b._setTrace(d.bind,void 0),b._setFulfilled(),b._setBoundTo(a),b},d.cast=function(a,b){"function"!=typeof b&&(b=d.cast);var c=d._cast(a,b,void 0);return c instanceof d?c:d.resolve(c,b)},d.onPossiblyUnhandledRejection=function(a){o.possiblyUnhandledRejection="function"==typeof a?a:void 0};var H=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);d.longStackTraces=function(){if(i.haveItemsQueued()&&H===!1)throw new Error("cannot enable long stack traces after promises have been created");H=o.isSupported()},d.hasLongStackTraces=function(){return H&&o.isSupported()},d.prototype._setProxyHandlers=function(a,b){var c=this._length();if(c>=1048570&&(c=0,this._setLength(0)),0===c)this._promise0=b,this._receiver0=a;else{var d=c-5;this[d+3]=b,this[d+4]=a,this[d+0]=this[d+1]=this[d+2]=void 0}this._setLength(c+5)},d.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)},d.prototype._proxyPromise=function(a){a._setProxied(),this._setProxyHandlers(a,-1)},d.prototype._then=function(a,b,c,e,f,g){var h=void 0!==f,j=h?f:new d(k);if(H&&!h){var l=this._peekContext()===this._traceParent;j._traceParent=l?this._traceParent:this,j._setTrace("function"==typeof g?g:this._then,this)}!h&&this._isBound()&&j._setBoundTo(this._boundTo);var m=this._addCallbacks(a,b,c,j,e);return!h&&this._cancellable()&&(j._setCancellable(),j._cancellationParent=this),this.isResolved()&&i.invoke(this._queueSettleAt,this,m),j},d.prototype._length=function(){return 1048575&this._bitField},d.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},d.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},d.prototype._setLength=function(a){this._bitField=-1048576&this._bitField|1048575&a},d.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},d.prototype._setRejected=function(){this._bitField=134217728|this._bitField},d.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},d.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},d.prototype._isFinal=function(){return(33554432&this._bitField)>0},d.prototype._cancellable=function(){return(67108864&this._bitField)>0},d.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},d.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},d.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},d.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField},d.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},d.prototype._setCarriedStackTrace=function(a){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=a},d.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},d.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},d.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},d.prototype._receiverAt=function(a){var b;return b=0===a?this._receiver0:this[a+4-5],this._isBound()&&void 0===b?this._boundTo:b},d.prototype._promiseAt=function(a){return 0===a?this._promise0:this[a+3-5]},d.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[a+0-5]},d.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[a+1-5]},d.prototype._unsetAt=function(a){0===a?(this._rejectionHandler0=this._progressHandler0=this._promise0=this._receiver0=void 0,this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0)):this[a-5+0]=this[a-5+1]=this[a-5+2]=this[a-5+3]=this[a-5+4]=void 0},d.prototype._resolveFromResolver=function(a){function b(a){d._tryFollow(a)||d._fulfill(a)}function c(a){var b=D(a)?a:new Error(a+"");d._attachExtraTrace(b),C(a),d._reject(a,b===a?void 0:b)}var d=this,e=H;e&&(this._setTrace(this._resolveFromResolver,void 0),this._pushContext());var f=u(a,void 0,b,c);if(e&&this._popContext(),void 0!==f&&f===s){var g=D(f.e)?f.e:new Error(f.e+"");d._reject(f.e,g)}},d.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=1048570&&(f=0,this._setLength(0)),0===f)this._promise0=d,void 0!==e&&(this._receiver0=e),"function"!=typeof a||this._isCarryingStackTrace()||(this._fulfillmentHandler0=a),"function"==typeof b&&(this._rejectionHandler0=b),"function"==typeof c&&(this._progressHandler0=c);else{var g=f-5;this[g+3]=d,this[g+4]=e,this[g+0]="function"==typeof a?a:void 0,this[g+1]="function"==typeof b?b:void 0,this[g+2]="function"==typeof c?c:void 0}return this._setLength(f+5),f},d.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=8388608|this._bitField,this._boundTo=a):this._bitField=-8388609&this._bitField},d.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},d.prototype._spreadSlowCase=function(a,b,c,d){var e=f(c,n,this._spreadSlowCase,d).promise()._then(function(){return a.apply(d,arguments)},void 0,void 0,l,void 0,this._spreadSlowCase);b._follow(e)},d.prototype._callSpread=function(a,c,e,f){var g=this._isBound()?this._boundTo:void 0;if(r(e))for(var h=this._settlePromiseFromHandler,i=0,j=e.length;j>i;++i)if(b(d._cast(e[i],h,void 0)))return void this._spreadSlowCase(a,c,e,g);return f&&c._pushContext(),v(a,e,g)},d.prototype._callHandler=function(a,b,c,d,e){var f;return b!==l||this.isRejected()?(e&&c._pushContext(),f=t(a,b,d)):f=this._callSpread(a,c,d,e),e&&c._popContext(),f},d.prototype._settlePromiseFromHandler=function(a,c,e,f){if(!b(f))return void a.call(c,e,f);var g=H,h=this._callHandler(a,c,f,e,g);if(!f._isFollowing())if(h===s||h===f||h===m){var i=h===f?G():h.e,j=D(i)?i:new Error(i+"");h!==m&&f._attachExtraTrace(j),f._rejectUnchecked(i,j)}else{var k=d._cast(h,g?this._settlePromiseFromHandler:void 0,f);if(b(k)){if(k.isRejected()&&!k._isCarryingStackTrace()&&!D(k._settledValue)){var j=new Error(k._settledValue+"");f._attachExtraTrace(j),k._setCarriedStackTrace(j)}f._follow(k),k._cancellable()&&(f._cancellationParent=k,f._setCancellable())}else f._fulfillUnchecked(h)}},d.prototype._follow=function(a){this._setFollowing(),a.isPending()?(a._cancellable()&&(this._cancellationParent=a,this._setCancellable()),a._proxyPromise(this)):a.isFulfilled()?this._fulfillUnchecked(a._settledValue):this._rejectUnchecked(a._settledValue,a._getCarriedStackTrace()),a._isRejectionUnhandled()&&a._unsetRejectionIsUnhandled(),H&&null==a._traceParent&&(a._traceParent=this)},d.prototype._tryFollow=function(a){if(this._isFollowingOrFulfilledOrRejected()||a===this)return!1;var c=d._cast(a,this._tryFollow,void 0);return b(c)?(this._follow(c),!0):!1},d.prototype._resetTrace=function(a){if(H){var b=this._peekContext(),c=void 0===b;this._trace=new o("function"==typeof a?a:this._resetTrace,c)}},d.prototype._setTrace=function(a,b){if(H){var c=this._peekContext();this._traceParent=c;var d=void 0===c;this._trace=void 0!==b&&b._traceParent===c?b._trace:new o("function"==typeof a?a:this._setTrace,d)}return this},d.prototype._attachExtraTrace=function(a){if(H){var b=this,c=a.stack;c="string"==typeof c?c.split("\n"):[];for(var d=1;null!=b&&null!=b._trace;)c=o.combine(c,b._trace.stack.split("\n")),b=b._traceParent;var e=Error.stackTraceLimit+d,f=c.length;f>e&&(c.length=e),a.stack=c.length<=d?"(No stack trace)":c.join("\n")}},d.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},d.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)},d.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)},d.prototype._settlePromiseAt=function(a){var b=this.isFulfilled()?this._fulfillmentHandlerAt(a):this._rejectionHandlerAt(a),e=this._settledValue,f=this._receiverAt(a),g=this._promiseAt(a);if("function"==typeof b)this._settlePromiseFromHandler(b,f,e,g);else{var h=!1,i=this.isFulfilled();void 0!==f&&(f instanceof d&&f._isProxied()?(f._unsetProxied(),i?f._fulfillUnchecked(e):f._rejectUnchecked(e,this._getCarriedStackTrace()),h=!0):c(f,g)&&(i?f._promiseFulfilled(e,g):f._promiseRejected(e,g),h=!0)),h||(i?g._fulfill(e):g._reject(e,this._getCarriedStackTrace()))}a>=256&&this._queueGC()},d.prototype._isProxied=function(){return 4194304===(4194304&this._bitField)},d.prototype._setProxied=function(){this._bitField=4194304|this._bitField},d.prototype._unsetProxied=function(){this._bitField=-4194305&this._bitField},d.prototype._isGcQueued=function(){return-1073741824===(-1073741824&this._bitField)},d.prototype._setGcQueued=function(){this._bitField=-1073741824|this._bitField},d.prototype._unsetGcQueued=function(){this._bitField=1073741823&this._bitField},d.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),i.invokeLater(this._gc,this,void 0))},d.prototype._gc=function(){var a=this._length();this._unsetAt(0);for(var b=0;a>b;b++)delete this[b];this._setLength(0),this._unsetGcQueued()},d.prototype._queueSettleAt=function(a){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),i.invoke(this._settlePromiseAt,this,a)},d.prototype._fulfillUnchecked=function(a){if(this.isPending()){if(a===this){var b=G();return this._attachExtraTrace(b),this._rejectUnchecked(b,void 0)}this._cleanValues(),this._setFulfilled(),this._settledValue=a;var c=this._length();c>0&&i.invoke(this._fulfillPromises,this,c)}},d.prototype._rejectUncheckedCheckError=function(a){var b=D(a)?a:new Error(a+"");this._rejectUnchecked(a,b===a?void 0:b)},d.prototype._rejectUnchecked=function(a,b){if(this.isPending()){if(a===this){var c=G();return this._attachExtraTrace(c),this._rejectUnchecked(c)}if(this._cleanValues(),this._setRejected(),this._settledValue=a,this._isFinal())return void i.invokeLater(E,void 0,void 0===b?a:b);var d=this._length();void 0!==b&&this._setCarriedStackTrace(b),d>0?i.invoke(this._rejectPromises,this,d):this._ensurePossibleRejectionHandled()}},d.prototype._rejectPromises=function(a){a=this._length();for(var b=0;a>b;b+=5)this._settlePromiseAt(b);this._unsetCarriedStackTrace()},d.prototype._fulfillPromises=function(a){a=this._length();for(var b=0;a>b;b+=5)this._settlePromiseAt(b)},d.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==o.possiblyUnhandledRejection&&i.invokeLater(this._notifyUnhandledRejection,this,void 0)},d.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue,b=this._getCarriedStackTrace();this._unsetRejectionIsUnhandled(),void 0!==b&&(this._unsetCarriedStackTrace(),a=b),"function"==typeof o.possiblyUnhandledRejection&&o.possiblyUnhandledRejection(a,this)}};var I=[];d.prototype._peekContext=function(){var a=I.length-1;return a>=0?I[a]:void 0},d.prototype._pushContext=function(){H&&I.push(this)},d.prototype._popContext=function(){H&&I.pop()};var J=g.Promise;return d.noConflict=function(){return g.Promise===d&&(g.Promise=J),d},o.isSupported()||(d.longStackTraces=function(){},H=!1),d._makeSelfResolutionError=G,a("./finally.js")(d,m),a("./direct_resolve.js")(d),a("./thenables.js")(d,k),d.RangeError=w,d.CancellationError=y,d.TimeoutError=z,d.TypeError=x,d.RejectionError=A,a("./timers.js")(d,k),a("./synchronous_inspection.js")(d),a("./any.js")(d,f,n),a("./race.js")(d,k),a("./call_get.js")(d),a("./filter.js")(d,f,n,F),a("./generators.js")(d,F,k),a("./map.js")(d,f,n,F),a("./nodeify.js")(d),a("./promisify.js")(d,k),a("./props.js")(d,n),a("./reduce.js")(d,f,n,F,k),a("./settle.js")(d,f,n),a("./some.js")(d,f,n,F),a("./progress.js")(d,c),a("./cancel.js")(d,k),d.prototype=d.prototype,d
}},{"./any.js":1,"./assert.js":2,"./async.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./direct_resolve.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./global.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":23,"./promisify.js":25,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":34,"./synchronous_inspection.js":36,"./thenables.js":37,"./timers.js":38,"./util.js":39}],21:[function(a,b){"use strict";b.exports=function(b,c){function d(a){switch(a){case-1:return void 0;case-2:return[];case-3:return{}}}function e(a,d,e){var f=this._promise=new b(c),g=void 0;b.is(a)&&(g=a,a._cancellable()&&(f._setCancellable(),f._cancellationParent=a),a._isBound()&&f._setBoundTo(e)),f._setTrace(d,g),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var f=(a("./assert.js"),a("./errors.js").canAttach),g=a("./util.js"),h=a("./async.js"),i={}.hasOwnProperty,j=g.isArray;return e.PropertiesPromiseArray=function(){},e.prototype.length=function(){return this._length},e.prototype.promise=function(){return this._promise},e.prototype._init=function(a,c){var f=this._values;if(b.is(f)){if(!f.isFulfilled())return f.isPending()?void f._then(this._init,this._reject,void 0,this,c,this.constructor):void this._reject(f._settledValue);if(f=f._settledValue,!j(f)){var g=new b.TypeError("expecting an array, a promise or a thenable");return void this.__hardReject__(g)}this._values=f}if(0===f.length)return void this._resolve(d(c));var k,l=f.length,m=l;k=this instanceof e.PropertiesPromiseArray?this._values:new Array(l);for(var n=!1,o=0;l>o;++o){var p=f[o];if(void 0!==p||i.call(f,o)){var q=b._cast(p,void 0,void 0);q instanceof b&&q.isPending()?q._proxyPromiseArray(this,o):n=!0,k[o]=q}else m--}if(0===m)return void this._resolve(-2===c?k:d(c));if(this._values=k,this._length=m,n){var r=m===l?this._scanDirectValues:this._scanDirectValuesHoled;h.invoke(r,this,l)}},e.prototype._settlePromiseAt=function(a){var c=this._values[a];b.is(c)?c.isFulfilled()?this._promiseFulfilled(c._settledValue,a):c.isRejected()&&this._promiseRejected(c._settledValue,a):this._promiseFulfilled(c,a)},e.prototype._scanDirectValuesHoled=function(a){for(var b=0;a>b&&!this._isResolved();++b)i.call(this._values,b)&&this._settlePromiseAt(b)},e.prototype._scanDirectValues=function(a){for(var b=0;a>b&&!this._isResolved();++b)this._settlePromiseAt(b)},e.prototype._isResolved=function(){return null===this._values},e.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},e.prototype.__hardReject__=e.prototype._reject=function(a){this._values=null;var b=f(a)?a:new Error(a+"");this._promise._attachExtraTrace(b),this._promise._reject(a,b)},e.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({index:b,value:a})},e.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){this._values[b]=a;var c=++this._totalResolved;c>=this._length&&this._resolve(this._values)}},e.prototype._promiseRejected=function(a){this._isResolved()||(this._totalResolved++,this._reject(a))},e}},{"./assert.js":2,"./async.js":3,"./errors.js":10,"./util.js":39}],22:[function(a,b){"use strict";function c(a){void 0!==a?(this._bitField=a._bitField,this._settledValue=a.isResolved()?a._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}var d=a("./errors.js").TypeError;c.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},c.prototype.isRejected=function(){return(134217728&this._bitField)>0},c.prototype.isPending=function(){return 0===(402653184&this._bitField)},c.prototype.value=function(){if(!this.isFulfilled())throw new d("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue},c.prototype.error=function(){if(!this.isRejected())throw new d("cannot get rejection reason of a non-rejected promise");return this._settledValue},b.exports=c},{"./errors.js":10}],23:[function(a,b){"use strict";function c(a){return a instanceof Error&&n.getPrototypeOf(a)===Error.prototype}function d(a){var b;return b=c(a)?new k(a):a,i.markAsOriginatingFromRejection(b),b}function e(a){function b(b,c){if(null!==a){if(b){var e=d(h(b));a._attachExtraTrace(e),a._reject(e)}else if(arguments.length>2){for(var f=arguments.length,g=new Array(f-1),i=1;f>i;++i)g[i-1]=arguments[i];a._fulfill(g)}else a._fulfill(c);a=null}}return b}var f,g=a("./util.js"),h=g.maybeWrapAsError,i=a("./errors.js"),j=i.TimeoutError,k=i.RejectionError,l=a("./async.js"),m=g.haveGetters,n=a("./es5.js");if(f=m?function(a){this.promise=a}:function(a){this.promise=a,this.asCallback=e(a),this.callback=this.asCallback},m){var o={get:function(){return e(this.promise)}};n.defineProperty(f.prototype,"asCallback",o),n.defineProperty(f.prototype,"callback",o)}f._nodebackForPromise=e,f.prototype.toString=function(){return"[object PromiseResolver]"},f.prototype.resolve=f.prototype.fulfill=function(a){var b=this.promise;b._tryFollow(a)||l.invoke(b._fulfill,b,a)},f.prototype.reject=function(a){var b=this.promise;i.markAsOriginatingFromRejection(a);var c=i.canAttach(a)?a:new Error(a+"");b._attachExtraTrace(c),l.invoke(b._reject,b,a),c!==a&&l.invoke(this._setCarriedStackTrace,this,c)},f.prototype.progress=function(a){l.invoke(this.promise._progress,this.promise,a)},f.prototype.cancel=function(){l.invoke(this.promise.cancel,this.promise,void 0)},f.prototype.timeout=function(){this.reject(new j("timeout"))},f.prototype.isResolved=function(){return this.promise.isResolved()},f.prototype.toJSON=function(){return this.promise.toJSON()},f.prototype._setCarriedStackTrace=function(a){this.promise.isRejected()&&this.promise._setCarriedStackTrace(a)},b.exports=f},{"./async.js":3,"./errors.js":10,"./es5.js":12,"./util.js":39}],24:[function(a,b){"use strict";b.exports=function(b,c){function d(a,d,e){var f=this._promise=new b(c);f._setTrace(e,void 0),this._generatorFunction=a,this._receiver=d,this._generator=void 0}var e=a("./errors.js"),f=e.TypeError,g=a("./util.js"),h=g.isArray,i=g.errorObj,j=g.tryCatch1;return d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},d.prototype._continue=function k(a){if(a===i){this._generator=void 0;var c=e.canAttach(a.e)?a.e:new Error(a.e+"");return this._promise._attachExtraTrace(c),void this._promise._reject(a.e,c)}var d=a.value;if(a.done===!0)this._generator=void 0,this._promise._tryFollow(d)||this._promise._fulfill(d);else{var g=b._cast(d,k,void 0);if(!(g instanceof b)){if(!h(g))return void this._throw(new f("A value was yielded that could not be treated as a promise"));g=b.all(g)}g._then(this._next,this._throw,void 0,this,null,void 0)}},d.prototype._throw=function(a){e.canAttach(a)&&this._promise._attachExtraTrace(a),this._continue(j(this._generator["throw"],this._generator,a))},d.prototype._next=function(a){this._continue(j(this._generator.next,this._generator,a))},d}},{"./errors.js":10,"./util.js":39}],25:[function(a,b){"use strict";b.exports=function(b,c){function d(a){return a.__isPromisified__===!0}function e(a){for(var b=[a],c=Math.max(0,a-1-5),d=a-1;d>=c;--d)d!==a&&b.push(d);for(var d=a+1;5>=d;++d)b.push(d);return b}function f(a){for(var b=new Array(a),c=0;c<b.length;++c)b[c]="_arg"+c;return b.join(", ")}function g(a){return"number"==typeof a.length?Math.max(Math.min(a.length,1024),0):0}function h(a){var b=/^[a-z$_][a-z$_0-9]*$/i;return b.test(a)?"."+a:"['"+a.replace(/(['\\])/g,"\\$1")+"']"}function i(a,d,i,j){function k(b){for(var c=new Array(b),e=0,f=c.length;f>e;++e)c[e]="arguments["+e+"]";var g=b>0?",":"";return"string"==typeof a&&d===m?"this"+h(a)+"("+c.join(",")+g+" fn);break;":(void 0===d?"callback("+c.join(",")+g+" fn);":"callback.call("+(d===m?"this":"receiver")+", "+c.join(",")+g+" fn);")+"break;"}function l(){for(var b="",c=0;c<o.length;++c)b+="case "+o[c]+":"+k(o[c]);return b+="default: var args = new Array(len + 1);var i = 0;for (var i = 0; i < len; ++i) {    args[i] = arguments[i];}args[i] = fn;"+("string"==typeof a?"this"+h(a)+".apply(":"callback.apply(")+(d===m?"this":"receiver")+", args); break;"}var n=Math.max(0,g(j)-1),o=e(n),s="string"==typeof i?i+"Async":"promisified";return new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","var ret = function "+s+"("+f(n)+') {"use strict";var len = arguments.length;var promise = new Promise(INTERNAL);promise._setTrace('+s+", void 0);var fn = nodebackForPromise(promise);try {switch(len) {"+l()+"}}catch(e){ var wrapped = maybeWrapAsError(e);promise._attachExtraTrace(wrapped);promise._reject(wrapped);}return promise;}; ret.__isPromisified__ = true; return ret;")(b,a,d,q,r,p,c)}function j(a,d){function e(){var f=d;d===m&&(f=this),"string"==typeof a&&(a=f[a]);var g=new b(c);g._setTrace(e,void 0);var h=p(g);try{a.apply(f,q(arguments,h))}catch(i){var j=r(i);g._attachExtraTrace(j),g._reject(j)}return g}return e.__isPromisified__=!0,e}function k(){}function l(a,b,c){if(c){for(var d=x(a),e=0,f=d.length;f>e;e+=2){var g=d[e],h=d[e+1],i=g+"__beforePromisified__",j=g+"Async";t(a,i,h),a[j]=y(i,m,g,h)}return d.length>16&&(k.prototype=a),a}return y(a,b,void 0,a)}var m={},n=a("./util.js"),o=a("./es5.js"),p=a("./promise_resolver.js")._nodebackForPromise,q=n.withAppended,r=n.maybeWrapAsError,s=n.canEvaluate,t=n.notEnumerableProp,u=n.deprecated,v=(a("./assert.js"),new RegExp("__beforePromisified__$")),w={}.hasOwnProperty,x=function(){if(o.isES5){var a=Object.create,b=Object.getOwnPropertyDescriptor;return function(c){for(var e=c,f=[],g=a(null);null!==c;){for(var h=o.keys(c),i=0,j=h.length;j>i;++i){var k=h[i];if(!(g[k]||v.test(k)||w.call(e,k+"__beforePromisified__"))){g[k]=!0;var l=b(c,k);null==l||"function"!=typeof l.value||d(l.value)||f.push(k,l.value)}}c=o.getPrototypeOf(c)}return f}}return function(a){var b=[];for(var c in a)if(!v.test(c)&&!w.call(a,c+"__beforePromisified__")){var e=a[c];"function"!=typeof e||d(e)||b.push(c,e)}return b}}(),y=s?i:j;b.promisify=function(a,b){if("object"==typeof a&&null!==a)return u("Promise.promisify for promisifying entire objects is deprecated. Use Promise.promisifyAll instead."),l(a,b,!0);if("function"!=typeof a)throw new TypeError("fn must be a function");return d(a)?a:l(a,arguments.length<2?m:b,!1)},b.promisifyAll=function(a){if("function"!=typeof a&&"object"!=typeof a)throw new TypeError("the target of promisifyAll must be an object or a function");return l(a,void 0,!0)}}},{"./assert.js":2,"./es5.js":12,"./promise_resolver.js":23,"./util.js":39}],26:[function(a,b){"use strict";b.exports=function(b,c){function d(a,b,c){for(var d=g.keys(a),e=new Array(d.length),f=0,h=e.length;h>f;++f)e[f]=a[d[f]];if(this.constructor$(e,b,c),!this._isResolved())for(var f=0,h=d.length;h>f;++f)e.push(d[f])}var e=(a("./assert.js"),a("./util.js")),f=e.inherits,g=a("./es5.js");return f(d,c),d.prototype._init=function(){this._init$(void 0,-3)},d.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){for(var d={},e=this.length(),f=0,g=this.length();g>f;++f)d[this._values[f+e]]=this._values[f];this._resolve(d)}}},d.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({key:this._values[b+this.length()],value:a})},c.PropertiesPromiseArray=d,d}},{"./assert.js":2,"./es5.js":12,"./util.js":39}],27:[function(a,b){"use strict";b.exports=function(b,c){function d(a,c,d){var f,i=b._cast(a,d,void 0);return h(i)?(b.is(i)?f=i._then(b.props,void 0,void 0,void 0,void 0,d):(f=new e(i,d,c===!0&&i._isBound()?i._boundTo:void 0).promise(),c=!1),c===!0&&i._isBound()&&f._setBoundTo(i._boundTo),f):g("cannot await properties of a non-object")}var e=a("./properties_promise_array.js")(b,c),f=a("./util.js"),g=a("./errors_api_rejection")(b),h=f.isObject;b.prototype.props=function(){return d(this,!0,this.props)},b.props=function(a){return d(a,!1,b.props)}}},{"./errors_api_rejection":11,"./properties_promise_array.js":26,"./util.js":39}],28:[function(a,b){"use strict";function c(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b]}function d(a){return a>>>=0,a-=1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a+1}function e(a){return"number"!=typeof a?16:d(Math.min(Math.max(16,a),1073741824))}function f(a){this._capacity=e(a),this._length=0,this._front=0,this._makeCapacity()}a("./assert.js");f.prototype._willBeOverCapacity=function(a){return this._capacity<a},f.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},f.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},f.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},f.prototype.length=function(){return this._length},f.prototype._makeCapacity=function(){for(var a=this._capacity,b=0;a>b;++b)this[b]=void 0},f.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)},f.prototype._resizeTo=function(a){var b=this._front,d=this._capacity,e=new Array(d),f=this.length();if(c(this,0,e,0,d),this._capacity=a,this._makeCapacity(),this._front=0,d>=b+f)c(e,b,this,0,f);else{var g=f-(b+f&d-1);c(e,b,this,0,g),c(e,0,this,g,f-g)}},b.exports=f},{"./assert.js":2}],29:[function(a,b){"use strict";b.exports=function(b,c){function d(a,d,i){var j=b._cast(a,d,void 0);if(b.is(j))return g(j);if(!f(a))return e("expecting an array, a promise or a thenable");var k=new b(c);k._setTrace(d,i),void 0!==i&&(i._isBound()&&k._setBoundTo(i._boundTo),i._cancellable()&&(k._setCancellable(),k._cancellationParent=i));for(var l=k._fulfill,m=k._reject,n=0,o=a.length;o>n;++n){var p=a[n];(void 0!==p||h.call(a,n))&&b.cast(p)._then(l,m,void 0,k,null,d)}return k}var e=a("./errors_api_rejection.js")(b),f=a("./util.js").isArray,g=function(a){return a.then(function b(c){return d(c,b,a)})},h={}.hasOwnProperty;b.race=function(a){return d(a,b.race,void 0)},b.prototype.race=function(){return d(this,this.race,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":39}],30:[function(a,b){"use strict";b.exports=function(b,c,d,e,f){function g(a,c,d,e,g){this.promise=new b(f),this.index=c,this.length=e.length,this.items=e,this.callback=a,this.receiver=g,this.accum=d}function h(a,b){var c=this,d=void 0;"function"!=typeof c&&(d=c.receiver,c=c.fn);var e=a.length,f=void 0,h=0;void 0!==b?(f=b,h=0):(h=1,e>0&&(f=a[0]));var i=h;if(i>=e)return f;var j=new g(c,i,f,a,d);return j.iterate(),j.promise}function i(a){var b=this.fn,c=this.initialValue;return h.call(b,a,c)}function j(a,b,c,d,e){return c._then(function f(c){return k(a,b,c,d,f)},void 0,void 0,void 0,void 0,e)}function k(a,f,g,k,l){if("function"!=typeof f)return e("fn must be a function");if(k===!0&&a._isBound()&&(f={fn:f,receiver:a._boundTo}),void 0!==g){if(b.is(g)){if(!g.isFulfilled())return j(a,f,g,k,l);g=g._settledValue}return c(a,d,l,k===!0&&a._isBound()?a._boundTo:void 0).promise()._then(i,void 0,void 0,{fn:f,initialValue:g},void 0,b.reduce)}return c(a,d,l,k===!0&&a._isBound()?a._boundTo:void 0).promise()._then(h,void 0,void 0,f,void 0,l)}a("./assert.js");g.prototype.reject=function(a){this.promise._reject(a)},g.prototype.fulfill=function(a,b){this.accum=a,this.index=b+1,this.iterate()},g.prototype.iterate=function(){for(var a=this.index,c=this.length,d=this.items,e=this.accum,f=this.receiver,g=this.callback,h=this.iterate;c>a;++a)if(e=b._cast(g.call(f,e,d[a],a,c),h,void 0),e instanceof b)return void e._then(this.fulfill,this.reject,void 0,this,a,h);this.promise._fulfill(e)},b.reduce=function(a,c,d){return k(a,c,d,!1,b.reduce)},b.prototype.reduce=function(a,b){return k(this,a,b,!0,this.reduce)}}},{"./assert.js":2}],31:[function(a,b){"use strict";{var c,d=a("./global.js");a("./assert.js")}if("undefined"!=typeof process&&null!==process&&"function"==typeof process.cwd&&"function"==typeof process.nextTick)c=0===process.version.indexOf("v0.10.")?function(){function b(){var a=e,b=d;d=null,e=null,null!=b?b.run(a):a()}var c=a("domain"),d=null,e=null;return function(a){d=c.active,e=a,process.nextTick(b)}}():process.nextTick;else if("function"!=typeof d.MutationObserver&&"function"!=typeof d.WebkitMutationObserver&&"function"!=typeof d.WebKitMutationObserver||"undefined"==typeof document||"function"!=typeof document.createElement)if("function"==typeof d.postMessage&&"function"!=typeof d.importScripts&&"function"==typeof d.addEventListener&&"function"==typeof d.removeEventListener){var e="bluebird_message_key_"+Math.random();c=function(){function a(a){if(a.source===d&&a.data===e){var c=b;b=void 0,c()}}var b=void 0;return d.addEventListener("message",a,!1),function(a){b=a,d.postMessage(e,"*")}}()}else c="function"==typeof d.MessageChannel?function(){var a=void 0,b=new d.MessageChannel;return b.port1.onmessage=function(){var b=a;a=void 0,b()},function(c){a=c,b.port2.postMessage(null)}}():d.setTimeout?function(a){setTimeout(a,4)}:function(a){a()};else c=function(){var a=d.MutationObserver||d.WebkitMutationObserver||d.WebKitMutationObserver,b=document.createElement("div"),c=void 0,e=new a(function(){var a=c;c=void 0,a()});return e.observe(b,{attributes:!0}),function(a){c=a,b.setAttribute("class","foo")}}();b.exports=c},{"./assert.js":2,"./global.js":16,domain:40}],32:[function(a,b){"use strict";b.exports=function(b,c,d){function e(a,b,d){return c(a,f,d,b===!0&&a._isBound()?a._boundTo:void 0).promise()}var f=a("./settled_promise_array.js")(b,d);b.settle=function(a){return e(a,!1,b.settle)},b.prototype.settle=function(){return e(this,!0,this.settle)}}},{"./settled_promise_array.js":33}],33:[function(a,b){"use strict";b.exports=function(b,c){function d(a,b,c){this.constructor$(a,b,c)}var e=(a("./assert.js"),a("./promise_inspection.js")),f=a("./util.js"),g=f.inherits;return g(d,c),d.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;c>=this._length&&this._resolve(this._values)},d.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){var c=new e;c._bitField=268435456,c._settledValue=a,this._promiseResolved(b,c)}},d.prototype._promiseRejected=function(a,b){if(!this._isResolved()){var c=new e;c._bitField=134217728,c._settledValue=a,this._promiseResolved(b,c)}},d}},{"./assert.js":2,"./promise_inspection.js":22,"./util.js":39}],34:[function(a,b){"use strict";b.exports=function(b,c,d,e){function f(a,b,d,f){if((0|b)!==b||0>b)return e("expecting a positive integer");var h=c(a,g,f,d===!0&&a._isBound()?a._boundTo:void 0),i=h.promise();return i.isRejected()?i:(h.setHowMany(b),h.init(),i)}{var g=a("./some_promise_array.js")(d);a("./assert.js")}b.some=function(a,c){return f(a,c,!1,b.some)},b.prototype.some=function(a){return f(this,a,!0,this.some)}}},{"./assert.js":2,"./some_promise_array.js":35}],35:[function(a,b){"use strict";b.exports=function(b){function c(a,b,c){this.constructor$(a,b,c),this._howMany=0,this._unwrap=!1,this._initialized=!1}var d=a("./util.js"),e=a("./errors.js").RangeError,f=d.inherits,g=d.isArray;return f(c,b),c.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-2);var a=g(this._values);if(this._holes=a?this._values.length-this.length():0,!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()){var b="(Promise.some) input array contains less than "+this._howMany+" promises";this._reject(new e(b))}}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(a){this._isResolved()||(this._howMany=a)},c.prototype._promiseFulfilled=function(a){this._isResolved()||(this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values)))},c.prototype._promiseRejected=function(a){this._isResolved()||(this._addRejected(a),this.howMany()>this._canPossiblyFulfill()&&this._reject(this._values.length===this.length()?[]:this._values.slice(this.length()+this._holes)))},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()-this._holes},c.prototype._addRejected=function(a){this._values.push(a)},c.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c}},{"./errors.js":10,"./util.js":39}],36:[function(a,b){"use strict";b.exports=function(b){var c=a("./promise_inspection.js");b.prototype.inspect=function(){return new c(this)}}},{"./promise_inspection.js":22}],37:[function(a,b){"use strict";b.exports=function(b,c){function d(a){try{return a.then}catch(b){return j.e=b,j}}function e(a,h,l){if(k(a)){if(a instanceof b)return a;if(f(a)){var m=new b(c);return m._setTrace(h,void 0),a._then(m._fulfillUnchecked,m._rejectUncheckedCheckError,m._progressUnchecked,m,null,void 0),m._setFollowing(),m}var n=d(a);if(n===j)return h="function"==typeof h?h:e,void 0!==l&&i(n.e)&&l._attachExtraTrace(n.e),b.reject(n.e,h);if("function"==typeof n)return h="function"==typeof h?h:e,g(a,n,h,l)}return a}function f(a){return l.call(a,"_promise0")}function g(a,c,d,e){function f(c){if(!k){if(k=!0,a===c){var d=b._makeSelfResolutionError();return void 0!==e&&e._attachExtraTrace(d),void j.promise._reject(d,void 0)}j.resolve(c)}}function g(a){if(!k){k=!0;var b=i(a)?a:new Error(a+"");void 0!==e&&e._attachExtraTrace(b),j.promise._reject(a,b)}}function h(a){if(!k){var b=j.promise;"function"==typeof b._progress&&b._progress(a)}}var j=b.defer(d),k=!1;try{c.call(a,f,g,h)}catch(l){if(!k){k=!0;var m=i(l)?l:new Error(l+"");void 0!==e&&e._attachExtraTrace(m),j.promise._reject(l,m)}}return j.promise}var h=(a("./assert.js"),a("./util.js")),i=a("./errors.js").canAttach,j=h.errorObj,k=h.isObject,l={}.hasOwnProperty;b._cast=e}},{"./assert.js":2,"./errors.js":10,"./util.js":39}],38:[function(a,b){"use strict";var c=a("./global.js"),d=function(a,b){for(var d=arguments.length,e=new Array(d-2),f=2;d>f;++f)e[f-2]=arguments[f];c.setTimeout(function(){a.apply(void 0,e)},b)},e={};c.setTimeout(function(a){a===e&&(d=c.setTimeout)},1,e),b.exports=function(b,c){var e=(a("./util.js"),a("./assert.js"),a("./errors.js")),f=(a("./errors_api_rejection")(b),b.TimeoutError),g=function(a,b,c){if(a.isPending()){"string"!=typeof b&&(b="operation timed out after "+c+" ms");var d=new f(b);e.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._rejectUnchecked(d)}},h=function(a,b){b._fulfill(a)};b.delay=function(a,e,f){void 0===e&&(e=a,a=void 0),e=+e,"function"!=typeof f&&(f=b.delay);var g=b._cast(a,f,void 0),i=new b(c);return b.is(g)?(g._isBound()&&i._setBoundTo(g._boundTo),g._cancellable()&&(i._setCancellable(),i._cancellationParent=g),i._setTrace(f,g),i._follow(g),i.then(function(a){return b.delay(a,e)})):(i._setTrace(f,void 0),d(h,e,a,i),i)},b.prototype.delay=function(a){return b.delay(this,a,this.delay)},b.prototype.timeout=function(a,e){a=+a;var f=new b(c);return f._setTrace(this.timeout,this),this._isBound()&&f._setBoundTo(this._boundTo),this._cancellable()&&(f._setCancellable(),f._cancellationParent=this),f._follow(this),d(g,a,f,e,a),f}}},{"./assert.js":2,"./errors.js":10,"./errors_api_rejection":11,"./global.js":16,"./util.js":39}],39:[function(a,b){"use strict";function c(a){"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("Bluebird: "+a)}function d(a,b,c){try{return a.call(b,c)}catch(d){return r.e=d,r}}function e(a,b,c,d){try{return a.call(b,c,d)}catch(e){return r.e=e,r}}function f(a,b,c){try{return a.apply(c,b)}catch(d){return r.e=d,r}}function g(a){return"string"==typeof a?a:""+a}function h(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function i(a){return!h(a)}function j(a){return h(a)?new Error(g(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;d>c;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){var d={value:c,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(a,b,d),a}function m(a){throw a}var n=a("./global.js"),o=(a("./assert.js"),a("./es5.js")),p=function(){try{var a={};return o.defineProperty(a,"f",{get:function(){return 3}}),3===a.f}catch(b){return!1}}(),q=function(){return"undefined"!=typeof window&&null!==window&&"undefined"!=typeof window.document&&"undefined"!=typeof navigator&&null!==navigator&&"string"==typeof navigator.appName&&window===n?!1:!0}(),r={e:{}},s=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},t=function(){return"string"!==this}.call("string"),u={thrower:m,isArray:o.isArray,haveGetters:p,notEnumerableProp:l,isPrimitive:h,isObject:i,canEvaluate:q,deprecated:c,errorObj:r,tryCatch1:d,tryCatch2:e,tryCatchApply:f,inherits:s,withAppended:k,asString:g,maybeWrapAsError:j,wrapsPrimitiveReceiver:t};b.exports=u},{"./assert.js":2,"./es5.js":12,"./global.js":16}],40:[function(a,b){b.exports=function(){var b=a("events"),c={};return c.create=function(){var a=new b.EventEmitter;return a.run=function(a){try{a()}catch(b){this.emit("error",b)}return this},a.dispose=function(){return this.removeAllListeners(),this},a},c}.call(this)},{events:41}],41:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}]},{},[4])(4)})},a.errors=function(a,b,c){(function(){var a,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h=[].slice;e=c("underscore"),d=c("pkgman"),b.BaseError=a=function(a){function b(a){this.message=a}return g(b,a),b.template="Unknown error: :message",b.prototype.caught=function(){},b.prototype.key="unknown",b.prototype.template=b.template,b.prototype.toJSON=function(){return[this.key,this.message]},b}(Error),b.errorTypes=function(){var b,c,f,g,h,i;f=[a],i=d.invoke("errorType");for(e in i)b=i[e],f.push(b);for(c={},g=0,h=f.length;h>g;g++)b=f[g],c[b.prototype.key]=b;return c},b.serialize=function(b){return b instanceof a?b.toJSON():b instanceof Error?[void 0,b.message]:[void 0,b]},b.unserialize=function(a){return b.instantiate.apply(null,a)},b.message=function(b){var c,d,e;d=b instanceof a?b.template:b instanceof Error?a.template.replace(":message",b.message):a.template.replace(":message",b.toString());for(c in b)e=b[c],d=d.replace(":"+c,e);return d},b.stack=function(a){var b;return b=a.stack,b=null!=b?(b=b.split("\n"),b.shift(),"\n"+b.join("\n")):"",""+this.message(a)+b},b.instantiate=function(){var c,d,e,f,g,i,j;i=arguments[0],f=2<=arguments.length?h.call(arguments,1):[],e=b.errorTypes(),d=null!=e[i]?e[i]:a,c=function(a){var b;return b=function(b){return a.apply(this,b)},b.prototype=a.prototype,function(a){return new b(a)}}(d);try{throw new Error}catch(k){g=k,j=g.stack}return g=c(f),g.stack=j,g},b.caught=function(c){return c instanceof a?(c.caught(b.message(c)),c):c}}).call(this)},a.inflection=function(a,b,c){!function(c){if("object"==typeof b)a.exports=c();else if("function"==typeof define&&define.amd)define(c);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self),d.inflection=c()}}(function(){var a;return function b(a,d,e){function f(h,i){if(!d[h]){if(!a[h]){var j="function"==typeof c&&c;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};a[h][0].call(k.exports,function(b){var c=a[h][1][b];return f(c?c:b)},k,k.exports,b,a,d,e)}return d[h].exports}for(var g="function"==typeof c&&c,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(b,c,d){!function(b){var e=["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],f=[[new RegExp("(m)en$","gi")],[new RegExp("(pe)ople$","gi")],[new RegExp("(child)ren$","gi")],[new RegExp("([ti])a$","gi")],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi")],[new RegExp("(hive)s$","gi")],[new RegExp("(tive)s$","gi")],[new RegExp("(curve)s$","gi")],[new RegExp("([lr])ves$","gi")],[new RegExp("([^fo])ves$","gi")],[new RegExp("([^aeiouy]|qu)ies$","gi")],[new RegExp("(s)eries$","gi")],[new RegExp("(m)ovies$","gi")],[new RegExp("(x|ch|ss|sh)es$","gi")],[new RegExp("([m|l])ice$","gi")],[new RegExp("(bus)es$","gi")],[new RegExp("(o)es$","gi")],[new RegExp("(shoe)s$","gi")],[new RegExp("(cris|ax|test)es$","gi")],[new RegExp("(octop|vir)i$","gi")],[new RegExp("(alias|status)es$","gi")],[new RegExp("^(ox)en","gi")],[new RegExp("(vert|ind)ices$","gi")],[new RegExp("(matr)ices$","gi")],[new RegExp("(quiz)zes$","gi")],[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],g=[[new RegExp("(m)an$","gi")],[new RegExp("(pe)rson$","gi")],[new RegExp("(child)$","gi")],[new RegExp("^(ox)$","gi")],[new RegExp("(ax|test)is$","gi")],[new RegExp("(octop|vir)us$","gi")],[new RegExp("(alias|status)$","gi")],[new RegExp("(bu)s$","gi")],[new RegExp("(buffal|tomat|potat)o$","gi")],[new RegExp("([ti])um$","gi")],[new RegExp("sis$","gi")],[new RegExp("(?:([^f])fe|([lr])f)$","gi")],[new RegExp("(hive)$","gi")],[new RegExp("([^aeiouy]|qu)y$","gi")],[new RegExp("(x|ch|ss|sh)$","gi")],[new RegExp("(matr|vert|ind)ix|ex$","gi")],[new RegExp("([m|l])ouse$","gi")],[new RegExp("(quiz)$","gi")],[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("ss$","gi"),"ss"],[new RegExp("s$","gi"),""]],h=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],i=new RegExp("(_ids|_id)$","g"),j=new RegExp("_","g"),k=new RegExp("[ _]","g"),l=new RegExp("([A-Z])","g"),m=new RegExp("^_"),n={_apply_rules:function(a,b,c,d){if(d)a=d;
else{var e=n.indexOf(c,a.toLowerCase())>-1;if(!e)for(var f=0,g=b.length;g>f;f++)if(a.match(b[f][0])){void 0!==b[f][1]&&(a=a.replace(b[f][0],b[f][1]));break}}return a},indexOf:function(a,b,c,d){c||(c=-1);for(var e=-1,f=c,g=a.length;g>f;f++)if(a[f]===b||d&&d(a[f],b)){e=f;break}return e},pluralize:function(a,b){return n._apply_rules(a,f,e,b)},singularize:function(a,b){return n._apply_rules(a,g,e,b)},camelize:function(a,b){for(var c,d,e,f,g=a.split("/"),h=0,i=g.length;i>h;h++){for(c=g[h].split("_"),d=0,e=c.length;e>d;d++)0!==d&&(c[d]=c[d].toLowerCase()),f=c[d].charAt(0),f=b&&0===h&&0===d?f.toLowerCase():f.toUpperCase(),c[d]=f+c[d].substring(1);g[h]=c.join("")}return g.join("::")},underscore:function(a,b){if(b&&a===a.toUpperCase())return a;for(var c=a.split("::"),d=0,e=c.length;e>d;d++)c[d]=c[d].replace(l,"_$1"),c[d]=c[d].replace(m,"");return c.join("/").toLowerCase()},humanize:function(a,b){return a=a.toLowerCase(),a=a.replace(i,""),a=a.replace(j," "),b||(a=n.capitalize(a)),a},capitalize:function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)},dasherize:function(a){return a.replace(k,"-")},titleize:function(a){a=a.toLowerCase().replace(j," ");for(var b,c,d,e=a.split(" "),f=0,g=e.length;g>f;f++){for(b=e[f].split("-"),c=0,d=b.length;d>c;c++)n.indexOf(h,b[c].toLowerCase())<0&&(b[c]=n.capitalize(b[c]));e[f]=b.join("-")}return a=e.join(" "),a=a.substring(0,1).toUpperCase()+a.substring(1)},demodulize:function(a){var b=a.split("::");return b[b.length-1]},tableize:function(a){return a=n.underscore(a),a=n.pluralize(a)},classify:function(a){return a=n.camelize(a),a=n.singularize(a)},foreign_key:function(a,b){return a=n.demodulize(a),a=n.underscore(a)+(b?"":"_")+"id"},ordinalize:function(a){for(var b=a.split(" "),c=0,d=b.length;d>c;c++){var e=parseInt(b[c],10);if(!isNaN(e)){var f=b[c].substring(b[c].length-2),g=b[c].substring(b[c].length-1),h="th";"11"!=f&&"12"!=f&&"13"!=f&&("1"===g?h="st":"2"===g?h="nd":"3"===g&&(h="rd")),b[c]+=h}}return b.join(" ")},transform:function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];this.hasOwnProperty(e)&&(a=this[e](a))}return a}};return n.version="1.3.5","undefined"!=typeof a?a(function(a,b,c){c.exports=n}):"undefined"==typeof d?void(b.inflection=n):void(c.exports=n)}(this)},{}]},{},[1])(1)})},a["jugglingdb-client"]=function(a,b,c){!function(c){if("object"==typeof b)a.exports=c();else if("function"==typeof define&&define.amd)define(c);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self),d.jugglingdb=c()}}(function(){return function a(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof c&&c;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,a,b,d,e)}return d[h].exports}for(var g="function"==typeof c&&c,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(){},{}],2:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],3:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],4:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],6:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,"/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,inherits:3}],7:[function(a,b,c){(function(b,d){"use strict";var e=a("fs"),f=(a("path"),c.Schema=a("./lib/schema").Schema);c.AbstractClass=a("./lib/model.js");var g="./lib/sql";c.__defineGetter__("BaseSQL",function(){return a(g)}),c.loadSchema=function(b,c,d){function e(a,b){b(a,d)}var g=[],h=a(b);return Object.keys(h).forEach(function(a){var b=c[a];b||(console.log("No config found for "+a+" schema, using in-memory schema"),b={driver:"memory"}),g[a]=new f(b.driver,b),g[a].on("define",function(c,e,f,h){d.models[e]=c,b.backyard&&g[a].backyard.define(e,f,h)}),g[a].name=a,g.push(g[a]),b.backyard&&(g[a].backyard=new f(b.backyard.driver,b.backyard)),"function"==typeof h[a]&&(e(g[a],h[a]),b.backyard&&e(g[a].backyard,h[a]))}),g},c.init=function(d){function e(){var b,c="./lib/railway";try{b=a(c)}catch(e){console.log(e.stack)}b&&b(d)}if(b.railway)b.railway.orm=c;else if(d.orm={Schema:c.Schema,AbstractClass:c.AbstractClass},d.app.enabled("noeval schema"))return d.orm.schema=c.loadSchema(d.root+"/db/schema",d.app.get("database"),d),void(d.app.enabled("autoupdate")&&d.on("ready",function(){d.orm.schema.forEach(function(a){a.autoupdate(),a.backyard&&(a.backyard.autoupdate(),a.backyard.log=a.log)})}));d.version>"1.1.5-15"?d.on("after routes",e):e()},c.__defineGetter__("version",function(){return JSON.parse(e.readFileSync(d+"/package.json")).version})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/")},{"./lib/model.js":11,"./lib/schema":13,fs:1,path:!1}],8:[function(a,b,c){"use strict";function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}c.Hookable=e;var e=a("./model.js");e.afterInitialize=null,e.beforeValidate=null,e.afterValidate=null,e.beforeSave=null,e.afterSave=null,e.beforeCreate=null,e.afterCreate=null,e.beforeUpdate=null,e.afterUpdate=null,e.beforeDestroy=null,e.afterDestroy=null,e.prototype.trigger=function(a,b,c,e){function f(a){i?i.call(j,a):a&&a.call(this)}var g=d(a),h=this.constructor["before"+g],i=this.constructor["after"+g];"validate"===a&&(h=h||this.constructor.beforeValidation,i=i||this.constructor.afterValidation);var j=this;b?h?h.call(j,function(a){return a?void(e&&e(a)):void b.call(j,f)},c):b.call(j,f):f()}},{"./model.js":11}],9:[function(a){"use strict";var b=a("./model.js"),c=a("./utils");b.include=function(a,b,d){function e(){l--,0===l&&i.resolve(a)}function f(a){if("string"==typeof a&&(a=[a]),"Object"===a.constructor.name){var b=[];for(var c in a){var d={};d[c]=a[c],b.push(d)}return b}return a}function g(a,b,c,d){var e,f,g=h.relations;"Object"===b.constructor.name?(e=Object.keys(b)[0],f=b[e]):(e=b,f=[]);var i=g[e];if(!i)return function(){throw new Error('Relation "'+e+'" is not defined for '+h.modelName+" model")};var j={where:{}};if(c[i.keyFrom]||(d[i.keyFrom]={},a.filter(Boolean).forEach(function(a){d[i.keyFrom][a[i.keyFrom]]||(d[i.keyFrom][a[i.keyFrom]]=[]),d[i.keyFrom][a[i.keyFrom]].push(a)}),c[i.keyFrom]=Object.keys(d[i.keyFrom])),c[i.keyFrom].length>0){for(var k={},l=[],m=0;m<c[i.keyFrom].length;m++)k[c[i.keyFrom][m]]=!0,"null"!==c[i.keyFrom][m]&&"undefined"!==c[i.keyFrom][m]&&l.push(c[i.keyFrom][m]);return j.where[i.keyTo]={inq:l},j.include=f,function(a){var b,c;i.modelTo.all(j).done(function(f){for(var g=0;g<f.length;g++)for(delete k[f[g][i.keyTo]],b=d[i.keyFrom][f[g][i.keyTo]],c=0;c<b.length;c++)b[c].__cachedRelations||(b[c].__cachedRelations={}),i.multiple?(b[c].__cachedRelations[e]||(b[c].__cachedRelations[e]=[]),b[c].__cachedRelations[e].push(f[g])):b[c].__cachedRelations[e]=f[g];for(var h in k)for(b=d[i.keyFrom][h],c=0;c<b.length;c++)b[c].__cachedRelations||(b[c].__cachedRelations={}),b[c].__cachedRelations[e]=i.multiple?[]:null;a(null,f)},a)}}return null}var h=this;if("Array"==b.constructor.name&&0===b.length||"Object"==b.constructor.name&&0===Object.keys(b).length)return c.Q.resolve(a).nodeify(d);var i=c.defer();b=f(b);var j={},k={},l=0;try{for(var m=0;m<b.length;m++){var n=g(a,b[m],j,k);if(null===n){i.resolve(a);break}l++,n(e)}}catch(o){i.reject(o)}return i.promise.nodeify(d)}},{"./model.js":11,"./utils":15}],10:[function(a,b){"use strict";function c(a,b,e){var f=this;if(!(f instanceof c))return new c(a,b,e);a&&a instanceof c&&(a=a.items),Object.defineProperty(f,"parent",{writable:!1,enumerable:!1,configurable:!1,value:e}),Object.defineProperty(f,"nextid",{writable:!0,enumerable:!1,value:1});var g=d;if("object"==typeof b&&"Array"===b.constructor.name&&(g=b[0]||d),a=f.items=a||[],Object.defineProperty(f,"ItemType",{writable:!0,enumerable:!1,configurable:!0,value:g}),"string"==typeof a)try{f.items=a=JSON.parse(a)}catch(h){f.items=a=[]}return a.forEach(function(b,c){a[c]=new g(b,f),Object.defineProperty(f,a[c].id,{writable:!0,enumerable:!1,configurable:!0,value:a[c]}),f.nextid<=a[c].id&&(f.nextid=a[c].id+1)}),Object.defineProperty(f,"length",{enumerable:!1,configurable:!0,get:function(){return f.items.length}}),f}function d(a,b){if("object"==typeof a)for(var c in a)this[c]=a[c];else this.id=a;Object.defineProperty(this,"parent",{writable:!1,enumerable:!1,configurable:!0,value:b}),this.id||(this.id=b.autoincrement()),b.ItemType&&(this.__proto__=b.ItemType.prototype,b.ItemType!==d&&b.ItemType.apply(this))}var e=a("util"),f=a("./utils");b.exports=c,c.prototype.inspect=function(){return e.inspect(this.items)};var g;try{var h="lodash";g=a(h)}catch(i){g=!1}if(!g)try{var j="underscore";g=a(j)}catch(i){g=!1}if(g){var k=["each","map","reduce","reduceRight","find","filter","reject","all","any","include","invoke","pluck","max","min","sortBy","groupBy","sortedIndex","shuffle","toArray","size","first","initial","last","rest","compact","flatten","without","union","intersection","difference","uniq","zip","indexOf","lastIndexOf","range"];k.forEach(function(a){c.prototype[a]=function(){var b=f.slice.call(arguments);return b.unshift(this.items),g[a].apply(g,b)}})}["concat","join","pop","push","reverse","shift","slice","sort","splice","toSource","toString","unshift","every","filter","forEach","indexOf","lastIndexOf","map","some"].forEach(function(a){c.prototype[a]=function(){return Array.prototype[a].apply(this.items,f.slice.call(arguments))}}),c.prototype.find=function(a,b){b||(b="id");var c;return this.items.forEach(function(d){d[b]==a&&(c=d)}),c},c.prototype.removeAt=function(a){this.splice(a,1)},c.prototype.toObject=function(){return this.items},c.prototype.toJSON=function(){return this.items},c.prototype.toString=function(){return JSON.stringify(this.items)},c.prototype.autoincrement=function(){return this.nextid++},c.prototype.push=function(a){var b=new d(a,this);return this.items.push(b),b},c.prototype.remove=function(a){var b=a.id?a.id:a,c=!1;this.items.forEach(function(a,d){b&&a.id==b&&(c=d,a.id!==b&&console.log("WARNING! Type of id not matched"))}),c!==!1&&(delete this[b],this.items.splice(c,1))},c.prototype.map=function(a){return"function"==typeof a?this.items.map(a):"string"==typeof a?this.items.map(function(b){return"function"==typeof b[a]?b[a]():b.hasOwnProperty(a)?b[a]:void 0}):void 0},d.prototype.save=function(){this.parent.parent.save()}},{"./utils":15,util:6}],11:[function(a,b){"use strict";function c(a){this._initProperties(a,!0)}function d(a){var b=g.defer();return a.connected?b.resolve():(a.once("connected",function(){b.resolve()}),a.connecting||a.connect()),b.promise}function e(a){var b;return a!==b}b.exports=c;var f=a("util"),g=a("./utils"),h=g.curry,i=a("./validations.js"),j=(i.ValidationError,a("./list.js"));a("./hooks.js"),a("./relations.js"),a("./include.js");var k=["String","Boolean","Number","Date","Text"];c.prototype._initProperties=function(a,b){function c(a){var b=i[a]["default"];return e(b)?"function"==typeof b?b():b:void 0}var d=this,f=this.constructor,h=f.schema.definitions[f.modelName],i=h.properties;a=a||{},"string"==typeof a&&(a=JSON.parse(a)),g.hiddenProperty(this,"__cachedRelations",{}),g.hiddenProperty(this,"__data",{}),g.hiddenProperty(this,"__dataWas",{}),a.__cachedRelations&&(this.__cachedRelations=a.__cachedRelations);for(var l in a)l in i?this.__data[l]=this.__dataWas[l]=a[l]:l in f.relations&&(this.__data[f.relations[l].keyFrom]=this.__dataWas[l]=a[l][f.relations[l].keyTo],this.__cachedRelations[l]=a[l]);b===!0&&Object.keys(a).forEach(function(b){d[b]=a[b]}),f.forEachProperty(function(a){"undefined"==typeof d.__data[a]?d.__data[a]=d.__dataWas[a]=c(a):d.__dataWas[a]=d.__data[a]}),f.forEachProperty(function(a){var b=i[a].type;if(-1===k.indexOf(b.name)){if("object"!=typeof d.__data[a]&&d.__data[a])try{d.__data[a]=JSON.parse(d.__data[a]+"")}catch(c){d.__data[a]=String(d.__data[a])}("Array"===b.name||"object"==typeof b&&"Array"===b.constructor.name)&&(d.__data[a]=new j(d.__data[a],b,d))}}),this.trigger("initialize")},c.defineProperty=function(a,b){this.schema.defineProperty(this.modelName,a,b)},c.whatTypeName=function(a){var b=this.schema.definitions[this.modelName].properties[a];return b&&b.type?b.type.name:null},c.update=function(a,b){var c=this;return d(c.schema).then(function(){var b=g.defer();return a&&a.update&&"function"!=typeof a.update&&(a.update=c._forDB(a.update)),c.schema.adapter.update(c.modelName,a,function(a,d){a?b.reject(a):b.resolve(c._fromDB(d))}),b.promise}).nodeify(b)},c._forDB=function(a){if(!a)return null;var b={},c=this,d=this.schema.definitions[c.modelName].properties;return Object.keys(a).forEach(function(e){var f,g=c.whatTypeName(e);!g&&!a[e]instanceof Array||(f=a[e],d[e]&&d[e].name?b[d[e].name]=f:b[e]=f)}),b},c._fromDB=function(a){if(!a)return null;var b=this.schema.definitions[this.modelName].properties,c=Object.keys(a);return Object.keys(b).forEach(function(d){var e=b[d].name;e&&-1!==c.indexOf(e)&&(a[d]=a[e],delete a[e])}),a},c.prototype.whatTypeName=function(a){return this.constructor.whatTypeName(a)},c.create=function(a,b){var c=this;return"function"==typeof a&&(b=a,a={}),d(c.schema).then(function(){var b=g.defer(),d=c.modelName;a=a||{};var e=a.options||{validate:!0};if(a.data instanceof c&&(a=a.data),a instanceof Array){var f,i=[],j=a.length,k=!1,l=j;if(0===j)b.resolve([]);else{f=new Array(j);for(var m=function(){0===--l&&(k?b.reject(f):b.resolve(i))},n=function(a,b){c.create(a).catch(function(a){a&&(f[b]=a,k=!0),m()}).done(function(a){i.push(a),m()})},o=0;j>o;o+=1)n(a[o],o)}}else{var p,q=h(b.reject,b),r=function(){p.trigger("create",function(a){p.trigger("save",function(e){p._adapter().create(d,c._forDB(p.toObject(!0)),function(d,f,h){f&&(p.__data.id=f,p.__dataWas.id=f,g.defineReadonlyProp(p,"id",f)),h&&(h=c._fromDB(h),p._rev=h),d?b.reject(d):e.call(p,function(){a.call(p,function(){b.resolve(p)})})},p)},p,q)},p,q)};p=a instanceof c&&!a.id?a:new c(a),a=p.toObject(!0),e.validate?p.isValid(a).done(r,function(a){b.reject(a)}):r()}return b.promise}).nodeify(b)},c.upsert=c.updateOrCreate=function(a,b){var c=this;return d(c.schema).then(function(){if(!a.id)return c.create(a);var b=g.defer(),d=h(b.resolve,b),e=h(b.reject,b);if("function"==typeof c.schema.adapter.updateOrCreate){var f=new c(a);c.schema.adapter.updateOrCreate(c.modelName,c._forDB(f.toObject(!0)),function(a,c){var d;c?(c=f.constructor._fromDB(c),f._initProperties(c),d=f):d=null,a?b.reject(a):b.resolve(d)})}else c.find(a.id).done(function(b){if(b)b.updateAttributes(a).done(d,e);else{var f=new c(a);f.save(a).done(d,e)}},e);return b.promise}).nodeify(b)},c.findOrCreate=function(a,b,c){"undefined"==typeof a&&(a={where:{}}),("function"==typeof b||"undefined"==typeof b)&&(b=a&&a.where);var d=this;return d.findOne(a).then(function(a){return a?a:d.create(b)}).nodeify(c)},c.exists=function(a,b){var c=this;return d(c.schema).then(function(){var b=g.defer();return a?c.schema.adapter.exists(c.modelName,a,b.callback):b.reject(new Error("Model::exists requires positive id argument")),b.promise}).nodeify(b)},c.find=function(a,b){var c=this;return d(c.schema).then(function(){var b=g.defer();return c.schema.adapter.find(c.modelName,a,function(d,e){var f=null;e&&(e=c._fromDB(e),e.id||(e.id=a),f=new c,f._initProperties(e,!1)),d?b.reject(d):b.resolve(f)}),b.promise}).nodeify(b)},c.all=function(a,b){var c=this;return"function"==typeof a&&(b=a,a={}),d(c.schema).then(function(){var b=g.defer();return a&&("skip"in a?a.offset=a.skip:"offset"in a&&(a.skip=a.offset)),a&&a.where&&"function"!=typeof a.where&&(a.where=c._forDB(a.where)),c.schema.adapter.all(c.modelName,a,function(d,e){e&&e.forEach?(a&&a.onlyKeys||e.forEach(function(b,d){var f=new c;b=c._fromDB(b),f._initProperties(b,!1),e[d]=a&&a.include&&a.collect?f.__cachedRelations[a.collect]:f}),d?b.reject(d):b.resolve(e)):d?b.reject(d):b.resolve([])}),b.promise}).nodeify(b)},c.iterate=function(a,b,c){function d(a){a?i.reject(a):i.resolve(m)}function e(){return m+=1,a.skip=a.offset=m*l,l>k&&(a.limit=Math.abs(k)),a.limit<=0?void d():void f.all(a).done(function(c){if(0===c.length||0>=k)return void d();var f=function(h){return h?void d(h):++g>=c.length?void e():void b(c[g],f,a.offset+g)};k-=c.length;var g=-1;if(j){var h,i=c.length;h=function(){0===--i&&e()},c.forEach(function(c,d){b(c,h,a.offset+d)})}else f()},h(i.reject,i))}var f=this,i=g.defer();"function"==typeof a&&(b=a,a={});var j=a.concurrent;delete a.concurrent;var k=a.limit,l=a.limit=a.batchSize||1e3,m=-1;return e(),i.promise.nodeify(c)},c.findOne=function(a,b){var c=this;return"function"==typeof a&&(b=a,a={}),d(c.schema).then(function(){var b=g.defer();return a="object"==typeof a?a:{},a.limit=1,c.all(a).done(function(a){b.resolve(a&&0!==a.length?a[0]:null)},h(b.reject,b)),b.promise}).nodeify(b)},c.destroyAll=function(a){var b=this;return d(b.schema).then(function(){var a=g.defer();return b.schema.adapter.destroyAll(b.modelName,function(b){b?a.reject(b):a.resolve()}),a.promise}).nodeify(a)},c.destroySome=function(a,b){var c=this;return d(c.schema).then(function(){var b=g.defer();return c.all(a).then(function(a){if(!a||!a.length)throw new Error("No items found to destroy");var c=[];a.forEach(function(a){c.push(a.destroy())}),g.Q.all(c).done(function(a){b.resolve(a.length)})}).catch(function(a){b.reject(a)}).done(),b.promise}).nodeify(b)},c.count=function(a,b){var c=this;return"function"==typeof a&&(b=a,a=null),d(c.schema).then(function(){var b=g.defer();return"object"==typeof a?"function"!=typeof a.where&&(a=c._forDB(a)):a=null,c.schema.adapter.count(c.modelName,b.callback,a),b.promise}).nodeify(b)},c.toString=function(){return"[Model "+this.modelName+"]"},c.prototype.save=function(a,b){var c=this.constructor,e=this;return"function"==typeof a&&(b=a,a={}),d(c.schema).then(function(){a="object"==typeof a?a:{},"validate"in a||(a.validate=!0);var b=e.toObject(!0),d=c.modelName;if(!e.id)return b={data:e,options:a},c.create(b);var f=g.defer(),i=h(f.reject,f),j=function(){e.trigger("save",function(a){e.trigger("update",function(c){e._adapter().save(d,e.constructor._forDB(b),function(d){d?f.reject(d):(e._initProperties(b,!1),c.call(e,function(){a.call(e,function(){f.resolve(e)})}))})},b,i)},b,i)};return a.validate?e.isValid(b).done(function(){j()},i):j(),f.promise}).nodeify(b)},c.prototype.isNewRecord=function(){return!this.id},c.prototype._adapter=function(){return this.schema.adapter},c.prototype.toObject=function(a,b){var c={},d=this.constructor.schema.definitions[this.constructor.modelName],e=(d.properties,this);if(this.constructor.forEachProperty(function(a){c[a]=e[a]instanceof j?e[a].toObject():e.__data.hasOwnProperty(a)?e[a]:null}),!a&&(Object.keys(e).forEach(function(a){c.hasOwnProperty(a)||(c[a]=e[a])}),b===!0&&this.__cachedRelations)){var f=this.__cachedRelations;Object.keys(f).forEach(function(a){c.hasOwnProperty(a)||(c[a]=f[a])})}return c},c.prototype.toJSON=function(a){return this.toObject(!1,a)},c.prototype.destroy=function(a){var b=this.constructor,c=this;return d(b.schema).then(function(){var a=g.defer();return c.trigger("destroy",function(d){c._adapter().destroy(b.modelName,c.id,function(b){b?a.reject(b):d(h(a.resolve,a))})},c.toObject(),h(a.reject,a)),a.promise}).nodeify(a)},c.prototype.updateAttribute=function(a,b,c){var d={};return d[a]=b,this.updateAttributes(d,c)},c.prototype.updateAttributes=function(a,b){var c=this.constructor,e=this;return d(c.schema).then(function(){var b=c.modelName,d=g.defer(),f=h(d.reject,d);return a="object"==typeof a?a:{},Object.keys(a).forEach(function(b){e[b]=a[b]}),e.isValid(a).done(function(){e.trigger("save",function(c){e.trigger("update",function(f){Object.keys(a).forEach(function(b){e[b]=a[b]}),e._adapter().updateAttributes(b,e.id,e.constructor._forDB(e.toObject(!0)),function(b){b||Object.keys(a).forEach(function(a){e.__dataWas[a]=e.__data[a]}),f.call(e,function(){c.call(e,function(){b?d.reject(b):d.resolve(e)})})})},a,f)},a,f)},f),d.promise}).nodeify(b)},c.prototype.fromObject=function(a){var b=this;Object.keys(a).forEach(function(c){b[c]=a[c]})},c.prototype.propertyChanged=function(a){return this.__data[a]!==this.__dataWas[a]},c.prototype.reload=function(a){var b=this.constructor,c=this;return d(b.schema).then(function(){return b.find(c.id)}).nodeify(a)},c.prototype.reset=function(){var a=this;Object.keys(a).forEach(function(b){"id"===b||a.constructor.schema.definitions[a.constructor.modelName].properties[b]||delete a[b],a.propertyChanged(b)&&(a[b]=a[b+"_was"])})},c.prototype.inspect=function(){return f.inspect(this.__data,!1,4,!0)}},{"./hooks.js":8,"./include.js":9,"./list.js":10,"./relations.js":12,"./utils":15,"./validations.js":16,util:6}],12:[function(a){"use strict";var b=a("inflection"),c=a("./utils"),d=a("./scope.js").defineScope,e=a("./model.js");e.relationNameFor=function(a){for(var b in this.relations)if("belongsTo"===this.relations[b].type&&this.relations[b].keyFrom===a)return b},e.hasMany=function(a,c){function e(b,c){var d=this;return a.find(b).then(function(a){if(!a)throw new Error("Not found");if(a[k]&&a[k].toString()===d.id.toString())return a;throw new Error("Permission denied")}).nodeify(c)}function f(b,c){var d=this;return a.find(b).then(function(a){if(!a)throw new Error("Not found");
if(a[k]&&a[k].toString()===d.id.toString())return a.destroy();throw new Error("Permission denied")}).nodeify(c)}var g=this.modelName;if(c=c||{},"string"==typeof a)if(c.as=a,c.model)a=c.model;else{var h=b.singularize(a).toLowerCase();for(var i in this.schema.models)i.toLowerCase()===h&&(a=this.schema.models[i])}var j=c.as||b.camelize(b.pluralize(a.modelName),!0),k=c.foreignKey||b.camelize(g+"_id",!0);this.relations[j]={type:"hasMany",keyFrom:"id",keyTo:k,modelTo:a,multiple:!0};var l={find:e,destroy:f};if(c.through){var m=b.camelize(a.modelName+"_id",!0);l.create=function(b,d){"function"==typeof b&&(d=b,b={});{var e=this;this.id}return a.create(b).then(function(a){var b={};return b[c.through.relationNameFor(k)]=e,b[c.through.relationNameFor(m)]=a,c.through.create(b).catch(function(){return a.destroy()}).then(function(){return a})}).nodeify(d)},l.add=function(a,b,d){"function"==typeof b&&(d=b,b={}),b=b||{};var e={};return e[k]=this.id,b[c.through.relationNameFor(k)]=this,e[m]=a.id||a,b[c.through.relationNameFor(m)]=a,c.through.findOrCreate({where:e},b).nodeify(d)},l.remove=function(a,b){var d={};return d[k]=this.id,d[m]=a.id||a,c.through.findOne({where:d}).then(function(a){return a.destroy()}).nodeify(b)},delete l.destroy}d(this.prototype,c.through||a,j,function(){var d={};return d.where={},d.where[k]=this.id,c.through&&(d.collect=b.camelize(a.modelName,!0),d.include=d.collect),d},l),c.through||a.schema.defineForeignKey(a.modelName,k,this.modelName)},e.belongsTo=function(a,d){var e=this;if(d=d||{},"string"==typeof a)if(d.as=a,d.model)a=d.model;else{var f=a.toLowerCase();for(var g in this.schema.models)g.toLowerCase()===f&&(a=this.schema.models[g])}var h=d.as||b.camelize(a.modelName,!0),i=d.foreignKey||h+"Id";this.relations[h]={type:"belongsTo",keyFrom:i,keyTo:"id",modelTo:a,multiple:!1},this.schema.defineForeignKey(this.modelName,i,a.modelName),this.prototype.__finders__=this.prototype.__finders__||{},this.prototype.__finders__[h]=function(b,d){if(null===b||void 0===b)return c.Q.resolve(null).nodeify(d);var e=this;return a.find(b).then(function(a){if(a){if(a.id.toString()===e[i].toString())return a;throw new Error("Permission denied")}return null}).nodeify(d)},this.prototype[h]=function(a,b){if(1===arguments.length)b=a,a=!1;else if(arguments.length>2)throw new Error("Method can't be called with more than two arguments");var d,f=this,g=c.defer();return!a&&this.__cachedRelations&&"undefined"!=typeof this.__cachedRelations[h]&&(d=this.__cachedRelations[h]),b instanceof e?(this[i]=b.id,this.__cachedRelations[h]=b,g.resolve(this)):"undefined"!=typeof b&&"function"!=typeof b?(this[i]=b,delete this.__cachedRelations[h],g.resolve(this)):"undefined"==typeof d?this.__finders__[h].call(f,this[i]).done(function(a){f.__cachedRelations[h]=a,g.resolve(a)},function(a){g.reject(a)}):g.resolve(d),"function"==typeof b&&g.promise.nodeify(b),g.promise}},e.hasAndBelongsToMany=function(a,c){function d(a){var b=a.toLowerCase();for(var c in e)if(c.toLowerCase()===b)return e[c];return null}c=c||{};var e=this.schema.models;if("string"==typeof a&&(c.as=a,a=c.model?c.model:d(b.singularize(a))||a,"string"==typeof a))throw new Error('Could not find "'+a+'" relation for '+this.modelName);if(!c.through){var f=this.modelName+a.modelName,g=a.modelName+this.modelName;c.through=d(f)||d(g)||this.schema.define(f)}c.through.belongsTo(this),c.through.belongsTo(a),this.hasMany(a,{as:c.as,through:c.through})}},{"./model.js":11,"./scope.js":14,"./utils":15,inflection:!1}],13:[function(a,b,c){(function(b){"use strict";function d(c,d){var e=this;e.name=c,e.settings=d||{},e.connected=!1,e.connecting=!1,e.models={},e.definitions={},this.settings.log&&e.on("log",function(a){console.log(a)});var f;if("object"==typeof c)f=c,this.name=f.name;else if(c.match(/^\//))f=a(c);else if(o(b+"/adapters/"+c+".js"))f=a("./adapters/"+c);else try{f=a("jugglingdb-"+c)}catch(g){throw new Error('\nWARNING: JugglingDB adapter "'+c+'" is not installed,\nso your models cannot work, to fix run:\n\n    npm install jugglingdb-'+c,"\n")}if(e.connecting=!0,f.initialize(e,function(){e.adapter.log=function(a,b){e.log(a,b)},e.adapter.logger=function(a){var b=Date.now();return function(c){e.log(c||a,b)}},e.connecting=!1,e.connected=!0,e.emit("connected")}),!e.adapter)throw new Error('Adapter "'+c+'" is not defined correctly: it should define `adapter` member of schema synchronously');e.connect=function(a){var b=k.defer(),c=this;return c.connecting=!0,"function"==typeof c.adapter.connect?c.adapter.connect(function(a){a?b.reject(a):(c.connected=!0,c.connecting=!1,c.emit("connected"),b.resolve())}):b.resolve(),b.promise.nodeify(a)}}function e(a){Object.keys(a).forEach(function(b){var c=a[b];("function"==typeof c||"object"==typeof c&&c&&"Array"===c.constructor.name)&&(a[b]={type:c})})}function f(a,b,c){return"function"==typeof a.adapter[b]?(1===a.adapter[b].length?a.adapter[b](c.callback):(a.adapter[b](),c.resolve()),!0):(c.resolve(),!1)}var g=a("./model.js"),h=a("./list.js"),i=a("events").EventEmitter,j=a("util"),k=a("./utils"),l=a("path"),m=a("fs"),n=k.curry,o=m.existsSync||l.existsSync;c.Schema=d,d.Text=function(a){return a},d.JSON=function(){},d.types={},d.registerType=function(a,b){this.types[b||a.name]=a},d.registerType(d.Text,"Text"),d.registerType(d.JSON,"JSON"),j.inherits(d,i),d.prototype.define=function(a,b,c){var f=this,i=k.slice.call(arguments);if(!a)throw new Error("Class name required");if(1===i.length&&(b={},i.push(b)),2===i.length&&(c={},i.push(c)),c=c||{},"function"==typeof b){var j={};b({property:function(a,b,c){c=c||{},c.type=b,j[a]=c},set:function(a,b){c[a]=b}}),b=j}b=b||{};var l=function o(a,b){return this instanceof o?(g.call(this,a),void k.hiddenProperty(this,"schema",b||this.constructor.schema)):new o(a,b)};k.hiddenProperty(l,"schema",f),k.hiddenProperty(l,"settings",c),k.hiddenProperty(l,"properties",b),k.hiddenProperty(l,"modelName",a),k.hiddenProperty(l,"tableName",c.table||a),k.hiddenProperty(l,"relations",{});for(var m in g)l[m]=g[m];for(var n in g.prototype)l.prototype[n]=g.prototype[n];return l.getter={},l.setter={},e(b,c),this.models[a]=l,this.definitions[a]={properties:b,settings:c},this.adapter.define({model:l,properties:b,settings:c}),l.prototype.__defineGetter__("id",function(){return this.__data.id}),b.id=b.id||{type:f.settings.slave?String:Number},l.forEachProperty=function(a){Object.keys(b).forEach(a)},l.registerProperty=function(a){var c=b[a].type;if(c instanceof Array)c=h;else if("Date"===c.name){var e=Date;c=function(a){return new e(a)}}else"JSON"===c.name||c===d.JSON?c=function(a){return a}:("Text"===c.name||c===d.Text)&&(c=function(a){return a});Object.defineProperty(l.prototype,a,{get:function(){return l.getter[a]?l.getter[a].call(this):this.__data[a]},set:function(b){l.setter[a]?l.setter[a].call(this,b):this.__data[a]=null===b||void 0===b||"object"==typeof c?b:c===Boolean?"false"===b?!1:!!b:c(b)},configurable:!0,enumerable:!0}),l.prototype.__defineGetter__(a+"_was",function(){return this.__dataWas[a]}),Object.defineProperty(l.prototype,"_"+a,{get:function(){return this.__data[a]},set:function(b){this.__data[a]=b},configurable:!0,enumerable:!1})},l.forEachProperty(l.registerProperty),this.emit("define",l,a,b,c),l},d.prototype.defineProperty=function(a,b,c){this.definitions[a].properties[b]=c,this.models[a].registerProperty(b),"function"==typeof this.adapter.defineProperty&&this.adapter.defineProperty(a,b,c)},d.prototype.extendModel=function(a,b){var c=this;e(b,{}),Object.keys(b).forEach(function(d){var e=b[d];c.defineProperty(a,d,e)})},d.prototype.automigrate=function(a){var b=k.defer();return this.freeze(),f(this,"automigrate",b),b.promise.nodeify(a)},d.prototype.autoupdate=function(a){var b=k.defer();return this.freeze(),f(this,"autoupdate",b),b.promise.nodeify(a)},d.prototype.isActual=function(a){var b=k.defer();return this.freeze(),f(this,"isActual",b),b.promise.nodeify(a)},d.prototype.log=function(a,b){this.emit("log",a,b)},d.prototype.freeze=function(){"function"==typeof this.adapter.freezeSchema&&this.adapter.freezeSchema()},d.prototype.tableName=function(a){return this.models[a].model.tableName},d.prototype.defineForeignKey=function(a,b,c){if(!this.definitions[a].properties[b]){if("function"==typeof this.adapter.defineForeignKey){var d=n(function(c,d){if(c)throw c;this.definitions[a].properties[b]={type:d}},this);switch(this.adapter.defineForeignKey.length){case 4:this.adapter.defineForeignKey(a,b,c,d);break;default:case 3:this.adapter.defineForeignKey(a,b,d)}}else this.definitions[a].properties[b]={type:Number};this.models[a].registerProperty(b)}},d.prototype.disconnect=function(a){var b=k.defer();return f(this,"disconnect",b)&&(this.connected=!1),b.promise.nodeify(a)},d.prototype.copyModel=function(a){var b=this,c=a.modelName,d=a.schema.definitions[c],e=function(){a.apply(this,k.slice.call(arguments)),this.schema=b};return j.inherits(e,a),e.__proto__=a,k.hiddenProperty(e,"schema",b),k.hiddenProperty(e,"modelName",c),k.hiddenProperty(e,"tableName",a.tableName),k.hiddenProperty(e,"relations",a.relations),c in b.models||(b.models[c]=e,b.definitions[c]={properties:d.properties,settings:d.settings},b.isTransaction||b.adapter.define({model:e,properties:d.properties,settings:d.settings})),e},d.prototype.transaction=function(){var a=this,b=new i;b.isTransaction=!0,b.origin=a,b.name=a.name,b.settings=a.settings,b.connected=!1,b.connecting=!1,b.adapter=a.adapter.transaction(),b.models={},b.definitions={};for(var c in a.models)a.copyModel.call(b,a.models[c]);return b.connect=a.connect,b.exec=function(a){var c=k.defer();return b.adapter.exec(c.callback),c.promise.nodeify(a)},b}}).call(this,"/lib")},{"./list.js":10,"./model.js":11,"./utils":15,events:2,fs:1,path:!1,util:6}],14:[function(a,b,c){"use strict";function d(a,b,c,d,f){function i(a){return new b(l(this._scope,{where:a||{}}).where)}function j(a,b){return this.build(a).save().nodeify(b)}function k(a){var c=this;return b.all(c._scope).then(function(a){var b=g.defer(),d=h(b.reject,b);return function e(a){a.length>0?a.shift().destroy().done(function(){e(a)},d):b.resolve(c)}(a),b.promise}).nodeify(a)}function l(a,b){return b.where&&(a.where=e(a.where,b.where)),b.include&&(a.include=b.include),b.collect&&(a.collect=b.collect),b.order&&(a.order=b.order),a}a._scopeMeta||(a._scopeMeta={}),a===b?a._scopeMeta[c]=d:b._scopeMeta||(b._scopeMeta={}),Object.defineProperty(a,c,{enumerable:!1,configurable:!0,get:function(){var a=function m(a,d){var e={},f=!1,i=g.defer(),j=!0;if(1===arguments.length)"function"==typeof a?d=a:"boolean"==typeof a?f=a:(e=a,f=!0,j=!1);else if(2===arguments.length)"boolean"==typeof a?f=a:(e=a,f=!0,j=!1);else if(arguments.length>2)throw new Error("Method can be only called with zero, one or two arguments");if(!this.__cachedRelations||"undefined"==typeof this.__cachedRelations[c]||f){var k=this,n=l(e,m._scope);b.all(n).done(function(a){j&&(k.__cachedRelations||(k.__cachedRelations={}),k.__cachedRelations[c]=a),i.resolve(a)},h(i.reject,i))}else i.resolve(this.__cachedRelations[c]);return i.promise.nodeify(d)};a._scope="function"==typeof d?d.call(this):d,a.build=i,a.create=j,a.destroyAll=k;for(var e in f)a[e]=h(f[e],this);return Object.keys(b._scopeMeta).forEach(function(c){Object.defineProperty(a,c,{enumerable:!1,get:function(){return l(a._scope,b._scopeMeta[c]),a}})}),a}})}function e(a,b){return a=a||{},b&&Object.keys(b).forEach(function(c){a[c]=b[c]}),a}c.defineScope=d;var f=a("./model.js"),g=a("./utils"),h=g.curry;f.scope=function(a,b){d(this,this,a,b)}},{"./model.js":11,"./utils":15}],15:[function(a,b,c){(function(b){"use strict";var d=a("bluebird"),e=c.slice=Array.prototype.slice;c.safeRequire=function(c){try{return a(c)}catch(d){return console.log('Run "npm install jugglingdb '+c+'" command to use jugglingdb using '+c+" database engine"),b.exit(1),!1}},c.curry=function(a,b){return function(){return a.apply(b,e.call(arguments))}},c.curryArgs=function(a,b){var c=e.call(arguments,2);return function(){return a.apply(b,c.concat(e.call(arguments)))}},c.Q=d,c.defer=function(){return d.defer()},c.defineReadonlyProp=function(a,b,c){Object.defineProperty(a,b,{writable:!1,enumerable:!0,configurable:!1,value:c})},c.hiddenProperty=function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}).call(this,a("/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,bluebird:!1}],16:[function(a,b,c){"use strict";function d(a,b,c,d){q(this[a])&&c(),d()}function e(a,b,c,d){if(p.call(this,a,b,c))return void d();var e=this[a].length;b.min&&e<b.min&&c("min"),b.max&&e>b.max&&c("max"),b.is&&e!==b.is&&c("is"),d()}function f(a,b,c,d){return p.call(this,a,b,c)?void d():("number"!=typeof this[a]?c("number"):b.int&&this[a]!==Math.round(this[a])&&c("int"),void d())}function g(a,b,c,d){return p.call(this,a,b,c)?void d():(-1===b.in.indexOf(this[a])&&c(),void d())}function h(a,b,c,d){return p.call(this,a,b,c)?void d():(b.in.indexOf(this[a])>-1&&c(),void d())}function i(a,b,c,d){return p.call(this,a,b,c)?void d():("string"==typeof this[a]?this[a].match(b["with"])||c():c(),void d())}function j(a,b,c,d){b.customValidator.call(this,a,b,c,d)}function k(a,b,c,d){if(p.call(this,a,b,c))return void d();var e={where:{}};e.where[a]=this[a];var f=this;f.constructor.all(e).then(v(function(a){a.length>1?c():1!==a.length||f.id&&a[0].id&&a[0].id.toString()==f.id.toString()||c(),d()},this),c).done()}function l(a,b){return function(){r(this,a,arguments,b)}}function m(a){Object.defineProperty(a,"errors",{enumerable:!1,configurable:!0,value:!1})}function n(a,b,c){{var d=b[0],e=b[1];b[2]||{}}if("string"!=typeof d)return c(!1);if(o(a,e,"if"))return c(!1);if(o(a,e,"unless"))return c(!1);var f=!1,g=x[e.validation],h=[];return h.push(d),h.push(e),h.push(function(b){var c,g=e.validation;e.message&&(c=e.message),!c&&y[e.validation]&&(c=y[e.validation]),c||(c="is invalid"),b&&(g+="."+b,c=c[b]?c[b]:y.common[b]?y.common[b]:"is invalid"),a.errors.add(d,c,g),f=!0}),h.push(function(){c(f)}),g.apply(a,h),f}function o(a,b,c){var d=!0;return"function"==typeof b[c]?(d=b[c].call(a),"unless"===c&&(d=!d)):"string"==typeof b[c]&&("function"==typeof a[b[c]]?(d=a[b[c]].call(a),"unless"===c&&(d=!d)):a.__data.hasOwnProperty(b[c])?(d=a[b[c]],"unless"===c&&(d=!d)):d="if"===c),!d}function p(a,b,c){var d=null===this[a]||!(a in this);return d?(b.allowNull||c("null"),!0):q(this[a])?(b.allowBlank||c("blank"),!0):!1}function q(a){return"undefined"==typeof a?!0:a instanceof Array&&0===a.length?!0:null===a?!0:"string"==typeof a&&""===a}function r(a,b,c,d){a._validations||u.hiddenProperty(a,"_validations",[]),c=u.slice.call(c);var e;e="object"==typeof c[c.length-1]?c.pop():{},"custom"===b&&"function"==typeof c[c.length-1]&&(e.customValidator=c.pop()),e.validation=b,c.forEach(function(b){a._validations.push([b,e,d])})}function s(a){u.hiddenProperty(this,"__codes",{}),u.hiddenProperty(this,"__obj",a)}function t(a){this.name="ValidationError",this.message="Validation error",this.statusCode=400,this.obj=a,this.codes=this.obj.errors&&this.obj.errors.__codes,this.context=this.obj&&this.obj.constructor&&this.obj.constructor.modelName,Error.call(this)}var u=a("./utils"),v=u.curry;c.ValidationError=t;var w=a("./model.js");w.validatesPresenceOf=l("presence"),w.validatesLengthOf=l("length"),w.validatesNumericalityOf=l("numericality"),w.validatesInclusionOf=l("inclusion"),w.validatesExclusionOf=l("exclusion"),w.validatesFormatOf=l("format"),w.validate=l("custom"),w.validateAsync=l("custom",{async:!0}),w.validatesUniquenessOf=l("uniqueness",{async:!0});var x={presence:d,length:e,numericality:f,inclusion:g,exclusion:h,format:i,custom:j,uniqueness:k};w.prototype.isValid=function(a,b){var c=!0,d=this,e=0,f=u.defer();return"function"!=typeof a?b=a:f.promise.nodeify(a),d.constructor._validations?(u.hiddenProperty(d,"errors",new s(d)),d.trigger("validate",function(a){var b=!1,g=function(g){b=b||g,0===--e&&a.call(d,function(){c&&!b?(m(d),f.resolve(d)):f.reject(new t(d))})};d.constructor._validations.forEach(function(a){e+=1,n(d,a,g)})},b)):(m(d),d.trigger("validate",function(a){a.call(d,function(){f.resolve(d)})})),f.promise};var y={presence:"can't be blank",length:{min:"too short",max:"too long",is:"length is wrong"},common:{blank:"is blank","null":"is null"},numericality:{"int":"is not an integer",number:"is not a number"},inclusion:"is not included in the list",exclusion:"is reserved",uniqueness:"is not unique"};s.prototype.add=function(a,b,c){c=c||"invalid",this[a]||(this[a]=[],this.__codes[a]=[]),this[a].push(b),this.__codes[a].push(c)},s.prototype.__localize=function(a){var b,c,d=this,e={},f=this.__codes;return b=this.__obj.constructor.i18n,c=b&&b[a]&&b[a].validation,Object.keys(f).forEach(function(a){e[a]=f[a].map(function(b,e){return c&&c[a]&&c[a][b]||d[a][e]})}),e},t.prototype.__proto__=Error.prototype},{"./model.js":11,"./utils":15}]},{},[7])(7)})},a["jugglingdb-rest"]=function(a,b,c){(function(){var a,d;d=c("inflection"),a=function(){function a(a,b){this.schema=a,this.$http=b}var b,c;return b=function(a,b){return b.then(function(b){var c;return c=b.data,a(null,c)},function(b){var c;return c=b.data,a(new Error(c.message))})},c=function(a){var b,c,d,e;if(c=[],null!=a.limit&&c.push("limit="+a.limit),null!=a.order&&c.push("order="+a.order),null!=a.skip&&c.push("skip="+a.skip),null!=a.where&&Object.keys(a.where).length){e=a.where;for(b in e)d=e[b],c.push("where["+b+"]="+d)}return c.join("&")},["connect","disconnect"].forEach(function(b){return a.prototype[b]=function(a){return a()}}),["define","defineForeignKey","possibleIndexes","updateIndexes","transaction"].forEach(function(b){return a.prototype[b]=function(){}}),a.prototype.all=function(a,d,e){var f;return f=this.schema.resourcePaths(a).collection,d=c(null!=d?d:{}),b(e,this.$http.get(""+this.schema.settings.apiRoot+"/"+f+"?"+d))},a.prototype.count=function(a,c){var d;return d=this.schema.resourcePaths(a).collection,b(c,this.$http.get(""+this.schema.settings.apiRoot+"/"+d+"/count"))},a.prototype.create=function(a,c,d){var e;return e=this.schema.resourcePaths(a).collection,b(d,this.$http.post(""+this.schema.settings.apiRoot+"/"+e,c))},a.prototype.destroy=function(a,c,d){var e;return e=this.schema.resourcePaths(a).resource,b(d,this.$http["delete"](""+this.schema.settings.apiRoot+"/"+e+"/"+c))},a.prototype.destroyAll=function(a,c){var d;return d=this.schema.resourcePaths(a).collection,b(c,this.$http["delete"](""+this.schema.settings.apiRoot+"/"+d))},a.prototype.exists=function(a,c,d){var e;return e=this.schema.resourcePaths(a).resource,b(d,this.$http.get(""+this.schema.settings.apiRoot+"/"+e+"/"+c+"/exists"))},a.prototype.find=function(){},a.prototype.save=function(a,c,d){var e,f;return e=c.id,f=this.schema.resourcePaths(a).resource,null!=e?b(d,this.$http.put(""+this.schema.settings.apiRoot+"/"+f+"/"+e,c)):this.create(a,c,d)},a.prototype.updateAttributes=function(a,b,c,d){return c.id=b,this.save(a,c,d)},a.prototype.updateOrCreate=a.prototype.save,a}(),b.initialize=function(b){var c,d,e;return e=b.settings,c=e.$http,d=e.inflection,b.adapter=new a(b,c,d),b.connected=!0}}).call(this)},a.marked=function(a,b){(function(){function c(a){this.tokens=[],this.tokens.links={},this.options=a||l.defaults,this.rules=m.normal,this.options.gfm&&(this.rules=this.options.tables?m.tables:m.gfm)}function d(a,b){if(this.options=b||l.defaults,this.links=a,this.rules=n.normal,this.renderer=this.options.renderer||new e,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?n.breaks:n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function e(a){this.options=a||{}}function f(a){this.tokens=[],this.token=null,this.options=a||l.defaults,this.options.renderer=this.options.renderer||new e,this.renderer=this.options.renderer,this.renderer.options=this.options}function g(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(a){return a.replace(/&([#\w]+);/g,function(a,b){return b=b.toLowerCase(),"colon"===b?":":"#"===b.charAt(0)?String.fromCharCode("x"===b.charAt(1)?parseInt(b.substring(2),16):+b.substring(1)):""})}function i(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function j(){}function k(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function l(a,b,d){if(d||"function"==typeof b){d||(d=b,b=null),b=k({},l.defaults,b||{});var e,h,i=b.highlight,j=0;try{e=c.lex(a,b)}catch(m){return d(m)}h=e.length;var n=function(){var a,c;try{a=f.parse(e,b)}catch(g){c=g}return b.highlight=i,c?d(c):d(null,a)};if(!i||i.length<3)return n();if(delete b.highlight,!h)return n();for(;j<e.length;j++)!function(a){return"code"!==a.type?--h||n():i(a.text,a.lang,function(b,c){return null==c||c===a.text?--h||n():(a.text=c,a.escaped=!0,void(--h||n()))})}(e[j])}else try{return b&&(b=k({},l.defaults,b)),f.parse(c.lex(a,b),b)}catch(m){if(m.message+="\nPlease report this to https://github.com/chjj/marked.",(b||l.defaults).silent)return"<p>An error occured:</p><pre>"+g(m.message+"",!0)+"</pre>";throw m}}var m={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:j,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:j,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:j,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};m.bullet=/(?:[*+-]|\d+\.)/,m.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,m.item=i(m.item,"gm")(/bull/g,m.bullet)(),m.list=i(m.list)(/bull/g,m.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),m._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",m.html=i(m.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,m._tag)(),m.paragraph=i(m.paragraph)("hr",m.hr)("heading",m.heading)("lheading",m.lheading)("blockquote",m.blockquote)("tag","<"+m._tag)("def",m.def)(),m.normal=k({},m),m.gfm=k({},m.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),m.gfm.paragraph=i(m.paragraph)("(?!","(?!"+m.gfm.fences.source.replace("\\1","\\2")+"|"+m.list.source.replace("\\1","\\3")+"|")(),m.tables=k({},m.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),c.rules=m,c.lex=function(a,b){var d=new c(b);return d.lex(a)},c.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},c.prototype.token=function(a,b){for(var c,d,e,f,g,h,i,j,k,a=a.replace(/^ +$/gm,"");a;)if((e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.code.exec(a))a=a.substring(e[0].length),e=e[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?e:e.replace(/\n+$/,"")});else if(e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},j=0;j<h.align.length;j++)h.align[j]=/^ *-+: *$/.test(h.align[j])?"right":/^ *:-+: *$/.test(h.align[j])?"center":/^ *:-+ *$/.test(h.align[j])?"left":null;for(j=0;j<h.cells.length;j++)h.cells[j]=h.cells[j].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),f=e[2],this.tokens.push({type:"list_start",ordered:f.length>1}),e=e[0].match(this.rules.item),c=!1,k=e.length,j=0;k>j;j++)h=e[j],i=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(i-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+i+"}","gm"),"")),this.options.smartLists&&j!==k-1&&(g=m.bullet.exec(e[j+1])[0],f===g||f.length>1&&g.length>1||(a=e.slice(j+1).join("\n")+a,j=k-1)),d=c||/\n\n(?!\s*$)/.test(h),j!==k-1&&(c="\n"===h.charAt(h.length-1),d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},j=0;j<h.align.length;j++)h.align[j]=/^ *-+: *$/.test(h.align[j])?"right":/^ *:-+: *$/.test(h.align[j])?"center":/^ *:-+ *$/.test(h.align[j])?"left":null;for(j=0;j<h.cells.length;j++)h.cells[j]=h.cells[j].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:j,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:j,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=i(n.link)("inside",n._inside)("href",n._href)(),n.reflink=i(n.reflink)("inside",n._inside)(),n.normal=k({},n),n.pedantic=k({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=k({},n.normal,{escape:i(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:i(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=k({},n.gfm,{br:i(n.br)("{2,}","*")(),text:i(n.gfm.text)("{2,}","*")()}),d.rules=n,d.output=function(a,b,c){var e=new d(b,c);return e.output(a)},d.prototype.output=function(a){for(var b,c,d,e,f="";a;)if(e=this.rules.escape.exec(a))a=a.substring(e[0].length),f+=e[1];else if(e=this.rules.autolink.exec(a))a=a.substring(e[0].length),"@"===e[2]?(c=this.mangle(":"===e[1].charAt(6)?e[1].substring(7):e[1]),d=this.mangle("mailto:")+c):(c=g(e[1]),d=c),f+=this.renderer.link(d,null,c);else if(e=this.rules.url.exec(a))a=a.substring(e[0].length),c=g(e[1]),d=c,f+=this.renderer.link(d,null,c);else if(e=this.rules.tag.exec(a))a=a.substring(e[0].length),f+=this.options.sanitize?g(e[0]):e[0];else if(e=this.rules.link.exec(a))a=a.substring(e[0].length),f+=this.outputLink(e,{href:e[2],title:e[3]});else if((e=this.rules.reflink.exec(a))||(e=this.rules.nolink.exec(a))){if(a=a.substring(e[0].length),b=(e[2]||e[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){f+=e[0].charAt(0),a=e[0].substring(1)+a;continue}f+=this.outputLink(e,b)}else if(e=this.rules.strong.exec(a))a=a.substring(e[0].length),f+=this.renderer.strong(this.output(e[2]||e[1]));else if(e=this.rules.em.exec(a))a=a.substring(e[0].length),f+=this.renderer.em(this.output(e[2]||e[1]));else if(e=this.rules.code.exec(a))a=a.substring(e[0].length),f+=this.renderer.codespan(g(e[2],!0));else if(e=this.rules.br.exec(a))a=a.substring(e[0].length),f+=this.renderer.br();else if(e=this.rules.del.exec(a))a=a.substring(e[0].length),f+=this.renderer.del(this.output(e[1]));else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),f+=g(this.smartypants(e[0]));else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return f},d.prototype.outputLink=function(a,b){var c=g(b.href),d=b.title?g(b.title):null;return"!"!==a[0].charAt(0)?this.renderer.link(c,d,this.output(a[1])):this.renderer.image(c,d,g(a[1]))},d.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/--/g,"—").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):a},d.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;d>e;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},e.prototype.code=function(a,b,c){if(this.options.highlight){var d=this.options.highlight(a,b);null!=d&&d!==a&&(c=!0,a=d)}return b?'<pre><code class="'+this.options.langPrefix+g(b,!0)+'">'+(c?a:g(a,!0))+"\n</code></pre>\n":"<pre><code>"+(c?a:g(a,!0))+"\n</code></pre>"},e.prototype.blockquote=function(a){return"<blockquote>\n"+a+"</blockquote>\n"},e.prototype.html=function(a){return a},e.prototype.heading=function(a,b,c){return"<h"+b+' id="'+this.options.headerPrefix+c.toLowerCase().replace(/[^\w]+/g,"-")+'">'+a+"</h"+b+">\n"},e.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.prototype.list=function(a,b){var c=b?"ol":"ul";return"<"+c+">\n"+a+"</"+c+">\n"},e.prototype.listitem=function(a){return"<li>"+a+"</li>\n"},e.prototype.paragraph=function(a){return"<p>"+a+"</p>\n"},e.prototype.table=function(a,b){return"<table>\n<thead>\n"+a+"</thead>\n<tbody>\n"+b+"</tbody>\n</table>\n"},e.prototype.tablerow=function(a){return"<tr>\n"+a+"</tr>\n"},e.prototype.tablecell=function(a,b){var c=b.header?"th":"td",d=b.align?"<"+c+' style="text-align:'+b.align+'">':"<"+c+">";return d+a+"</"+c+">\n"},e.prototype.strong=function(a){return"<strong>"+a+"</strong>"},e.prototype.em=function(a){return"<em>"+a+"</em>"},e.prototype.codespan=function(a){return"<code>"+a+"</code>"},e.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.prototype.del=function(a){return"<del>"+a+"</del>"},e.prototype.link=function(a,b,c){if(this.options.sanitize){try{var d=decodeURIComponent(h(a)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===d.indexOf("javascript:"))return""}var f='<a href="'+a+'"';return b&&(f+=' title="'+b+'"'),f+=">"+c+"</a>"},e.prototype.image=function(a,b,c){var d='<img src="'+a+'" alt="'+c+'"';return b&&(d+=' title="'+b+'"'),d+=this.options.xhtml?"/>":">"},f.parse=function(a,b,c){var d=new f(b,c);return d.parse(a)},f.prototype.parse=function(a){this.inline=new d(a.links,this.options,this.renderer),this.tokens=a.reverse();for(var b="";this.next();)b+=this.tok();
return b},f.prototype.next=function(){return this.token=this.tokens.pop()},f.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},f.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},f.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var a,b,c,d,e,f="",g="";for(c="",a=0;a<this.token.header.length;a++)d={header:!0,align:this.token.align[a]},c+=this.renderer.tablecell(this.inline.output(this.token.header[a]),{header:!0,align:this.token.align[a]});for(f+=this.renderer.tablerow(c),a=0;a<this.token.cells.length;a++){for(b=this.token.cells[a],c="",e=0;e<b.length;e++)c+=this.renderer.tablecell(this.inline.output(b[e]),{header:!1,align:this.token.align[e]});g+=this.renderer.tablerow(c)}return this.renderer.table(f,g);case"blockquote_start":for(var g="";"blockquote_end"!==this.next().type;)g+=this.tok();return this.renderer.blockquote(g);case"list_start":for(var g="",h=this.token.ordered;"list_end"!==this.next().type;)g+=this.tok();return this.renderer.list(g,h);case"list_item_start":for(var g="";"list_item_end"!==this.next().type;)g+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(g);case"loose_item_start":for(var g="";"list_item_end"!==this.next().type;)g+=this.tok();return this.renderer.listitem(g);case"html":var i=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(i);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},j.exec=j,l.options=l.setOptions=function(a){return k(l.defaults,a),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new e,xhtml:!1},l.Parser=f,l.parser=f.parse,l.Renderer=e,l.Lexer=c,l.lexer=c.lex,l.InlineLexer=d,l.inlineLexer=d.output,l.parse=l,"object"==typeof b?a.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):this.marked=l}).call(function(){return this||("undefined"!=typeof window?window:global)}())},a.middleware=function(a,b,c){(function(){var a,d,e=[].slice;d=c("pkgman"),b.Middleware=a=function(){function a(){this._dispatcher=function(){},this._middleware=[]}return a.prototype.use=function(a){return this._middleware.push(a)},a.prototype.dispatch=function(a,b,c){var d,e;return d=0,(e=function(f){return function(g){var h;if(d===f._middleware.length)return c(g);if(h=f._middleware[d],d+=1,4===h.length){if(null==g)return e(g);try{return h(g,a,b,function(a){return e(a)})}catch(i){return g=i,e(g)}}else{if(null!=g)return e(g);try{return h(a,b,function(a){return e(a)})}catch(i){return g=i,e(g)}}}}(this))(null)},a}(),b.fromHook=function(){var b,c,f,g,h,i,j,k,l,m,n,o,p,q;for(c=arguments[0],i=arguments[1],b=3<=arguments.length?e.call(arguments,2):[],b.unshift(c),f=d.invoke.apply(d,b),g=new a,k=0,m=i.length;m>k;k++)for(h=i[k],q=null!=(o=null!=(p=f[h])?p.middleware:void 0)?o:[],l=0,n=q.length;n>l;l++)j=q[l],g.use(j);return g}}).call(this)},a["packages/core/index"]=function(a,b){(function(){b.$appConfig=function(){return["$injector","$routeProvider","$locationProvider","pkgmanProvider",function(a,b,c,d){var e,f,g,h,i,j,k;h=d.invokeWithMocks("route"),k=d.invokeWithMocks("routeAlter");for(i in k)e=k[i],a.invoke(e,null,{routes:h});j=function(a,c){var d,e;return d=c.controller,c.controller=["$injector","$scope","ui/title",function(a,b,e){var f;return e.setPage(null!=(f=c.title)?f:""),a.invoke(d,null,{$scope:b})}],null==c.template&&(c.template=" "),b.when("/"+(null!=(e=c.path)?e:a),c)};for(f in h)g=h[f],j(f,g);return b.when("/shrub-entry-point",{}),c.html5Mode(!0)}]},b.$appRun=function(){return["$rootScope","$location","$window","socket",function(a,b,c,d){return a.$watch(function(){return b.path()},function(){var c,d,e;return e=b.path().substr(1).split("/"),e=function(){var a,b,f;for(f=[],c=a=1,b=e.length;b>=1?b>=a:a>=b;c=b>=1?++a:--a)d=e.slice(0,c).join("-"),f.push(d.replace(/[^_a-zA-Z0-9-]/g,"-"));return f}(),a.pathClass=e.join(" ")}),d.on("core.navigateTo",function(a){return c.location.href=a}),d.on("core.reload",function(){return c.location.reload()})}]},b.$routeMock=function(){return{path:"e2e/sanity-check"}}}).call(this)},a["packages/example/about"]=function(a,b){(function(){b.$route=function(){return{path:"about",title:"About",controller:["$scope",function(a){return a.about="Shrub\n=====\n\nShrub is a JavaScript (or CoffeeScript if you prefer) application\nframework. [AngularJS](http://angularjs.org/) is used on the client-side, as\nwell as [Socket.IO](http://socket.io/), enabling real-time communication right\nout of the box. The server is a [Node.js](http://nodejs.org/) server using\n[Redis](http://redis.io/) for persistence and scalability.\n\nShrub handles generation (using [Grunt](http://gruntjs.com/)) of the vast\nmajority of Angular boilerplate, to allow you to structure your application in\na very clean and consistent way.\n\nAlso provided is an Angular service providing a NodeJS-style module framework\nto allow your application to bridge the gap between Angular and the vast\necosystem of publically available NodeJS-style modules.\n\n### The Twist\n\nJS applications catch flak because they are not impliticly SEO-friendly,\nas well as requiring JS execution, which [some people prefer not to\nallow for untrusted websites](http://www.wired.com/threatlevel/2013/09/freedom-hosting-fbi/).\n\nShrub does an interesting thing which is possible because both sides of the\nstack have fully featured JS ([well, except for certain older browsers...](http://www.youtube.com/watch?v=lD9FAOPBiDk)).\nWhen a client requests a page from Shrub, it spins up a DOM for the request,\nand renders the entire page, JS and all. Shrub then serves the fully-built page\nto the client.\n\nIf the client has JS enabled, the client-side Angular application takes over\nfrom here, loading new pages (nearly) instantly and generally benefitting from\nall the lovely things that client-side applications offer.\n\nHowever, if the client does not have JS enabled, a new page will hit the server\nagain, and Shrub, crafty as it is, will reuse the DOM created for that session,\nnavigate Angular to the new page, render it, and serve it to the client. Nice! \n\n### Get rolling\n\n* Get yourself a clone: `$ git clone git://github.com/cha0s/shrub.git`\n\n* Get in the new directory and then the usual `npm install`, followed by\n`$ scripts/good-to-go`. This script will return 0 if the project builds, and\nthe tests run successfully. In other words, you can easily wire it up in a\npre-commit hook.\n\n* Spin up the server: `$ npm start` and navigate to http://localhost:4201 (make\nsure you've run grunt at least once!)\n\n* Check out how Shrub has generated a lot of Angular boilerplate for\nyou. Particularly app/js/{controllers,directives,filters,services}.js will\nbe of interest.\n\n### TODO\n\nThere is much to do, and this project is currently essentially a\nproof-of-concept of some of the ideas outlined here. My plans for this\nframework include:\n\n* Integration of a database abstraction layer\n* A resource layer (using the aforementioned db layer) for serving Angular $resource requests\n* Socket/Session stores based on aforementioned db layer\n* Better handling of server-side DOM in the absence of a session/cookie\n* Research into whether server-side rendering can be synchronized in a DRY fashion (currently the rendering is given 50 ms to complete, not ideal)\n* Better abstraction of assets, instead of (for instance) hardcoding bootstrap/LESS\n* Using standardized solutions to UI and Bootstrap interface, instead of the hackish half-hand-rolled solutions currently in place\n* Better abstraction of the RPC interface, allowing other systems beside Socket.IO\n* Research into whether the http server interface (currently using Express) is worth abstracting\n* There is a rudimentary working form API, but research should be done as to how to DRY it up and make sure it's secure and resistant to attack",a.$emit("shrubFinishedRendering")}],template:'\n<span\n	class="about"\n	data-ng-bind-html="about | uiMarkdown:false"\n></span>\n'}}}).call(this)},a["packages/example/home"]=function(a,b){(function(){b.$appConfig=function(){return["$routeProvider",function(a){return a.otherwise({redirectTo:"/home"})}]},b.$route=function(){return{path:"home",title:"Home",controller:["$scope",function(a){return a.$emit("shrubFinishedRendering")}],template:'\n<div class="jumbotron">\n	\n	<h1>Shrub</h1>\n	\n	<p class="lead">Welcome to the example application for Shrub!</p>\n	\n	<hr>\n\n</div>\n'}}}).call(this)},a["packages/example/index"]=function(a,b,c){(function(){var a,d,e,f;for(b.$appRun=function(){return["ui/nav","ui/title",function(a,b){return a.setLinks([{pattern:"/home",href:"/home",name:"Home"},{pattern:"/about",href:"/about",name:"About"},{pattern:"/user/register",href:"/user/register",name:"Sign up"},{pattern:"/user/login",href:"/user/login",name:"Sign in"},{pattern:"/user/logout",href:"/user/logout",name:"Sign out"}]),b.setSite("Shrub")}]},f=["about","home"],d=0,e=f.length;e>d;d++)a=f[d],b[a]=c("./"+a)}).call(this)},a["packages/form/index"]=function(a,b){(function(){b.$directive=function(){return["$compile","$injector","$q","form","require",function(a,b,c,d,e){return{link:function(f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t;if(o=h.form,null!=(p=f[o])){j=angular.element("<form>"),j=angular.element("<form>").attr({"data-ng-submit":""+o+".submit.handler()",method:null!=(t=j.attr("method"))?t:"POST"}).addClass(o);for(r in p)n=p[r],null!=n.type&&(m=angular.element('<div class="form-group">'),m.append(i=function(){var a;switch(n.type){case"hidden":return f[r]=n.value,angular.element('<input type="hidden">').attr({name:r});case"email":case"password":case"text":return null!=n.label&&m.append(angular.element("<label>").text(n.label)),l=angular.element('<input type="'+n.type+'">').attr({name:r,"data-ng-model":r}).addClass("form-control"),null!=n.defaultValue&&l.attr("value",n.defaultValue),n.required&&l.attr("required","required"),l;case"submit":return null!=n.rpc&&(null==n.handler&&(n.handler=function(){}),q=n.handler,n.handler=function(){var a,c,d;d=e("inflection"),a=d.underscore(o),a=d.dasherize(a.toLowerCase()),a=a.replace("-","."),c={};for(r in p)n=p[r],"submit"!==n.type&&(c[r]=f[r]);return b.invoke(["rpc",function(b){return b.call(a,c).then(function(a){return q(null,a)},function(a){return q(a)})}])}),l=angular.element('<input type="submit">'),l.attr("value",null!=(a=n.label)?a:"Submit"),l.addClass("btn btn-default")}}()),j.append(m));return k=angular.element('<input type="hidden"/>'),k.attr({name:"formKey",value:o}),j.append(k),g.append(j),a(j)(f),d.register(o,f,j),null!=(s=null!=p.submit?p.submit:p.submit={}).handler?s.handler:s.handler=function(){return c.when(!0)}}}}}]},b.$service=function(){return[function(){var a;a={},this.register=function(b,c,d){return a[b]={scope:c,element:d}},this.lookup=function(b){return a[b]}}]}}).call(this)},a["packages/limiter/index"]=function(a,b,c){(function(){var a,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c("errors"),a=function(a){function b(a,c){this.time=c,b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.key="limiterThreshold",b.prototype.template=":message You may try again :time.",b.prototype.toJSON=function(){return[this.key,this.message,this.time]},b}(d.BaseError),b.$errorType=function(){return a}}).call(this)},a["packages/rpc/index"]=function(a,b,c){(function(){var a;a=c("errors"),b.$appRun=function(){return["$window","config","rpc",function(a,b,c){return a.navigator.userAgent.match(/^Node\.js .*$/)?void 0:c.call("hangup")}]},b.$service=function(){return["$injector","$q","require","socket",function(b,c,d,e){var f,g,h;h={},g=null;try{b.invoke(["ui/notifications",function(a){return g=a}])}catch(i){f=i}return h.call=function(b,d){var f;return f=c.defer(),e.emit("rpc://"+b,d,function(b){var c,d;return c=b.error,d=b.result,null!=c?(c=a.unserialize(a.caught(c)),null!=g&&g.add({"class":"alert-danger",text:a.message(c)}),f.reject(c)):f.resolve(d)}),f.promise},h}]}}).call(this)},a["packages/schema/index"]=function(a,b){(function(){b.$service=function(){return["$http","config","require",function(a,b,c){return c("schema-client").define(c("jugglingdb-rest"),{$http:a,apiRoot:b.get("apiRoot")})}]}}).call(this)},a["packages/socket/index"]=function(a,b){(function(){b.$service=function(){return["$rootScope","config",function(a,b){var c,d,e,f;return e={},"unit"===b.get("testMode")?e:(f=io.connect(),d=[],f.on("initialized",function(a){return function(){var b,c,f,g;for(g=[],c=0,f=d.length;f>c;c++)b=d[c],g.push(e.emit.apply(a,b));return g}}(this)),c={},e.connect=function(){return f.socket.connect()},e.connected=function(){return f.socket.connected},e.disconnect=function(){return f.disconnect()},e.on=function(d,e){var g;return b.get("debugging")&&null==c[g="on-"+d]&&(c[g]=function(){return f.on(d,function(a){return console.debug("received: "+d+", "+JSON.stringify(a,null,"  "))})}()),f.on(d,function(){var b;return b=arguments,a.$apply(function(){return e.apply(f,b)})})},e.emit=function(c,g,h){return e.connected()?(b.get("debugging")&&console.debug("sent: "+c+", "+JSON.stringify(g,null,"  ")),f.emit(c,g,function(){var d;if(null!=h)return b.get("debugging")&&console.debug("data from: "+c+", "+JSON.stringify(arguments,null,"  ")),d=arguments,a.$apply(function(){return h.apply(f,d)})})):d.push(arguments)},a.$on("debugLog",function(a){return e.emit("debugLog",a)}),e)}]},b.$serviceMock=function(){return["$q","$rootScope","$timeout",function(a,b,c){var d,e,f;return f={},e={},f.on=function(a,b){return(null!=e[a]?e[a]:e[a]=[]).push(b)},f.stimulateOn=function(a,b){return c(function(){var c,d,f,g,h,i;for(h=null!=(g=e[a])?g:[],i=[],d=0,f=h.length;f>d;d++)c=h[d],i.push(c(b));return i})},d={},f.catchEmit=function(a,b){return(null!=d[a]?d[a]:d[a]=[]).push(b)},f.emit=function(a,b,e){return c(function(){var c,f,g,h,i,j;for(i=null!=(h=d[a])?h:[],j=[],f=0,g=i.length;g>f;f++)c=i[f],j.push(c(b,e));return j})},f}]}}).call(this)},a["packages/ui/index"]=function(a,b,c){(function(){var a,d,e,f;for(f=["markdown","nav","notifications","title","window"],d=0,e=f.length;e>d;d++)a=f[d],b[a]=c("./"+a)}).call(this)},a["packages/ui/markdown"]=function(a,b,c){(function(){var a;a=c("marked"),b.$filter=function(){return function(){return function(b,c){return null==c&&(c=!0),a(b,{sanitize:c})}}}}).call(this)},a["packages/ui/nav"]=function(a,b){(function(){b.$directive=function(){return["$location","ui/nav","socket","ui/title","user",function(a,b,c,d,e){return{link:function(c,f,g){var h;return c.navClass=g.uiNav?g.uiNav:"ui-nav",c.links=b.links,c.user=e.instance(),c.$watch(function(){return d.page()},function(){return c.pageTitle=d.page()}),(h=function(){var b,d,e,f,g,h,i;for(d=a.path(),h=c.links(),i=[],f=0,g=h.length;g>f;f++)b=h[f],e=new RegExp("^"+b.pattern+"$",["i"]),i.push(b.active=e.test(d)?"active":void 0);return i})(),c.$watch(function(){return c.links()},h),c.$watch(function(){return a.path()},h)},template:'\n<nav class="navbar navbar-default" role="navigation">\n	<div class="container-fluid">\n		\n		<div class="navbar-header">\n			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".{{navClass}}">\n				<span class="sr-only">Toggle navigation</span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n				<span class="icon-bar"></span>\n			</button>\n\n			<a class="navbar-brand" href="#"><span data-ng-bind="pageTitle"></span></a>\n			\n		</div>\n		\n		<div class="navbar-collapse collapse" data-ng-class="navClass">\n			<p class="navbar-text navbar-right identity-wrapper">\n				<span class="identity">\n					You are <span class="username" data-ng-bind="user.name"></span>\n				</span>\n			</p>\n			<ul class="nav navbar-nav navbar-right">\n				<li data-ng-class="link.active" data-match-route="{{link.pattern}}" data-ng-repeat="link in links()">\n					<a target="{{link.target}}" data-ng-href="{{link.href}}" data-ng-bind="link.name"></a>\n				</li>\n			</ul>\n		</div>\n		\n	</div>\n</nav>\n'}}]},b.$service=function(){return[function(){var a;a=[],this.links=function(){return a},this.setLinks=function(b){return a=b}}]}}).call(this)},a["packages/ui/notifications"]=function(a,b){(function(){b.$directive=function(){return["$timeout","ui/notifications",function(a,b){return{link:function(c,d){var e,f;return f=null,e=d.find(".notification-wrapper"),c.close=function(){a.cancel(f),e.fadeOut("2000",function(){return c.$apply(function(){return b.removeTop()})})},c.$watch(function(){return b.top()},function(){return c.notification=b.top(),0!==b.count()?(e.fadeIn("2000"),f=a(function(){return c.close()},15e3)):void 0})},template:'\n<div class="notification-wrapper">\n	\n	<div\n		data-ng-show="!!notification"\n		data-ng-class="notification.class"\n		class="alert notification fade in"\n	>\n		<button\n			type="button"\n			class="close"\n			data-ng-click="close()"\n		>&times;</button>\n		<span data-ng-bind-html="notification.text"></span>\n	</div>\n	\n</div>\n'}}]},b.$service=function(){return["socket",function(a){var b,c;return c=[],b={},b.add=function(a){return null==a["class"]&&(a["class"]="alert-info"),c.push(a)},b.top=function(){return c[0]},b.removeTop=function(){return c.shift()},b.count=function(){return c.length},a.on("notifications",function(a){var c,d,e,f,g;for(f=a.notifications,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(b.add(c));return g}),b}]}}).call(this)},a["packages/ui/title"]=function(a,b){(function(){b.$directive=function(){return["ui/title",function(a){return{link:function(b){return b.$watch(function(){return a.window()},function(){return b.windowTitle=a.window()})}}}]},b.$service=function(){return["$rootScope","$interval",function(a,b){var c,d,e,f,g,h,i,j;f="",this.page=function(){return f},this.setPage=function(a,b){return null==b&&(b=!0),f=a,b?this.setWindow([f,h].join(g)):void 0},g=" · ",this.separator=function(){return g},this.setSeparator=function(a){return g=a},h="",this.site=function(){return h},this.setSite=function(a){return h=a},i="",this.window=function(){return j(i)},this.setWindow=function(a){return i=a},e=function(a){return"¯¯¯"+a.toUpperCase()+"¯¯¯"},d=function(a){return"___"+a+"___"},j=angular.identity,c=null,this.flash=function(){return null==c?c=b(function(){return j=j===e?d:e},600):void 0},this.stopFlashing=function(){return null!=c&&b.cancel(c),c=null,j=angular.identity},this.windowWrapper=function(){return j},this.setWindowWrapper=function(a){return j=a},this.flashDownWrapper=function(){return d},this.setFlashDownWrapper=function(a){return d=a},this.flashUpWrapper=function(){return e},this.setFlashUpWrapper=function(a){return e=a}}]}}).call(this)},a["packages/ui/window"]=function(a,b){(function(){b.$service=function(){return["$rootScope","$window",function(a,b){var c,d;c=!0,angular.element(b).bind("focus",function(){return a.$apply(function(){return c=!0})}),angular.element(b).bind("blur",function(){return a.$apply(function(){return c=!1})}),this.isActive=function(){return c},d=null,b.onbeforeunload=function(){return d},this.notifyOnClose=function(a){return null==a&&(a=!0),d=a?!0:null}}]}}).call(this)},a["packages/user/forgot"]=function(a,b,c){(function(){var a;a=c("errors"),b.$route=function(){return{title:"Forgot password",controller:["$location","$scope","ui/notifications","user",function(a,b,c,d){return d.isLoggedIn()?a.path("/"):(b.userForgot={usernameOrEmail:{type:"text",label:"Username or Email",required:!0},submit:{type:"submit",label:"Email reset link",rpc:!0,handler:function(b){return null==b?(c.add({text:"A reset link will be emailed."}),a.path("/")):void 0}}},b.$emit("shrubFinishedRendering"))}],template:'\n<div data-form="userForgot"></div>\n'}}}).call(this)},a["packages/user/index"]=function(a,b,c){(function(){var a,d,e,f,g,h;for(a=c("bluebird"),b.$models=function(b){var c;return c=b.define("User",{email:{type:String,index:!0},iname:{type:String,length:24,index:!0},name:{type:String,"default":"Anonymous",length:24},passwordHash:{type:String},resetPasswordToken:{type:String,length:48,index:!0},salt:{type:String,length:128}}),c.prototype.hasPermission=function(){return!1},c.prototype.isAccessibleBy=function(){return!1},c.prototype.redactFor=function(){var b;return b={name:this.name,id:this.id,email:this.email},a.resolve(b)}},d=function(b,c,d){var e,f,g,h,i,j;return f=function(c){return new a(function(a,d){var e;return c instanceof b?a():(e=new Error("Invalid user."),e.code=500,d(e))})},e=function(b,c){return new a(function(a,d){var e;return b.hasPermission(c)?a():(e=new Error("Access denied."),e.code=403,d(e))})},c.authenticatedAll=function(b,g){return f(b).then(function(){return e(b,"schema:"+d+":all")}).then(function(){return c.all(g)}).then(function(a){return a.filter(function(a){return a.isAccessibleBy(b)})}).then(function(c){return a.all(c.map(function(a){return a.redactFor(b)}))}).then(function(b){var c;return b.length>0?b:(c=new Error("Collection not found."),c.code=404,a.reject(c))})},c.authenticatedCount=function(a){return f(a).then(function(){return e(a,"schema:"+d+":count")}).then(function(){return c.count()})},c.authenticatedCreate=function(a,b){return f(a).then(function(){return e(a,"schema:"+d+":create")}).then(function(){return c.create(b)})},c.authenticatedDestroy=function(b,g){return f(b).then(function(){return e(b,"schema:"+d+":create")}).then(function(){return c.authenticatedFind(b,g)}).then(function(c){var d;return c.isDeletableBy(b)?c.destroy():(c.isAccessibleBy(b)?(d=new Error("Access denied."),d.code=403):(d=new Error("Resource not found."),d.code=404),a.reject(d))})},c.authenticatedDestroyAll=function(a){return f(a).then(function(){return e("schema:"+d+":destroyAll")}).then(function(){return c.destroyAll()})},c.authenticatedFind=function(b,d){return f(b).then(function(){return c.find(d)}).then(function(c){var d;return null!=c&&c.isAccessibleBy(b)?c.redactFor(b):(d=new Error("Resource not found."),d.code=404,a.reject(d))})},c.authenticatedUpdate=function(b,d,e){return f(b).then(function(){return c.authenticatedFind(b,d)}).then(function(c){var d;return c.isEditableBy(b)?c.updateAttributes(e):(c.isAccessibleBy(b)?(d=new Error("Access denied."),d.code=403):(d=new Error("Resource not found."),d.code=404),a.reject(d))})},null==(g=c.prototype).isAccessibleBy&&(g.isAccessibleBy=function(){return!0}),null==(h=c.prototype).isEditableBy&&(h.isEditableBy=function(){return!1}),null==(i=c.prototype).isDeletableBy&&(i.isDeletableBy=function(){return!1}),null!=(j=c.prototype).redactFor?j.redactFor:j.redactFor=function(){return a.resolve(this)}},b.$modelsAlter=function(a){var b,c,e;e=[];for(c in a)b=a[c],e.push(d(a.User,b,c));return e},b.$service=function(){return["$q","config","rpc","schema","socket",function(a,b,c,d,e){var f,g,h,i;return h={},i=new d.models.User,g=function(){return i.fromObject((new d.models.User).toObject())},e.on("user.logout",g),h.isLoggedIn=function(){return null!=h.instance().id},h.login=function(a,b,d){return c.call("user.login",{method:a,username:b,password:d}).then(function(a){return i.fromObject(a),i})},h.logout=function(){return c.call("user.logout").then(g)},f=!1,h.instance=function(){return f||(f=!0,i.fromObject(b.get("user"))),i},h}]},b.$serviceMock=function(){return["$delegate","socket",function(a,b){return a.fakeLogin=function(c,d,e){return null==d&&(d="password"),null==e&&(e=1),b.catchEmit("rpc://user.login",function(a,b){return b({result:{id:e,name:c}})}),a.login("local",c,d)},a}]},h=["forgot","login","logout","register","reset"],f=0,g=h.length;g>f;f++)e=h[f],b[e]=c("./"+e)}).call(this)},a["packages/user/login"]=function(a,b,c){(function(){var a,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=c("errors"),a=a=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.key="login",b.prototype.template="No such username/password.",b}(d.BaseError),b.e2eLogin={$routeMock:function(){return{path:"e2e/user/login/:destination",controller:["$location","$routeParams","$scope","socket","user",function(a,b,c,d,e){return e.fakeLogin("cha0s").then(function(){return a.path("/user/"+b.destination)})}]}}},b.$errorType=function(){return a},b.$route=function(){return{title:"Sign in",controller:["$location","$scope","ui/notifications","user",function(a,b,c,d){return d.isLoggedIn()?a.path("/"):(b.userLogin={username:{type:"text",label:"Username",required:!0},password:{type:"password",label:"Password",required:!0},submit:{type:"submit",label:"Sign in",handler:function(){return d.login("local",b.username,b.password).then(function(){return c.add({"class":"alert-success",text:"Logged in successfully."}),a.path("/")})}}},b.$emit("shrubFinishedRendering"))}],template:'\n<div data-form="userLogin"></div>\n\n<a class="forgot" href="/user/forgot">Forgot your password?</a>\n'}}}).call(this)},a["packages/user/logout"]=function(a,b){(function(){b.$route=function(){return{controller:["$location","$q","user",function(a,b,c){return c.isLoggedIn()?c.logout().then(function(){return a.path("/")}):a.path("/")}]}}}).call(this)},a["packages/user/register"]=function(a,b,c){(function(){var a;a=c("errors"),b.$route=function(){return{title:"Sign up",controller:["$location","$scope","ui/notifications","user",function(a,b,c,d){return d.isLoggedIn()?a.path("/"):(b.userRegister={username:{type:"text",label:"Username",required:!0},email:{type:"email",label:"Email",required:!0},submit:{type:"submit",label:"Register",rpc:!0,handler:function(b){return null==b?(c.add({text:"An email has been sent with account registration details. Please check your email."}),a.path("/")):void 0}}},b.$emit("shrubFinishedRendering"))}],template:'\n<div data-form="userRegister"></div>\n'}}}).call(this)},a["packages/user/reset"]=function(a,b,c){(function(){var a;a=c("errors"),b.$route=function(){return{path:"user/reset/:token",title:"Reset your password",controller:["$location","$routeParams","$scope","ui/notifications",function(a,b,c,d){return c.userReset={password:{type:"password",label:"New password",required:!0},token:{type:"hidden",value:b.token},submit:{type:"submit",label:"Reset password",rpc:!0,handler:function(b){return null==b?(d.add({text:"You may now log in with your new password."}),a.path("/user/login")):void 0}}},c.$emit("shrubFinishedRendering")}],template:'\n<div data-form="userReset"></div>\n'}}}).call(this)},a.path=function(a,b,c){!function(c){if("object"==typeof b)a.exports=c();else if("function"==typeof define&&define.amd)define(c);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self),d.path=c()}}(function(){return function a(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof c&&c;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,a,b,d,e)}return d[h].exports}for(var g="function"==typeof c&&c,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/home/cha0s6983/dev/code/js/reddichat/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":1}]},{},[2])(2)})},a.pkgman=function(a,b,c){(function(){var a,d,e=[].slice;a=null,d=[],b.rebuildPackageCache=function(){var b,e,f,g,h;for(a={},g=0,h=d.length;h>g;g++){e=d[g];try{f=c("packages/"+e)}catch(i){if(b=i,b.toString()==="Error: Cannot find module 'packages/"+e+"'")continue;throw b}a[e]=f}},b.registerPackages=function(a){return d.push.apply(d,a),b.rebuildPackageCache()},b.invoke=function(){var c,d,f,g,h,i;d=arguments[0],c=2<=arguments.length?e.call(arguments,1):[],null==a&&b.rebuildPackageCache(),i={},f=function(a,b){var e,g,h;h=[];for(e in b)g=b[e],h.push(e.charCodeAt(0)==="$".charCodeAt(0)?e==="$"+d?i[a]=g.apply(null,c):void 0:f(""+a+"/"+e,g));return h};for(g in a)h=a[g],f(g,h);return i}}).call(this)},a["schema-client"]=function(a,b,c){(function(){var a,d,e;d=c("inflection"),e=c("pkgman"),a=c("jugglingdb-client").Schema,a.prototype.resourcePaths=function(a){var b;return b=d.underscore(a),b=d.dasherize(b.toLowerCase()),{resource:b,collection:d.pluralize(b)}},b.define=function(b,c){var d;return null==c&&(c={}),d=new a(b,c),e.invoke("models",d),e.invoke("modelsAlter",d.models,d),d}}).call(this)},a.underscore=function(a,b){(function(){var c=this,d=c._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?void(this._wrapped=a):new z(a)
};"undefined"!=typeof b?("undefined"!=typeof a&&a.exports&&(b=a.exports=z),b._=z):c._=z,z.VERSION="1.6.0";var A=z.each=z.forEach=function(a,b,c){if(null==a)return a;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;f>d;d++)if(b.call(c,a[g[d]],g[d],a)===e)return;return a};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,z.property(b))},z.where=function(a,b){return z.filter(a,z.matches(b))},z.findWhere=function(a,b){return z.find(a,z.matches(b))},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=z.values(a)),a[z.random(a.length-1)]):z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return null==a?z.identity:z.isFunction(a)?a:z.property(a)};z.sortBy=function(a,b,c){return b=D(b),z.pluck(z.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={};return c=D(c),A(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};z.groupBy=E(function(a,b,c){z.has(a,b)?a[b].push(c):a[b]=[c]}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.partition=function(a,b,c){b=D(b);var d=[],e=[];return A(a,function(a){(b.call(c,a)?d:e).push(a)}),[d,e]},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.contains(b,a)})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===z&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:z.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=z.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=z.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=z.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return z.partial(b,a)},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=function(a){if(!z.isObject(a))return[];if(x)return x(a);var b=[];for(var c in a)z.has(a,c)&&b.push(c);return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return c._=d,this},z.identity=function(a){return a},z.constant=function(a){return function(){return a}},z.property=function(a){return function(b){return b[a]}},z.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},z.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null==a)return void 0;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return z})}).call(this)},function(){var a=[].slice;angular.module("shrub.packages",["shrub.require","shrub.pkgman"]).config(["$compileProvider","$controllerProvider","$filterProvider","$provide","configProvider","pkgmanProvider","requireProvider",function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;l=g.require,h=l("inflection"),j=function(a){var b,c,d;return d=function(){var d,e,f,g;for(f=a.split("/"),g=[],b=d=0,e=f.length;e>d;b=++d)c=f[b],g.push(h.camelize(c.replace(/[^\w]/g,"_"),0===b));return g}(),h.camelize(h.underscore(d.join("")),!0)},m=f.invokeWithMocks("controller");for(k in m)i=m[k],b.register(k,i);n=f.invokeWithMocks("directive");for(k in n)i=n[k],a.directive(j(k),i);o=f.invokeWithMocks("filter");for(k in o)i=o[k],c.register(j(k),i);p=f.invoke("service");for(k in p)i=p[k],d.service(k,i);if(e.get("testMode")){q=f.invoke("serviceMock"),r=[];for(k in q)i=q[k],r.push(d.decorator(k,i));return r}}]),angular.module("shrub.pkgman",["shrub.require"]).provider("pkgman",["$provide","configProvider","requireProvider",function(b,c,d){var e,f,g,h;return f=d.require,h=f("underscore"),e=f("pkgman"),e.registerPackages(c.get("packageList")),g={},g.invoke=function(){var b,c;return c=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],b.unshift(c),e.invoke.apply(e,b)},g.invokeWithMocks=function(){var b,d,f;return d=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],b.unshift(d),f=this.invoke.apply(this,b),c.get("testMode")&&(b[0]=""+d+"Mock",h.extend(f,e.invoke.apply(e,b))),f},g.$get=function(){return g},g}])}.call(this),function(){var b,c,d;d=function(b,d){var e,f,g;if(e=function(b){return a[b]?b:null!=a[""+b+"/index"]?""+b+"/index":void 0},null!=(f=e(b)))return f;if(g=c("path"),null!=(f=e(g.resolve(g.dirname(d),b).substr(1))))return f;throw new Error("Cannot find module '"+b+"'")},c=function(b,e){var f,g,h,i,j,k,l;return b=d(b,e),null==a[b].module&&(f={},h={exports:f},g=a[b],a[b]={module:h},i=c("path"),j=null!=(l="function"==typeof i.dirname?i.dirname(b):void 0)?l:"",k=b,g(h,f,function(a){return c(a,k)},j,k)),a[b].module.exports},b=function(a){return c(a,"")},angular.module("shrub.require",[]).provider("require",function(){return{require:b,$get:function(){return b}}})}.call(this)}(),function(){"use strict";angular.module("shrub",["ui.bootstrap","shrub.core"]),angular.module("shrub.core",["ngRoute","ngSanitize","shrub.config","shrub.packages","shrub.require"]).config(["$injector","pkgmanProvider",function(a,b){var c,d,e,f;e=b.invokeWithMocks("appConfig"),f=[];for(d in e)c=e[d],f.push(a.invoke(c));return f}]).run(["$injector","pkgman",function(a,b){var c,d,e,f;e=b.invokeWithMocks("appRun"),f=[];for(d in e)c=e[d],f.push(a.invoke(c));return f}])}.call(this);