<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hooks - Shrub</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Hooks";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Shrub</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guide/getting-started/">Getting started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guide/errors/">Error handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guide/forms/">Form handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guide/packages/">Package system</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guide/concepts/">Concepts and conventions</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Examples</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../examples/todo-list/">TODO list app</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Reference</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Hooks</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#shrubangularahrefsanitizationwhitelist">shrubAngularAHrefSanitizationWhitelist</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularappconfig">shrubAngularAppConfig</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularapprun">shrubAngularAppRun</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularcontroller">shrubAngularController</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangulardirective">shrubAngularDirective</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangulardirectivealter">shrubAngularDirectiveAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularfilter">shrubAngularFilter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularpackagedependencies">shrubAngularPackageDependencies</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularprovider">shrubAngularProvider</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularroutes">shrubAngularRoutes</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularsandboxnavigationmiddleware">shrubAngularSandboxNavigationMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubangularservice">shrubAngularService</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubassetsmiddleware">shrubAssetsMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubauditfingerprint">shrubAuditFingerprint</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubconfigclient">shrubConfigClient</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubconfigclientalter">shrubConfigClientAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubconfigserver">shrubConfigServer</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubcorebootstrapmiddleware">shrubCoreBootstrapMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubcoreprebootstrap">shrubCorePreBootstrap</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubcoreprocessexit">shrubCoreProcessExit</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubformalter">shrubFormAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubformformkeyalter">shrubFormFormKeyAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubformwidgets">shrubFormWidgets</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubgruntconfig">shrubGruntConfig</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubgruntconfigalter">shrubGruntConfigAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubhttpmiddleware">shrubHttpMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubhttproutes">shrubHttpRoutes</a></li>
                
            
                <li class="toctree-l3"><a href="#shrublimitercheck">shrubLimiterCheck</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubnodemailerhtml">shrubNodemailerHtml</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubormcollections">shrubOrmCollections</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubormcollectionsalter">shrubOrmCollectionsAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubreplcontext">shrubReplContext</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubrpccall">shrubRpcCall</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubrpcroutes">shrubRpcRoutes</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubrpcroutesalter">shrubRpcRoutesAlter</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubskinassets">shrubSkinAssets</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubskinlink">shrubSkinLink</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubskinlink-directive">shrubSkinLink--DIRECTIVE</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubskinlink-directive-id">shrubSkinLink--DIRECTIVE--ID</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubsocketconnectionmiddleware">shrubSocketConnectionMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubsocketdisconnectionmiddleware">shrubSocketDisconnectionMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubtransmittableerrors">shrubTransmittableErrors</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubuinotificationqueues">shrubUiNotificationQueues</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubuserafterloginmiddleware">shrubUserAfterLoginMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubuserafterlogoutmiddleware">shrubUserAfterLogoutMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubuserbeforeloginmiddleware">shrubUserBeforeLoginMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubuserbeforelogoutmiddleware">shrubUserBeforeLogoutMiddleware</a></li>
                
            
                <li class="toctree-l3"><a href="#shrubvillianyreport">shrubVillianyReport</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../packages/">Packages</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../todos/">TODO list</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Source</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/app/">app.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>modules</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/angular/">angular.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/config/">config.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/config.spec/">config.spec.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/errors/">errors.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/errors.spec/">errors.spec.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/logging/">logging.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/middleware/">middleware.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/middleware.spec/">middleware.spec.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/modules/pkgman/">pkgman.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/packages/">packages.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/client/require/">require.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/Gruntfile/">Gruntfile.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>packages</span></li>

        
            
    <ul class="subnav">
    <li><span>shrub-angular-sandbox</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-angular-sandbox/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-angular-sandbox/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-angular</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-angular/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-angular/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-assets</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-assets/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-assets/jquery/">jquery.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-config</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-config/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-core</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-core/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-core/client/test-e2e/">test-e2e.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-core/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-example</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/about/">about.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/client/about/">about.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/client/home/">home.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/client/test-e2e/">test-e2e.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-example/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-form</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/test-unit/">test-unit.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>widget</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/checkbox/">checkbox.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/checkboxes/">checkboxes.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/group/">group.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/hidden/">hidden.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/markup/">markup.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/radio/">radio.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/radios/">radios.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/select/">select.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/submit/">submit.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/text/">text.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/client/widget/textarea/">textarea.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-form/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-grunt</span></li>

        
            
    <ul class="subnav">
    <li><span>dox</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/dox/dynamic/">dynamic.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/dox/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/lint/">lint.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/modules/">modules.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>tests</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/tests/build/">build.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/tests/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-grunt/tests/run/">run.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-html5-audio</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-audio/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-audio/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-html5-local-storage</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-local-storage/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-local-storage/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-html5-notification</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-notification/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-html5-notification/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-http-express</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/errors/">errors.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/logger/">logger.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/routes/">routes.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/session/">session.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http-express/static/">static.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-http</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-http/manager/">manager.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-install</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-install/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-limiter</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-limiter/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-limiter/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-limiter/limiter/">limiter.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-nodemailer</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-nodemailer/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-orm</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-orm/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-orm/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-repl</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-repl/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-rpc</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-rpc/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-rpc/client/test-unit/">test-unit.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-rpc/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-schema-rest</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-schema-rest/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-session</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-session/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-session/store/">store.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-skin-strapped</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin-strapped/client/form/">form.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin-strapped/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin-strapped/client/main-nav/">main-nav.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin-strapped/client/notifications/">notifications.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin-strapped/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-skin</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-skin/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-socket-socket.io</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket-socket.io/client/">index.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket-socket.io/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket-socket.io/manager/">manager.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-socket</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket/client/dummy/">dummy.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket/client/socket/">socket.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-socket/manager/">manager.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-ui</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/attributes/">attributes.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/">index.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>list</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/list/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/list/item/">item.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/markdown/">markdown.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/menu/">menu.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/messages/">messages.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>notifications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/notifications/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/notifications/item/">item.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/notifications/title/">title.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/test-unit/">test-unit.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/client/window-title/">window-title.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-ui/notifications/">notifications.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-user</span></li>

        
            
    <ul class="subnav">
    <li><span>client</span></li>

        
            
    <ul class="subnav">
    <li><span>email</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/email/forgot/">forgot.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/email/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/email/register/">register.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/forgot/">forgot.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/login/">login.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/logout/">logout.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/register/">register.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/reset/">reset.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/test-e2e/">test-e2e.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/client/test-unit/">test-unit.coffee</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/forgot/">forgot.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/">index.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/login/">login.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/logout/">logout.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/register/">register.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-user/reset/">reset.coffee</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>shrub-villiany</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/packages/shrub-villiany/">index.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/">server.coffee</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>server</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/bootstrap/">bootstrap.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/config/">config.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/crypto/">crypto.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/crypto.spec/">crypto.spec.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/fingerprint/">fingerprint.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/logging/">logging.coffee</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../source/server/sandboxes/">sandboxes.coffee</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Shrub</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Reference &raquo;</li>
        
      
    
    <li>Hooks</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/cha0s/shrub" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1>Hook reference</h1>

<h2 id="shrubangularahrefsanitizationwhitelist">shrubAngularAHrefSanitizationWhitelist</h2>
<p><em>Allow packages to define whitelisted patterns for ngHref attributes.</em></p>
<p>By default, Angular filters 'unsafe' URLs passed to the ngHref attribute. This
behavior is normally configured through
<a href="https://docs.angularjs.org/api/ng/provider/$compileProvider#aHrefSanitizationWhitelist">$compileProvider.aHrefSanitizationWhitelist</a>
so Shrub provides this hook to make it easy to add your own whitelisted
patterns.</p>
<p>Implementations of this hook should return an array of strings. The strings
are compiled into a regular expression which determines whether the href is
allowed or not. For instance, <code>shrub-angular</code> provides two patterns by default:</p>
<p><code>'(?:https?|ftp|mailto|tel|file):'</code></p>
<p>which allows the usage of http, https, ftp mailto, tel, and file
protocols, and</p>
<p><code>'javascript:void\\(0\\)'</code></p>
<p>which allows the usage of <code>javascript:void(0)</code> as an href.</p>
<p>Shrub combines all patterns into a regular expression and automatically
enforces that the pattern will occur at the beginning of the string. For
example, if we have two patterns, like:</p>
<p><code>['foo', 'bar']</code></p>
<p>the resulting regular expression will be equivalent to:</p>
<p><code>/^\s*(?:foo|bar)/</code></p>
<p>This hook should be used sparingly, as the reason there is a whitelist in the
first place is because there are security implications to allowing just any
href in a dynamic directive. <strong>Use caution</strong>.</p>
<h3>Implementations must return</h3>

<p>An array of strings to be compiled into a regular expression.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular/client">shrub-angular (client)</a></td><td align="right"><a href="../source/packages/shrub-angular/client#implements-hook-shrubangularahrefsanitizationwhitelist">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular/client">shrub-angular (client)</a></td><td align="right"><a href="../source/packages/shrub-angular/client#invoke-hook-shrubangularahrefsanitizationwhitelist">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularappconfig">shrubAngularAppConfig</h2>
<p><em>Allow packages to hook into the configuration phase of the Angular
application.</em></p>
<p>Packages should implement this hook when they need to run code during the
Angular module configuration phase. See the
<a href="https://docs.angularjs.org/guide/module#module-loading-dependencies">Angular documentation</a>
on <strong>Configuration blocks</strong> for more explanation.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>.</p>
<div class="admonition note"><p class="admonition-title">4 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular/client">shrub-angular (client)</a></td><td align="right"><a href="../source/packages/shrub-angular/client#implements-hook-shrubangularappconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-example/client/home">shrub-example/home (client)</a></td><td align="right"><a href="../source/packages/shrub-example/client/home#implements-hook-shrubangularappconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-html5-local-storage/client">shrub-html5-local-storage (client)</a></td><td align="right"><a href="../source/packages/shrub-html5-local-storage/client#implements-hook-shrubangularappconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-html5-notification/client">shrub-html5-notification (client)</a></td><td align="right"><a href="../source/packages/shrub-html5-notification/client#implements-hook-shrubangularappconfig">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/app">app (client)</a></td><td align="right"><a href="../source/client/app#invoke-hook-shrubangularappconfig">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularapprun">shrubAngularAppRun</h2>
<p><em>Allow packages to hook into the run phase of the Angular application.</em></p>
<p>Packages should implement this hook when they need to run code during the
Angular module run phase. See the
<a href="https://docs.angularjs.org/guide/module#module-loading-dependencies">Angular documentation</a>
on <strong>Run blocks</strong> for more explanation.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>.</p>
<div class="admonition note"><p class="admonition-title">3 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox/client">shrub-angular-sandbox (client)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox/client#implements-hook-shrubangularapprun">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-core/client">shrub-core (client)</a></td><td align="right"><a href="../source/packages/shrub-core/client#implements-hook-shrubangularapprun">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/window-title">shrub-ui/window-title (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/window-title#implements-hook-shrubangularapprun">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/app">app (client)</a></td><td align="right"><a href="../source/client/app#invoke-hook-shrubangularapprun">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularcontroller">shrubAngularController</h2>
<p><em>Define Angular controllers.</em></p>
<p>See <a href="https://docs.angularjs.org/guide/controller">the Angular documentation</a>
for more information about how to define a controller.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>.</p>
<div class="admonition note"><p class="admonition-title">4 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-ui/client/list">shrub-ui/list (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/list#implements-hook-shrubangularcontroller">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/list/item">shrub-ui/list/item (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/list/item#implements-hook-shrubangularcontroller">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/menu">shrub-ui/menu (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/menu#implements-hook-shrubangularcontroller">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/window-title">shrub-ui/window-title (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/window-title#implements-hook-shrubangularcontroller">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangularcontroller">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangulardirective">shrubAngularDirective</h2>
<p><em>Define Angular directives.</em></p>
<p>Use this hook to define Angular directives for your application.</p>
<p>Shrub augments Angular directives to automate some functionality:</p>
<ul>
<li><code>directive.link</code> is proxied to automatically attempt to invoke the <code>link</code>
  method of any controllers attached to the directive. Controllers' <code>link</code>
  method is invoked <strong>before</strong> the directive link function.</li>
<li>If <code>bindToController</code> is set on the Directive Definition Object, the
  directive defaults to including a controller of the same name. This means if
  you define a controller and a directive in the same package (which will have
  the same name), and you specify <code>bindToController</code> on the directive, that
  controller will be automatically attached.</li>
</ul>
<p>See <a href="https://docs.angularjs.org/api/ng/service/$compile#directive-definition-object">the Angular documentation</a>
for more information about how to define a directive.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>.</p>
<div class="admonition note"><p class="admonition-title">25 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client">shrub-form (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/checkbox">shrub-form/widget/checkbox (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/checkbox#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/checkboxes">shrub-form/widget/checkboxes (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/checkboxes#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/group">shrub-form/widget/group (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/group#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/hidden">shrub-form/widget/hidden (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/hidden#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/markup">shrub-form/widget/markup (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/markup#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/radio">shrub-form/widget/radio (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/radio#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/radios">shrub-form/widget/radios (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/radios#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/select">shrub-form/widget/select (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/select#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/submit">shrub-form/widget/submit (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/submit#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/text">shrub-form/widget/text (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/text#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/textarea">shrub-form/widget/textarea (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/textarea#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-skin-strapped/client/main-nav">shrub-skin-strapped/main-nav (client)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped/client/main-nav#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/attributes">shrub-ui/attributes (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/attributes#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/list">shrub-ui/list (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/list#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/list/item">shrub-ui/list/item (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/list/item#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/menu">shrub-ui/menu (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/menu#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/messages">shrub-ui/messages (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/messages#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/notifications">shrub-ui/notifications (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/notifications#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/notifications/item">shrub-ui/notifications/item (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/notifications/item#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/notifications/title">shrub-ui/notifications/title (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/notifications/title#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/window-title">shrub-ui/window-title (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/window-title#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/client/email/forgot">shrub-user/email/forgot (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/email/forgot#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client/email/register">shrub-user/email/register (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/email/register#implements-hook-shrubangulardirective">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/client">shrub-user (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubangulardirective">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangulardirective">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangulardirectivealter">shrubAngularDirectiveAlter</h2>
<p><em>Augment or modify directive definition objects.</em></p>
<p>This hook allows packages to make changes to
<a href="https://docs.angularjs.org/api/ng/service/$compile#comprehensive-directive-api">directive definition objects</a>
provided by packages' implementations of the
<a href="../hooks/#shrubangulardirective"><code>shrubAngularDirective</code></a> hook.</p>
<p><a href="../packages/#shrub-skinclient"><code>shrub-skin</code></a> uses this hook to provide the
dynamic directive recompilation necessary to implement on-the-fly skin changes.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin/client">shrub-skin (client)</a></td><td align="right"><a href="../source/packages/shrub-skin/client#implements-hook-shrubangulardirectivealter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangulardirectivealter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularfilter">shrubAngularFilter</h2>
<p><em>Define Angular filters.</em></p>
<p>See
<a href="https://docs.angularjs.org/guide/filter#creating-custom-filters">the Angular documentation</a>
for more information about how to define and use filters.</p>
<h3>Implementations must return</h3>

<p>A pure function taking the (string) input as the first parameter, followed by
any optional configuration parameters.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-ui/client/markdown">shrub-ui/markdown (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/markdown#implements-hook-shrubangularfilter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangularfilter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularpackagedependencies">shrubAngularPackageDependencies</h2>
<p><em>Define third-party Angular modules to include as application dependencies.</em></p>
<p>Angular modules are defined as a dependency tree. Since we would have to edit
the application file to include those dependencies when defining the <code>shrub</code>
top-level application module (And we don't want to do that), we need a better
solution. <code>angularPackageDependencies</code> is that solution.</p>
<p>Shrub provides the
<a href="../packages#shrub-html5-notification"><code>shrub-html5-notification</code></a> package, which
uses the
<a href="https://github.com/neoziro/angular-notification">angular-notification</a> module.
The name of the module is <code>notification</code>, so the hook implementation looks
like:</p>
<pre><code class="javascript">registrar.registerHook('shrubAngularPackageDependencies', function() {

  return [
    'notification'
  ];
});
</code></pre>

<p>This ensures our application has the <code>notification</code> module marked as a
dependency. You will still need to use the
<a href="../hooks/#shrubgruntconfig"><code>shrubGruntConfig</code></a> hook to provide the actual
JavaScript assets to the client.</p>
<h3>Implementations must return</h3>

<p>An array of strings naming the modules you want to include.</p>
<div class="admonition note"><p class="admonition-title">2 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-html5-local-storage">shrub-html5-local-storage (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-local-storage#implements-hook-shrubangularpackagedependencies">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-html5-notification">shrub-html5-notification (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-notification#implements-hook-shrubangularpackagedependencies">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular">shrub-angular (server)</a></td><td align="right"><a href="../source/packages/shrub-angular#invoke-hook-shrubangularpackagedependencies">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularprovider">shrubAngularProvider</h2>
<p><em>Define Angular providers.</em></p>
<p>See
<a href="https://docs.angularjs.org/api/auto/service/$provide#provider">the Angular documentation</a>
for more information about how to define and use providers.</p>
<h3>Implementations must return</h3>

<p>A provider constructor function.</p>
<div class="admonition note"><p class="admonition-title">3 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-html5-local-storage/client">shrub-html5-local-storage (client)</a></td><td align="right"><a href="../source/packages/shrub-html5-local-storage/client#implements-hook-shrubangularprovider">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-html5-notification/client">shrub-html5-notification (client)</a></td><td align="right"><a href="../source/packages/shrub-html5-notification/client#implements-hook-shrubangularprovider">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-skin/client">shrub-skin (client)</a></td><td align="right"><a href="../source/packages/shrub-skin/client#implements-hook-shrubangularprovider">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangularprovider">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularroutes">shrubAngularRoutes</h2>
<p><em>Define Angular routes.</em></p>
<p>Packages use this hook to define Angular routes.</p>
<h3>Implementations must return</h3>

<p>A route object.</p>
<p>See
<a href="https://docs.angularjs.org/api/ngRoute/provider/$routeProvider#when">the Angular documentation</a>
(specifically the <code>route</code> parameter) for information on defining a route object.</p>
<p>Also note that the <code>path</code> parameter is defined in the route object itself.</p>
<div class="admonition note"><p class="admonition-title">8 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-core/client">shrub-core (client)</a></td><td align="right"><a href="../source/packages/shrub-core/client#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-example/client/about">shrub-example/about (client)</a></td><td align="right"><a href="../source/packages/shrub-example/client/about#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-example/client/home">shrub-example/home (client)</a></td><td align="right"><a href="../source/packages/shrub-example/client/home#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client/forgot">shrub-user/forgot (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/forgot#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/client/login">shrub-user/login (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/login#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client/logout">shrub-user/logout (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/logout#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/client/register">shrub-user/register (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/register#implements-hook-shrubangularroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client/reset">shrub-user/reset (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/reset#implements-hook-shrubangularroutes">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular/client">shrub-angular (client)</a></td><td align="right"><a href="../source/packages/shrub-angular/client#invoke-hook-shrubangularroutes">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularsandboxnavigationmiddleware">shrubAngularSandboxNavigationMiddleware</h2>
<p><em>Define middleware to run when Angular is navigated in its sandbox.</em></p>
<p>Angular sandboxes retain navigation (and other) state for a client without
JavaScript capability. When a user hits another page on the server, the
sandbox navigates the Angular application to the new path. If the path
changed, the middleware collected by this hook are dispatched, allowing
packages to react to the navigation change.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>
from the original HTTP request, along with the following extra properties:</p>
<ul>
<li>(Sandbox) <code>sandbox</code> - The sandbox instance.</li>
</ul>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form">shrub-form (server)</a></td><td align="right"><a href="../source/packages/shrub-form#implements-hook-shrubangularsandboxnavigationmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox">shrub-angular-sandbox (server)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox#invoke-hook-shrubangularsandboxnavigationmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubangularservice">shrubAngularService</h2>
<p><em>Define Angular services.</em></p>
<p>Use this hook to define Angular services for your application.</p>
<p>See <a href="https://docs.angularjs.org/api/auto/service/$provide#service">the Angular documentation</a>
for more information about how to define a service.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a> which returns a
service class/constructor function.</p>
<div class="admonition note"><p class="admonition-title">8 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client">shrub-form (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm/client">shrub-orm (client)</a></td><td align="right"><a href="../source/packages/shrub-orm/client#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-rpc/client">shrub-rpc (client)</a></td><td align="right"><a href="../source/packages/shrub-rpc/client#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-socket/client">shrub-socket (client)</a></td><td align="right"><a href="../source/packages/shrub-socket/client#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/messages">shrub-ui/messages (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/messages#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/client/notifications">shrub-ui/notifications (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/notifications#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/client/window-title">shrub-ui/window-title (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/window-title#implements-hook-shrubangularservice">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client">shrub-user (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubangularservice">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/packages">packages (client)</a></td><td align="right"><a href="../source/client/packages#invoke-hook-shrubangularservice">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubassetsmiddleware">shrubAssetsMiddleware</h2>
<p><em>Define assets to serve to the client application.</em></p>
<p>Packages may come bundled with JavaScript or CSS assets. This hook is how you
can provide them to the client application.</p>
<p>Asset middleware takes <code>assets</code> as its first argument. This is an object with
the following properties:</p>
<ul>
<li>(String Array) <code>scripts</code> - A list of script assets.</li>
<li>(String Array) <code>stylesheets</code> - A list of sylesheet assets.</li>
</ul>
<p><strong>NOTE</strong>: This hook lets you serve assets, but will not automatically copy
them from your package to the <code>app</code> directory where they will be served.
You'll need to implement the <a href="../hooks/#shrubgruntconfig"><code>shrubGruntConfig</code></a>
hook for that.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(assets, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">8 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular">shrub-angular (server)</a></td><td align="right"><a href="../source/packages/shrub-angular#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-assets">shrub-assets (server)</a></td><td align="right"><a href="../source/packages/shrub-assets#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-assets/jquery">shrub-assets/jquery (server)</a></td><td align="right"><a href="../source/packages/shrub-assets/jquery#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-config">shrub-config (server)</a></td><td align="right"><a href="../source/packages/shrub-config#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-grunt">shrub-grunt (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-html5-local-storage">shrub-html5-local-storage (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-local-storage#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-html5-notification">shrub-html5-notification (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-notification#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-socket-socket.io">shrub-socket-socket.io (server)</a></td><td align="right"><a href="../source/packages/shrub-socket-socket.io#implements-hook-shrubassetsmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-assets">shrub-assets (server)</a></td><td align="right"><a href="../source/packages/shrub-assets#invoke-hook-shrubassetsmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubauditfingerprint">shrubAuditFingerprint</h2>
<p><em>Create a fingerprint for a connection</em>.</p>
<p>Each request has a fingerprint generated which allows bad behavior to be
tracked (like exceeding API limits).</p>
<h3>Implementations must return</h3>

<p>A keyed object of fingerprint values. <code>null</code> or <code>undefined</code> values will be
filtered out when doing most checks.</p>
<div class="admonition note"><p class="admonition-title">3 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubauditfingerprint">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-session">shrub-session (server)</a></td><td align="right"><a href="../source/packages/shrub-session#implements-hook-shrubauditfingerprint">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubauditfingerprint">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/server/fingerprint">server/fingerprint (server)</a></td><td align="right"><a href="../source/server/fingerprint#invoke-hook-shrubauditfingerprint">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubconfigclient">shrubConfigClient</h2>
<p><em>Define configuration variables to be sent to the client.</em></p>
<p>Packages can implement this hook to pass configuration variables to the client.
Configuration is keyed by the name of the package.</p>
<p>Variables with <code>null</code> or <code>undefined</code> values will be filtered out and not sent
to the client.</p>
<h3>Implementations must return</h3>

<p>A keyed object.</p>
<div class="admonition note"><p class="admonition-title">5 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubconfigclient">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-skin">shrub-skin (server)</a></td><td align="right"><a href="../source/packages/shrub-skin#implements-hook-shrubconfigclient">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-socket">shrub-socket (server)</a></td><td align="right"><a href="../source/packages/shrub-socket#implements-hook-shrubconfigclient">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#implements-hook-shrubconfigclient">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubconfigclient">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-config">shrub-config (server)</a></td><td align="right"><a href="../source/packages/shrub-config#invoke-hook-shrubconfigclient">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubconfigclientalter">shrubConfigClientAlter</h2>
<p><em>Alter configuration variables defined by packages.</em></p>
<p>Packages can implement this hook to alter configuration variables defined by
any other (or even the same) package.</p>
<p>Implementations are passed a <a href="../source/client/modules/config/"><code>Config</code></a> object.</p>
<p>See: <a href="../hooks/#shrubconfigclient"><code>shrubConfigClient</code></a>.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-grunt">shrub-grunt (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt#implements-hook-shrubconfigclientalter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-config">shrub-config (server)</a></td><td align="right"><a href="../source/packages/shrub-config#invoke-hook-shrubconfigclientalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubconfigserver">shrubConfigServer</h2>
<p><em>Define server-side configuration settings.</em></p>
<p>Packages may use this hook to define default configuration for server-side
functionality. These settings can be overridden in the settings file.</p>
<h3>Implementations must return</h3>

<p>A recursive object which will be folded into the server configuration under
the package name key. For instance, say we have a package <code>my-package</code> which
defines the hook like:</p>
<pre><code class="javascript">registrar.registerHook('shrubConfigServer', function() {
  return {
    one: 68,
    two: {
      three: 419
    }
  };
});
</code></pre>

<p>You would then find those values in the configuration at:</p>
<pre><code class="javascript">config.get('packageSettings:my-package:one');
config.get('packageSettings:my-package:two:three');
</code></pre>

<div class="admonition note"><p class="admonition-title">12 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox">shrub-angular-sandbox (server)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-assets">shrub-assets (server)</a></td><td align="right"><a href="../source/packages/shrub-assets#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http">shrub-http (server)</a></td><td align="right"><a href="../source/packages/shrub-http#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-nodemailer">shrub-nodemailer (server)</a></td><td align="right"><a href="../source/packages/shrub-nodemailer#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-repl">shrub-repl (server)</a></td><td align="right"><a href="../source/packages/shrub-repl#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-session">shrub-session (server)</a></td><td align="right"><a href="../source/packages/shrub-session#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-skin">shrub-skin (server)</a></td><td align="right"><a href="../source/packages/shrub-skin#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-socket">shrub-socket (server)</a></td><td align="right"><a href="../source/packages/shrub-socket#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubconfigserver">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubconfigserver">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/server/config">server/config (server)</a></td><td align="right"><a href="../source/server/config#invoke-hook-shrubconfigserver">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubcorebootstrapmiddleware">shrubCoreBootstrapMiddleware</h2>
<p><em>Define middleware to run when the server application is bootstrapping.</em></p>
<p>This hook is where most of the major initialization work happens on the
Shrub server. <a href="../packages/#shrub-http"><code>shrub-http</code></a> spins up an HTTP server,
<a href="../packages/#shrub-orm"><code>shrub-orm</code></a> spins up Waterline, and more.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts/#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">12 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox">shrub-angular-sandbox (server)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http-express/session">shrub-http-express/session (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/session#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-http">shrub-http (server)</a></td><td align="right"><a href="../source/packages/shrub-http#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-install">shrub-install (server)</a></td><td align="right"><a href="../source/packages/shrub-install#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-nodemailer">shrub-nodemailer (server)</a></td><td align="right"><a href="../source/packages/shrub-nodemailer#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-repl">shrub-repl (server)</a></td><td align="right"><a href="../source/packages/shrub-repl#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-rpc">shrub-rpc (server)</a></td><td align="right"><a href="../source/packages/shrub-rpc#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-socket">shrub-socket (server)</a></td><td align="right"><a href="../source/packages/shrub-socket#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/login#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/logout">shrub-user/logout (server)</a></td><td align="right"><a href="../source/packages/shrub-user/logout#implements-hook-shrubcorebootstrapmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/server">server (server)</a></td><td align="right"><a href="../source/server#invoke-hook-shrubcorebootstrapmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubcoreprebootstrap">shrubCorePreBootstrap</h2>
<p><em>Invoked before the application bootstrap phase.</em></p>
<h3>Mitigate slow build times</h3>

<p>If your package <code>require</code>s heavy modules, you should require them in an
implementation of hook <code>shrubCorePeBootstrap</code>. For instance, say you have a
package like:</p>
<pre><code class="javascript">var someHeavyModule = require('some-heavy-module');

exports.pkgmanRegister = function(registrar) {

  registrar.registerHook('someHook', function() {
    someHeavyModule.doSomething();
  });
};
</code></pre>

<p>This will slow the build process down, since <code>some-heavy-module</code> must be
loaded when loading your package. Use this pattern instead:</p>
<pre><code class="javascript">var someHeavyModule = null;

exports.pkgmanRegister = function(registrar) {

  registrar.registerHook('shrubCorePeBootstrap', function() {
    someHeavyModule = require('some-heavy-module');
  });

  registrar.registerHook('someHook', function() {
    someHeavyModule.doSomething();
  });
};
</code></pre>

<p>So that the heavy module will not be <code>require</code>d until hook
<code>shrubCorePeBootstrap</code> is invoked.</p>
<div class="admonition note"><p class="admonition-title">10 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-http-express">shrub-http-express (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-limiter">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-nodemailer">shrub-nodemailer (server)</a></td><td align="right"><a href="../source/packages/shrub-nodemailer#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-rpc">shrub-rpc (server)</a></td><td align="right"><a href="../source/packages/shrub-rpc#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/login#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/register">shrub-user/register (server)</a></td><td align="right"><a href="../source/packages/shrub-user/register#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubcoreprebootstrap">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/server">server (server)</a></td><td align="right"><a href="../source/server#invoke-hook-shrubcoreprebootstrap">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubcoreprocessexit">shrubCoreProcessExit</h2>
<p><em>Final cleanups as the process is exiting.</em></p>
<p>Shrub tries its hardest to always invoke this hook, even in the event of a
raised signal or unhandled exception.</p>
<p>You should not schedule asynchronous events, as they will not be dispatched.
See <a href="http://nodejs.org/api/process.html#process_event_exit">the Node.js documentation</a>
for more information.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-repl">shrub-repl (server)</a></td><td align="right"><a href="../source/packages/shrub-repl#implements-hook-shrubcoreprocessexit">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/server">server (server)</a></td><td align="right"><a href="../source/server#invoke-hook-shrubcoreprocessexit">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubformalter">shrubFormAlter</h2>
<p><em>Alter any <a href="../guide/forms/#form-definition-objects">form definition object</a>
before it's rendered.</em></p>
<p>Packages may implement this hook to modify the form definition object in any
way.</p>
<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client">shrub-form (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client#invoke-hook-shrubformalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubformformkeyalter">shrubFormFormKeyAlter</h2>
<p><em>Alter any <a href="../guide/forms/#form-definition-objects">form definition object</a> whose
key matches before it's rendered.</em></p>
<p>This hook targets a specific form key. The form key is automatically
camelized, e.g. form key <code>shrub-user-login</code> will match
<code>shrubFormShrubUserLoginAlter</code>.</p>
<p>Packages may implement this hook to modify the form definition object in any
way (although altering the key would probably be confusing at this point).</p>
<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client">shrub-form (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client#invoke-hook-shrubformformkeyalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubformwidgets">shrubFormWidgets</h2>
<p><em>Define form widgets for use when defining
<a href="../guide/forms/#form-definition-objects">form definition objects</a>.</em></p>
<h3>Implementations must return</h3>

<p>An array of objects structured like:</p>
<ul>
<li>(String) <code>type</code> - The widget type, used in form definition objects.</li>
<li>(String) <code>directive</code> - The directive used to render the widget.</li>
<li>(Optional Function) <code>assignToElement</code> - A function which can be used to apply
  complex widget values to the widget element. The function takes two
  parameters:<ul>
<li>(jqLite/jQuery object) <code>element</code> - The widget's wrapped DOM element.</li>
<li>(Any) <code>value</code> - The value to apply to the widget element.</li>
</ul>
</li>
</ul>
<div class="admonition note"><p class="admonition-title">11 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/checkbox">shrub-form/widget/checkbox (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/checkbox#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/checkboxes">shrub-form/widget/checkboxes (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/checkboxes#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/group">shrub-form/widget/group (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/group#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/hidden">shrub-form/widget/hidden (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/hidden#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/markup">shrub-form/widget/markup (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/markup#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/radio">shrub-form/widget/radio (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/radio#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/radios">shrub-form/widget/radios (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/radios#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/select">shrub-form/widget/select (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/select#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/submit">shrub-form/widget/submit (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/submit#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form/client/widget/text">shrub-form/widget/text (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/text#implements-hook-shrubformwidgets">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-form/client/widget/textarea">shrub-form/widget/textarea (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client/widget/textarea#implements-hook-shrubformwidgets">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-form/client">shrub-form (client)</a></td><td align="right"><a href="../source/packages/shrub-form/client#invoke-hook-shrubformwidgets">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubgruntconfig">shrubGruntConfig</h2>
<p><em>Hook into the Grunt build process.</em></p>
<p>This hook allows packages to define Grunt tasks, configure existing tasks, and
load NPM tasks. This is achieved through the first implementation parameter
which is an instance of the class
<a href="../source/Gruntfile/#gruntconfiguration"><code>GruntConfiguration</code></a>. The
<code>grunt</code> object is passed in through the second parameter in case it's needed.</p>
<p>One of the most common uses of this hook is to copy any asset files your
package may include to the <code>app</code> directory, where they can be served to
clients.</p>
<div class="admonition note"><p class="admonition-title">13 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular">shrub-angular (server)</a></td><td align="right"><a href="../source/packages/shrub-angular#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-assets">shrub-assets (server)</a></td><td align="right"><a href="../source/packages/shrub-assets#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-grunt/dox">shrub-grunt/dox (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/dox#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-grunt">shrub-grunt (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-grunt/lint">shrub-grunt/lint (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/lint#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-grunt/modules">shrub-grunt/modules (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/modules#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-grunt/tests/build">shrub-grunt/tests/build (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/tests/build#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-grunt/tests/run">shrub-grunt/tests/run (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/tests/run#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-html5-local-storage">shrub-html5-local-storage (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-local-storage#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-html5-notification">shrub-html5-notification (server)</a></td><td align="right"><a href="../source/packages/shrub-html5-notification#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-orm">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-skin-strapped">shrub-skin-strapped (server)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped#implements-hook-shrubgruntconfig">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-socket-socket.io">shrub-socket-socket.io (server)</a></td><td align="right"><a href="../source/packages/shrub-socket-socket.io#implements-hook-shrubgruntconfig">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/Gruntfile">Gruntfile (server)</a></td><td align="right"><a href="../source/Gruntfile#invoke-hook-shrubgruntconfig">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubgruntconfigalter">shrubGruntConfigAlter</h2>
<p><em>Alter the Grunt build process.</em></p>
<p>This hook allows packages to alter Grunt configuration specified through
<a href="../hooks/#shrubgruntconfig"><code>shrubGruntConfig</code></a>.</p>
<p>The first implementation parameter is an instance of the class
<a href="../source/Gruntfile/#gruntconfiguration"><code>GruntConfiguration</code></a>. The <code>grunt</code>
object is passed in through the second parameter in case it's needed.</p>
<div class="admonition note"><p class="admonition-title">2 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-grunt">shrub-grunt (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt#implements-hook-shrubgruntconfigalter">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-grunt/tests/build">shrub-grunt/tests/build (server)</a></td><td align="right"><a href="../source/packages/shrub-grunt/tests/build#implements-hook-shrubgruntconfigalter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/Gruntfile">Gruntfile (server)</a></td><td align="right"><a href="../source/Gruntfile#invoke-hook-shrubgruntconfigalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubhttpmiddleware">shrubHttpMiddleware</h2>
<p><em>Define middleware to run for every HTTP request.</em></p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>
from the HTTP request.</p>
<p>The <code>res</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_class_http_serverresponse">http.ServerResponse</a>
from the HTTP request.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, res, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">13 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox">shrub-angular-sandbox (server)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-config">shrub-config (server)</a></td><td align="right"><a href="../source/packages/shrub-config#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-form">shrub-form (server)</a></td><td align="right"><a href="../source/packages/shrub-form#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-http-express/errors">shrub-http-express/errors (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/errors#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http-express/logger">shrub-http-express/logger (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/logger#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-http-express/routes">shrub-http-express/routes (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/routes#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http-express/session">shrub-http-express/session (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/session#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-http-express/static">shrub-http-express/static (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/static#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http">shrub-http (server)</a></td><td align="right"><a href="../source/packages/shrub-http#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-skin">shrub-skin (server)</a></td><td align="right"><a href="../source/packages/shrub-skin#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubhttpmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-http/manager">shrub-http/manager (server)</a></td><td align="right"><a href="../source/packages/shrub-http/manager#invoke-hook-shrubhttpmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubhttproutes">shrubHttpRoutes</h2>
<p><em>Define HTTP routes.</em></p>
<p>Packages use this hook to define HTTP routes.</p>
<h3>Implementations must return</h3>

<p>An array of objects structured like:</p>
<ul>
<li>(String) <code>path</code> - The HTTP path of the route. Include the leading slash.</li>
<li>(String) <code>verb</code> - The HTTP verb to associate with this route. Defaults to
  <code>'get'</code>.</li>
<li>(Function) <code>receiver</code> - The function invoked when the route is hit. Takes
  three parameters:<ul>
<li>(http.IncomingMessage) <code>req</code> - The request object.</li>
<li>(http.ServerResponse) <code>res</code> - The response object.</li>
<li>(Function) <code>fn</code> - A nodeback called when the route is complete.</li>
</ul>
</li>
</ul>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-example/about">shrub-example/about (server)</a></td><td align="right"><a href="../source/packages/shrub-example/about#implements-hook-shrubhttproutes">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-http/manager">shrub-http/manager (server)</a></td><td align="right"><a href="../source/packages/shrub-http/manager#invoke-hook-shrubhttproutes">invocation</a></td></tr>  </table>
</div>

<h2 id="shrublimitercheck">shrubLimiterCheck</h2>
<p><em>Specifiy criteria which will skip limiter checks.</em></p>
<p>You may bypass limit checks by returning <code>SKIP</code> (<code>shrub-limiter</code> package) from
implementations of this hook, e.g.</p>
<pre><code class="javascript">
registrar.registerHook('shrubLimiterCheck', function(req) {

  if (req.somethingWeWantToCheck) {
    return require('shrub-limiter').SKIP;
  }
})

</code></pre>

<p>Returning any other value besides <code>SKIP</code> will have no effect.</p>
<h3>Implementation arguments</h3>

<ul>
<li>(http.IncomingMessage) <code>req</code>: The route request object.</li>
</ul>
<h3>Implementations must return</h3>

<p><code>SKIP</code> to skip the limiter check, or anything else otherwise.</p>
<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-limiter">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter#invoke-hook-shrublimitercheck">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubnodemailerhtml">shrubNodemailerHtml</h2>
<p><em>Compose outgoing email.</em></p>
<p>This hook is implemented by skins. Only the active skin's implementation is
called for any email.</p>
<p>Implementations accept the following parameters:</p>
<ul>
<li>(cheerio element) <code>$body</code> - The body tag of the rendered app HTML, wrapped
  with <a href="https://github.com/cheeriojs/cheerio">cheerio</a>, a lightweight
  server-side implementation of a lot of jQuery's functionality.</li>
<li>(String) <code>html</code> - The mail HTML, generated from the directive.</li>
<li>(cheerio) <code>$</code> - The cheerio instance.</li>
</ul>
<p>It is the skin's responsibility to inject the email HTML from the second
parameter to where it belongs in the app HTML. The skin should also remove any
trace of dynamic JavaScript-driven functionality as that will surely break
in email where such things are not allowed.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin-strapped">shrub-skin-strapped (server)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped#implements-hook-shrubnodemailerhtml">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-nodemailer">shrub-nodemailer (server)</a></td><td align="right"><a href="../source/packages/shrub-nodemailer#invoke-hook-shrubnodemailerhtml">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubormcollections">shrubOrmCollections</h2>
<p><em>Define collections of models.</em></p>
<p>Packages can implement this hook to define collections of models for use
throughout the server (and to a limited extent, the client) application.</p>
<p>Shrub uses Waterline as an ORM, so you can follow the
<a href="https://github.com/balderdashy/waterline-docs/blob/master/models.md">Waterline documentation for how to define model collections</a>.
Shrub handles calling <code>Waterline.Collection.extend</code>, so you only have to return
the raw object.</p>
<h3>Implementations must return</h3>

<p>A keyed object whose values are raw model collection objects. e.g.</p>
<pre><code class="javascript">exports.pkgmanRegister = function(registrar) {

  registrar.registerHook('shrubOrmCollections', function() {

    return {
      'some-model': {
        attributes: {
          foo: 'string'
        }
      },
      'some-other-model': {
        attributes: {
          bar: 'string'
        }
      }
    };
  });
};
</code></pre>

<div class="admonition note"><p class="admonition-title">6 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/client">shrub-user (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubormcollections">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubormcollections">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-limiter">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter#implements-hook-shrubormcollections">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-session">shrub-session (server)</a></td><td align="right"><a href="../source/packages/shrub-session#implements-hook-shrubormcollections">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#implements-hook-shrubormcollections">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubormcollections">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">2 invocations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-orm/client">shrub-orm (client)</a></td><td align="right"><a href="../source/packages/shrub-orm/client#invoke-hook-shrubormcollections">invocation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm/client">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm/client#invoke-hook-shrubormcollections">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubormcollectionsalter">shrubOrmCollectionsAlter</h2>
<p><em>Alter collections defined by packages.</em></p>
<p>Packages can implement this hook to alter collections defined by any other (or
even the same) package.</p>
<p>Implementations are passed a keyed object containing all of the collections
defined by all modules.</p>
<p>See: <a href="../hooks/#shrubormcollections"><code>shrubOrmcollections</code></a>.</p>
<div class="admonition note"><p class="admonition-title">2 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/client">shrub-user (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubormcollectionsalter">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user/client#implements-hook-shrubormcollectionsalter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">2 invocations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-orm/client">shrub-orm (client)</a></td><td align="right"><a href="../source/packages/shrub-orm/client#invoke-hook-shrubormcollectionsalter">invocation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-orm/client">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm/client#invoke-hook-shrubormcollectionsalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubreplcontext">shrubReplContext</h2>
<p><em>Add to the REPL context.</em></p>
<p>Packages may use this hook to provide access to parts of their state to the
REPL context.</p>
<p>Implementations accept the following arguments:</p>
<ul>
<li>(Object) <code>context</code> - The context object.</li>
</ul>
<p>To set context variables, simply set them on the context object.</p>
<div class="admonition note"><p class="admonition-title">5 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-install">shrub-install (server)</a></td><td align="right"><a href="../source/packages/shrub-install#implements-hook-shrubreplcontext">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-nodemailer">shrub-nodemailer (server)</a></td><td align="right"><a href="../source/packages/shrub-nodemailer#implements-hook-shrubreplcontext">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-orm">shrub-orm (server)</a></td><td align="right"><a href="../source/packages/shrub-orm#implements-hook-shrubreplcontext">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-socket">shrub-socket (server)</a></td><td align="right"><a href="../source/packages/shrub-socket#implements-hook-shrubreplcontext">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/register">shrub-user/register (server)</a></td><td align="right"><a href="../source/packages/shrub-user/register#implements-hook-shrubreplcontext">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-repl">shrub-repl (server)</a></td><td align="right"><a href="../source/packages/shrub-repl#invoke-hook-shrubreplcontext">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubrpccall">shrubRpcCall</h2>
<p><em>Notify packages when any RPC call is made.</em></p>
<p>Packages can implement this hook to be notified when any RPC call is made.
For instance, <a href="../packages/#shrub-uimessagesclient"><code>shrub-ui/messages</code></a> uses
this hook to display an error message if any RPC call returned with an error.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>. The following
locals are injected:</p>
<ul>
<li>(String) <code>route</code> - The RPC route path.</li>
<li>(Any) <code>data</code> - The data sent to the server.</li>
<li>(Promise) <code>result</code> - The result promise.</li>
</ul>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-ui/client/messages">shrub-ui/messages (client)</a></td><td align="right"><a href="../source/packages/shrub-ui/client/messages#implements-hook-shrubrpccall">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-rpc/client">shrub-rpc (client)</a></td><td align="right"><a href="../source/packages/shrub-rpc/client#invoke-hook-shrubrpccall">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubrpcroutes">shrubRpcRoutes</h2>
<p><em>Define RPC routes.</em></p>
<p>Packages use this hook to define RPC routes.</p>
<h3>Implementations must return</h3>

<p>An array of objects structured like:</p>
<ul>
<li>(String) <code>path</code> - The HTTP path of the route. Include the leading slash.</li>
<li>(Function Array) <code>middleware</code> - A middleware stack which is dispatched when
  the route is hit. The middleware have the following signature:</li>
</ul>
<pre><code class="javascript">function(req, res, next) {
  ...
}
</code></pre>

<p><code>req</code> has the following properties set by default:</p>
<ul>
<li>(Any) <code>body</code>: The data passed in from the RPC call.</li>
<li>(Object) <code>route</code>: the route definition object specified above.</li>
<li>(Socket) <code>socket</code>: The raw socket object.</li>
</ul>
<p><code>res</code> has the following properties set by default:</p>
<ul>
<li>(Function) <code>end</code>: Called with the data to respond to the RPC call.</li>
</ul>
<div class="admonition note"><p class="admonition-title">7 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-angular-sandbox">shrub-angular-sandbox (server)</a></td><td align="right"><a href="../source/packages/shrub-angular-sandbox#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/forgot">shrub-user/forgot (server)</a></td><td align="right"><a href="../source/packages/shrub-user/forgot#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/login#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/logout">shrub-user/logout (server)</a></td><td align="right"><a href="../source/packages/shrub-user/logout#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/register">shrub-user/register (server)</a></td><td align="right"><a href="../source/packages/shrub-user/register#implements-hook-shrubrpcroutes">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/reset">shrub-user/reset (server)</a></td><td align="right"><a href="../source/packages/shrub-user/reset#implements-hook-shrubrpcroutes">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-rpc">shrub-rpc (server)</a></td><td align="right"><a href="../source/packages/shrub-rpc#invoke-hook-shrubrpcroutes">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubrpcroutesalter">shrubRpcRoutesAlter</h2>
<p><em>Alter RPC routes defined by packages.</em></p>
<p>Packages can implement this hook to alter RPC routes defined by any other (or
even the same) package.</p>
<p>See: <a href="../hooks/#shrubrpcroutes"><code>shrubRpcRoutes</code></a>.</p>
<div class="admonition note"><p class="admonition-title">7 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-example">shrub-example (server)</a></td><td align="right"><a href="../source/packages/shrub-example#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-http-express">shrub-http-express (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http-express/session">shrub-http-express/session (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/session#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-limiter">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubrpcroutesalter">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-rpc">shrub-rpc (server)</a></td><td align="right"><a href="../source/packages/shrub-rpc#invoke-hook-shrubrpcroutesalter">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubskinassets">shrubSkinAssets</h2>
<p><em>Allow skins to define extra assets that they include on the page.</em></p>
<p>By default, a skin includes an <code>app</code> directory containing assets which are
copied to the application's <code>app</code> directory. These assets are automatically
included on each page depending on the execution environment. By default,
production includes all stylesheets matching <code>*.min.css</code> and scripts matching
<code>*.min.js</code>. All other environments include stylesheets matching the pattern
<code>*.css</code> (excluding <code>*.min.css</code>) and scripts matching <code>*.js</code> (excluding
<code>*.min.js</code>).</p>
<p>This is not always enough, since your skin may do its own building, e.g.
compiling LESS/Sass to CSS, and those resources need to be added to the page
as well. This hook lets you do so.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin-strapped">shrub-skin-strapped (server)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped#implements-hook-shrubskinassets">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin">shrub-skin (server)</a></td><td align="right"><a href="../source/packages/shrub-skin#invoke-hook-shrubskinassets">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubskinlink">shrubSkinLink</h2>
<p><em>Register a link function to run on all directives.</em></p>
<p>This hook allows packages to run additional link functions for directives. The
link functions are run every time skin or attribute changes result in directive
recompilation.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>. The following
locals are injected:</p>
<ul>
<li>(Scope) <code>$scope</code> - Angular scope object for this directive.</li>
<li>(jqLite element) <code>$element</code>: Directive DOM element.</li>
<li>(Attributes) <code>$attr</code>: Directive attributes object.</li>
<li>(Function or Function Array or null) <code>$controller</code>: Directive controller(s), if
  any.</li>
<li>(Function or null) <code>$transclude</code>: Transclusion function, if any.</li>
</ul>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin-strapped/client/form">shrub-skin-strapped/form (client)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped/client/form#implements-hook-shrubskinlink">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin/client">shrub-skin (client)</a></td><td align="right"><a href="../source/packages/shrub-skin/client#invoke-hook-shrubskinlink">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubskinlink-directive">shrubSkinLink--DIRECTIVE</h2>
<p><em>Register a link function to run on directives matching directive name.</em></p>
<p>This hook allows packages to run additional link functions for directives. The
link functions are run every time skin or attribute changes result in directive
recompilation.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>. The following
locals are injected:</p>
<ul>
<li>(Scope) <code>$scope</code> - Angular scope object for this directive.</li>
<li>(jqLite element) <code>$element</code>: Directive DOM element.</li>
<li>(Attributes) <code>$attr</code>: Directive attributes object.</li>
<li>(Function or Function Array or null) <code>$controller</code>: Directive controller(s), if
  any.</li>
<li>(Function or null) <code>$transclude</code>: Transclusion function, if any.</li>
</ul>
<div class="admonition note"><p class="admonition-title">3 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-example/client">shrub-example (client)</a></td><td align="right"><a href="../source/packages/shrub-example/client#implements-hook-shrubskinlink-directive">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-skin-strapped/client/form">shrub-skin-strapped/form (client)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped/client/form#implements-hook-shrubskinlink-directive">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-skin-strapped/client/notifications">shrub-skin-strapped/notifications (client)</a></td><td align="right"><a href="../source/packages/shrub-skin-strapped/client/notifications#implements-hook-shrubskinlink-directive">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin/client">shrub-skin (client)</a></td><td align="right"><a href="../source/packages/shrub-skin/client#invoke-hook-shrubskinlink-directive">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubskinlink-directive-id">shrubSkinLink--DIRECTIVE--ID</h2>
<p><em>Register a link function to run on directives matching directive name and ID.</em></p>
<p>This hook allows packages to run additional link functions for directives. The
link functions are run every time skin or attribute changes result in directive
recompilation.</p>
<h3>Implementations must return</h3>

<p>An <a href="../guide/concepts#annotated-functions">annotated function</a>. The following
locals are injected:</p>
<ul>
<li>(Scope) <code>$scope</code> - Angular scope object for this directive.</li>
<li>(jqLite element) <code>$element</code>: Directive DOM element.</li>
<li>(Attributes) <code>$attr</code>: Directive attributes object.</li>
<li>(Function or Function Array or null) <code>$controller</code>: Directive controller(s), if
  any.</li>
<li>(Function or null) <code>$transclude</code>: Transclusion function, if any.</li>
</ul>
<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-skin/client">shrub-skin (client)</a></td><td align="right"><a href="../source/packages/shrub-skin/client#invoke-hook-shrubskinlink-directive-id">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubsocketconnectionmiddleware">shrubSocketConnectionMiddleware</h2>
<p><em>Act after a socket connection.</em></p>
<p>Packages may implement this hook to take action after a socket is connected.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>
from the HTTP request.</p>
<p>The <code>res</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_class_http_serverresponse">http.ServerResponse</a>
from the HTTP request.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, res, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">6 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-core">shrub-core (server)</a></td><td align="right"><a href="../source/packages/shrub-core#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-http-express/session">shrub-http-express/session (server)</a></td><td align="right"><a href="../source/packages/shrub-http-express/session#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-rpc">shrub-rpc (server)</a></td><td align="right"><a href="../source/packages/shrub-rpc#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-session">shrub-session (server)</a></td><td align="right"><a href="../source/packages/shrub-session#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubsocketconnectionmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-socket/manager">shrub-socket/manager (server)</a></td><td align="right"><a href="../source/packages/shrub-socket/manager#invoke-hook-shrubsocketconnectionmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubsocketdisconnectionmiddleware">shrubSocketDisconnectionMiddleware</h2>
<p><em>Act after a socket disconnect.</em></p>
<p>Packages may implement this hook to take action after a socket is disconnected.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>
from the HTTP request.</p>
<p>The <code>res</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_class_http_serverresponse">http.ServerResponse</a>
from the HTTP request.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, res, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-socket/manager">shrub-socket/manager (server)</a></td><td align="right"><a href="../source/packages/shrub-socket/manager#invoke-hook-shrubsocketdisconnectionmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubtransmittableerrors">shrubTransmittableErrors</h2>
<p><em>Define errors that can be transmitted to the client.</em></p>
<p>See <a href="../guide/errors/">the documentation on errors</a> for more information.</p>
<h3>Implementations must return</h3>

<p>An array of subclasses of
<a href="../source/client/modules/errors/#transmittableerror">TransmittableError</a>.</p>
<div class="admonition note"><p class="admonition-title">4 implementations</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-limiter/client">shrub-limiter (client)</a></td><td align="right"><a href="../source/packages/shrub-limiter/client#implements-hook-shrubtransmittableerrors">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-limiter/client">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter/client#implements-hook-shrubtransmittableerrors">implementation</a></td></tr>    <tr class="even"><td><a href="../source/packages/shrub-user/client/login">shrub-user/login (client)</a></td><td align="right"><a href="../source/packages/shrub-user/client/login#implements-hook-shrubtransmittableerrors">implementation</a></td></tr>    <tr class="odd"><td><a href="../source/packages/shrub-user/client/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/client/login#implements-hook-shrubtransmittableerrors">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/client/modules/errors">modules/errors (client)</a></td><td align="right"><a href="../source/client/modules/errors#invoke-hook-shrubtransmittableerrors">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubuinotificationqueues">shrubUiNotificationQueues</h2>
<p><em>Define persistent notification queues.</em></p>
<p>Packages may implement this hook to define queues of notifications.</p>
<h3>Implementations must return</h3>

<p>An object whose keys are queue names and whose values are structured like:</p>
<ul>
<li>(Function) <code>channelFromRequest</code> - An idempotent function which returns the
  channel of the queue. The channel is represented as a string value.
  Typically the channel maps to the concept of ownership -- a queue which
  stores some notifications for a user will likely belong to a channel
  which is identical to the user ID. This function takes the following
  parameters:<ul>
<li>(http.IncomingMessage) <code>req</code> - The request object.</li>
</ul>
</li>
</ul>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-example">shrub-example (server)</a></td><td align="right"><a href="../source/packages/shrub-example#implements-hook-shrubuinotificationqueues">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-ui/notifications">shrub-ui/notifications (server)</a></td><td align="right"><a href="../source/packages/shrub-ui/notifications#invoke-hook-shrubuinotificationqueues">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubuserafterloginmiddleware">shrubUserAfterLoginMiddleware</h2>
<p><em>Take action after a user logs in.</em></p>
<p>This hook allows packages to act after a user is logged in.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>.</p>
<p><code>req.user</code> will be populated with the newly logged in user at this point.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/login#invoke-hook-shrubuserafterloginmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubuserafterlogoutmiddleware">shrubUserAfterLogoutMiddleware</h2>
<p><em>Take action after a user logs out.</em></p>
<p>This hook allows packages to act after a user is logged out.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>.</p>
<p><code>req.user</code> will <strong>not</strong> be populated with the previously logged in user at this
point.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubuserafterlogoutmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/logout">shrub-user/logout (server)</a></td><td align="right"><a href="../source/packages/shrub-user/logout#invoke-hook-shrubuserafterlogoutmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubuserbeforeloginmiddleware">shrubUserBeforeLoginMiddleware</h2>
<p><em>Take action before a user logs in.</em></p>
<p>This hook allows packages to act before a user is logged in. If an error is
thrown or passed to the middleware <code>next</code> function, the login fails.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/login">shrub-user/login (server)</a></td><td align="right"><a href="../source/packages/shrub-user/login#invoke-hook-shrubuserbeforeloginmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubuserbeforelogoutmiddleware">shrubUserBeforeLogoutMiddleware</h2>
<p><em>Take action before a user logs out.</em></p>
<p>This hook allows packages to act before a user is logged out. If an error is
thrown or passed to the middleware <code>next</code> function, the logout fails.</p>
<p>The <code>req</code> parameter to the middleware is an instance of
<a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>.</p>
<h3>Implementations must return</h3>

<p>A
<a href="../guide/concepts#middleware-hook-specification">middleware hook specification</a>.
The middleware have the following signature:</p>
<pre><code class="javascript">function(req, next) {
  ...
}
</code></pre>

<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user">shrub-user (server)</a></td><td align="right"><a href="../source/packages/shrub-user#implements-hook-shrubuserbeforelogoutmiddleware">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-user/logout">shrub-user/logout (server)</a></td><td align="right"><a href="../source/packages/shrub-user/logout#invoke-hook-shrubuserbeforelogoutmiddleware">invocation</a></td></tr>  </table>
</div>

<h2 id="shrubvillianyreport">shrubVillianyReport</h2>
<p><em>Act on reported villianous actions.</em></p>
<p>Packages can invoke this hook to notify other packages that villianous behavior
has occurred. This is an abstract concept that is application-specific: one
application in core shrub is exceeding RPC call limits, however you could use
the system for things like user flagging, abusive behavior, etc.</p>
<h3>Implementation arguments</h3>

<ul>
<li>(http.IncomingMessage) <code>req</code>: The route request object.</li>
<li>(Number) <code>score</code>: The numeric score this action contributes towards a ban.</li>
<li>(String) <code>key</code>: A unique key for this villianous action.</li>
<li>(String Array) <code>excludedKeys</code>: Fingerprint keys to exclude from ban.</li>
</ul>
<h3>Implementations must return</h3>

<p>A boolean or a promise that resolves to boolean indicating whether or not the
villianous action results in a ban.</p>
<div class="admonition note"><p class="admonition-title">1 implementation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-villiany">shrub-villiany (server)</a></td><td align="right"><a href="../source/packages/shrub-villiany#implements-hook-shrubvillianyreport">implementation</a></td></tr>  </table>
</div>

<div class="admonition note"><p class="admonition-title">1 invocation</p>
  <table>
    <tr class="even"><td><a href="../source/packages/shrub-limiter">shrub-limiter (server)</a></td><td align="right"><a href="../source/packages/shrub-limiter#invoke-hook-shrubvillianyreport">invocation</a></td></tr>  </table>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../packages/" class="btn btn-neutral float-right" title="Packages"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../examples/todo-list/" class="btn btn-neutral" title="TODO list app"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../examples/todo-list/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../packages/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
