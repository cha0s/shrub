<!DOCTYPE html><html lang="en"><head><title>client/modules/packages/example/about</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="client/modules/packages/example/about"><meta name="groc-project-path" content="client/modules/packages/example/about.coffee"><meta name="groc-github-url" content="https://github.com/cha0s/shrub"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/cha0s/shrub/blob/master/client/modules/packages/example/about.coffee">client/modules/packages/example/about.coffee</a></div></div><div id="document"><div class="segment"></div><div class="segment"><div class="comments"><div class="wrapper"><h1 id="about-page">About page</h1></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="implementshookroute">Implements hook <code>route</code></h2></div></div><div class="code"><div class="wrapper"><span class="nx">exports</span><span class="p">.</span><span class="nv">$route = </span><span class="o">-&gt;</span>

  <span class="nv">path: </span><span class="s1">&#39;about&#39;</span>
  <span class="nv">title: </span><span class="s1">&#39;About&#39;</span>
  
  <span class="nv">controller: </span><span class="p">[</span>
    <span class="s1">&#39;$scope&#39;</span>
    <span class="nf">($scope) -&gt;</span>
      
      <span class="nv">$scope.about = </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Shrub</span>
<span class="s2">=====</span>

<span class="s2">Shrub is a JavaScript (or CoffeeScript if you prefer) application</span>
<span class="s2">framework. [AngularJS](http://angularjs.org/) is used on the client-side, as</span>
<span class="s2">well as [Socket.IO](http://socket.io/), enabling real-time communication right</span>
<span class="s2">out of the box. The server is an [Express](http://expressjs.com)</span>
<span class="s2">[Node.js](http://nodejs.org/) server using</span>
<span class="s2">[JugglingDB](https://github.com/1602/jugglingdb) for storage.</span>

<span class="s2">Shrub handles generation (using [Grunt](http://gruntjs.com/)) of all Angular</span>
<span class="s2">boilerplate, to allow you to structure your application in a very clean and</span>
<span class="s2">consistent way.</span>

<span class="s2">Shrub is organized into packages which implement hooks. Angular services,</span>
<span class="s2">directives, filters, etc. are specified through package hooks, allowing you to</span>
<span class="s2">achieve the ultimate in clean, elegant structure. No more</span>
<span class="s2">(controllers|directives|filters|services).js blobs.</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Documentation</p>

<p>You may view the continuously evolving autogenerated documentation at
<a href="http://cha0s.github.io/shrub">http://cha0s.github.io/shrub</a>.</p>

<p>If you'd like to build the project documentation, run <code>$ npm run-script doc</code>.</p></div></div><div class="code"><div class="wrapper"><span class="s2"> Awesome example of a package</span>

<span class="s2">JS applications catch flak because they are not impliticly SEO-friendly,</span>
<span class="s2">as well as requiring JS execution, which [some people prefer not to</span>
<span class="s2">allow for untrusted websites](http://www.wired.com/threatlevel/2013/09/freedom-hosting-fbi/).</span>

<span class="s2">Shrub implements the</span>
<span class="s2">[`angular`](http://cha0s.github.io/shrub/server/packages/angular/index.html)</span>
<span class="s2">server package, which implements </span>
<span class="s2">hook</span>
<span class="s2">[`httpMiddleware`](http://cha0s.github.io/shrub/hooks.html#httpmiddleware).</span>
<span class="s2">Since both sides of the stack have fully featured JS</span>
<span class="s2">([well, except for certain older browsers...](http://www.youtube.com/watch?v=lD9FAOPBiDk))</span>
<span class="s2">, when a client requests a page from Shrub, it spins up a</span>
<span class="s2">[sandbox](http://cha0s.github.io/shrub/server/sandboxes.html) for the request,</span>
<span class="s2">and renders the entire page -- JS and all. It then serves the fully-built page</span>
<span class="s2">to the client.</span>

<span class="s2">If the client has JS enabled, the client-side Angular application takes over</span>
<span class="s2">from here, loading new pages instantly and generally benefitting from all the</span>
<span class="s2">lovely things that client-side applications offer. The package also implements</span>
<span class="s2">hook</span>
<span class="s2">[`endpoint`](http://cha0s.github.io/shrub/hooks.html#endpoint), which allows a</span>
<span class="s2">JSful client to let the server know it can release the sandbox.</span>

<span class="s2">However, if the client does not have JS enabled, a new page will hit the server</span>
<span class="s2">again, and the package, crafty as it is, will reuse the sandbox created for</span>
<span class="s2">that session, navigate the sandboxed Angular to the new page, render it, and</span>
<span class="s2">serve it to the client again. Amazing! </span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Get rolling</p>

<ul>
<li><p>Get yourself a clone: <code>$ git clone git://github.com/cha0s/shrub.git</code></p></li>
<li><p>Get in the new directory and then the usual <code>npm install</code></p></li>
<li><p>If you'd like to run the tests, first spin up the server using
<code>$ E2E=true npm start</code>, to start the server in end-to-end testing mode. Then
run <code>$ ./scripts/good-to-go</code>. This script will return 0 if the project builds,
and the tests run successfully. In other words, you could theoretically wire
it up in a pre-commit hook.</p></li>
<li><p>Spin up the server in debug mode: <code>$ npm start</code> and navigate to
http://localhost:4201 (if you didn't run the tests above, you must first run
<code>$ grunt</code> before navigating to the site in your browser).</p></li>
<li><p>Enjoy!</p></li>
</ul></div></div><div class="code"><div class="wrapper"><span class="s2"> TODO</span>

<span class="s2">There is always more to do! </span>

<span class="s2">* Better abstraction of assets, in other words, a theme/skin system</span>

<span class="s2">* CSRF mitigation</span>

<span class="s2">* Client-side config should be handled better</span>
<span class="s2">&quot;&quot;&quot;</span>
  
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">$emit</span> <span class="s1">&#39;shrubFinishedRendering&#39;</span>
  <span class="p">]</span>
  
  <span class="nv">template: </span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">&lt;span</span>
<span class="s2">  class=&quot;</span><span class="nx">about</span><span class="s2">&quot;</span>
<span class="s2">  data-ng-bind-html=&quot;</span><span class="nx">about</span> <span class="o">|</span> <span class="nx">uiMarkdown</span><span class="o">:</span><span class="kc">false</span><span class="s2">&quot;</span>
<span class="s2">&gt;&lt;/span&gt;</span>

<span class="s2">&quot;&quot;&quot;</span></div></div></div></div></body></html>