<!DOCTYPE html><html lang="en"><head><title>client/modules/packages/example/about</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="client/modules/packages/example/about"><meta name="groc-project-path" content="client/modules/packages/example/about.coffee"><meta name="groc-github-url" content="https://github.com/cha0s/shrub"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/cha0s/shrub/blob/master/client/modules/packages/example/about.coffee">client/modules/packages/example/about.coffee</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="nx">exports</span><span class="p">.</span><span class="nv">$route = </span><span class="o">-&gt;</span>

  <span class="nv">path: </span><span class="s1">&#39;about&#39;</span>
  <span class="nv">title: </span><span class="s1">&#39;About&#39;</span>
  
  <span class="nv">controller: </span><span class="p">[</span>
    <span class="s1">&#39;$scope&#39;</span>
    <span class="nf">($scope) -&gt;</span>
      
      <span class="nv">$scope.about = </span><span class="s2">&quot;&quot;</span><span class="err">&quot;</span>
<span class="nx">Shrub</span>
<span class="o">=====</span>

<span class="nx">Shrub</span> <span class="o">is</span> <span class="nx">a</span> <span class="nx">JavaScript</span> <span class="p">(</span><span class="o">or</span> <span class="nx">CoffeeScript</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">prefer</span><span class="p">)</span> <span class="nx">application</span>
<span class="nx">framework</span><span class="p">.</span> <span class="p">[</span><span class="nx">AngularJS</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="err">//angularjs.org/) is used on the client-side, as</span>
<span class="nx">well</span> <span class="nx">as</span> <span class="p">[</span><span class="nx">Socket</span><span class="p">.</span><span class="nx">IO</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="err">//socket.io/), enabling real-time communication right</span>
<span class="nx">out</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">box</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">server</span> <span class="o">is</span> <span class="nx">a</span> <span class="p">[</span><span class="nx">Node</span><span class="p">.</span><span class="nx">js</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="err">//nodejs.org/) server using</span>
<span class="p">[</span><span class="nx">Redis</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="err">//redis.io/) for persistence and scalability.</span>

<span class="nx">Shrub</span> <span class="nx">handles</span> <span class="nx">generation</span> <span class="p">(</span><span class="nx">using</span> <span class="p">[</span><span class="nx">Grunt</span><span class="p">](</span><span class="nx">http</span><span class="o">:</span><span class="err">//gruntjs.com/)) of the vast</span>
<span class="nx">majority</span> <span class="k">of</span> <span class="nx">Angular</span> <span class="nx">boilerplate</span><span class="p">,</span> <span class="nx">to</span> <span class="nx">allow</span> <span class="nx">you</span> <span class="nx">to</span> <span class="nx">structure</span> <span class="nx">your</span> <span class="nx">application</span> <span class="k">in</span>
<span class="nx">a</span> <span class="nx">very</span> <span class="nx">clean</span> <span class="o">and</span> <span class="nx">consistent</span> <span class="nx">way</span><span class="p">.</span>

<span class="nx">Also</span> <span class="nx">provided</span> <span class="o">is</span> <span class="nx">an</span> <span class="nx">Angular</span> <span class="nx">service</span> <span class="nx">providing</span> <span class="nx">a</span> <span class="nx">NodeJS</span><span class="o">-</span><span class="nx">style</span> <span class="nx">module</span> <span class="nx">framework</span>
<span class="nx">to</span> <span class="nx">allow</span> <span class="nx">your</span> <span class="nx">application</span> <span class="nx">to</span> <span class="nx">bridge</span> <span class="nx">the</span> <span class="nx">gap</span> <span class="nx">between</span> <span class="nx">Angular</span> <span class="o">and</span> <span class="nx">the</span> <span class="nx">vast</span>
<span class="nx">ecosystem</span> <span class="k">of</span> <span class="nx">publically</span> <span class="nx">available</span> <span class="nx">NodeJS</span><span class="o">-</span><span class="nx">style</span> <span class="nx">modules</span><span class="p">.</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>The Twist</p>

<p>JS applications catch flak because they are not impliticly SEO-friendly,
as well as requiring JS execution, which <a href="http://www.wired.com/threatlevel/2013/09/freedom-hosting-fbi/">some people prefer not to
allow for untrusted websites</a>.</p>

<p>Shrub does an interesting thing which is possible because both sides of the
stack have fully featured JS (<a href="http://www.youtube.com/watch?v=lD9FAOPBiDk">well, except for certain older browsers...</a>).
When a client requests a page from Shrub, it spins up a DOM for the request,
and renders the entire page, JS and all. Shrub then serves the fully-built page
to the client.</p>

<p>If the client has JS enabled, the client-side Angular application takes over
from here, loading new pages (nearly) instantly and generally benefitting from
all the lovely things that client-side applications offer.</p>

<p>However, if the client does not have JS enabled, a new page will hit the server
again, and Shrub, crafty as it is, will reuse the DOM created for that session,
navigate Angular to the new page, render it, and serve it to the client. Nice! </p></div></div><div class="code"><div class="wrapper"> <span class="nx">Get</span> <span class="nx">rolling</span>

<span class="o">*</span> <span class="nx">Get</span> <span class="nx">yourself</span> <span class="nx">a</span> <span class="nv">clone: </span><span class="o">`</span><span class="nx">$</span> <span class="nx">git</span> <span class="nx">clone</span> <span class="nx">git</span><span class="o">:</span><span class="err">//github.com/cha0s/shrub.git`</span>

<span class="o">*</span> <span class="nx">Get</span> <span class="k">in</span> <span class="nx">the</span> <span class="k">new</span> <span class="nx">directory</span> <span class="o">and</span> <span class="k">then</span> <span class="nx">the</span> <span class="nx">usual</span> <span class="o">`</span><span class="nx">npm</span> <span class="nx">install</span><span class="o">`</span><span class="p">,</span> <span class="nx">followed</span> <span class="k">by</span>
<span class="o">`</span><span class="nx">$</span> <span class="nx">scripts</span><span class="err">/good-to-go`. This script will return 0 if the project builds, and</span>
<span class="nx">the</span> <span class="nx">tests</span> <span class="nx">run</span> <span class="nx">successfully</span><span class="p">.</span> <span class="nx">In</span> <span class="nx">other</span> <span class="nx">words</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">can</span> <span class="nx">easily</span> <span class="nx">wire</span> <span class="nx">it</span> <span class="nx">up</span> <span class="k">in</span> <span class="nx">a</span>
<span class="nx">pre</span><span class="o">-</span><span class="nx">commit</span> <span class="nx">hook</span><span class="p">.</span>

<span class="o">*</span> <span class="nx">Spin</span> <span class="nx">up</span> <span class="nx">the</span> <span class="nv">server: </span><span class="o">`</span><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">start</span><span class="o">`</span> <span class="o">and</span> <span class="nx">navigate</span> <span class="nx">to</span> <span class="nx">http</span><span class="o">:</span><span class="err">//localhost:4201 (make</span>
<span class="nx">sure</span> <span class="nx">you</span><span class="err">&#39;</span><span class="nx">ve</span> <span class="nx">run</span> <span class="nx">grunt</span> <span class="nx">at</span> <span class="nx">least</span> <span class="nx">once</span><span class="o">!</span><span class="p">)</span>

<span class="o">*</span> <span class="nx">Check</span> <span class="nx">out</span> <span class="nx">how</span> <span class="nx">Shrub</span> <span class="nx">has</span> <span class="nx">generated</span> <span class="nx">a</span> <span class="nx">lot</span> <span class="k">of</span> <span class="nx">Angular</span> <span class="nx">boilerplate</span> <span class="k">for</span>
<span class="nx">you</span><span class="p">.</span> <span class="nx">Particularly</span> <span class="nx">app</span><span class="sr">/js/</span><span class="p">{</span><span class="nx">controllers</span><span class="p">,</span><span class="nx">directives</span><span class="p">,</span><span class="nx">filters</span><span class="p">,</span><span class="nx">services</span><span class="p">}.</span><span class="nx">js</span> <span class="nx">will</span>
<span class="nx">be</span> <span class="k">of</span> <span class="nx">interest</span><span class="p">.</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>TODO</p>

<p>There is much to do, and this project is currently essentially a
proof-of-concept of some of the ideas outlined here. My plans for this
framework include:</p>

<ul>
<li>Integration of a database abstraction layer</li>
<li>A resource layer (using the aforementioned db layer) for serving Angular $resource requests</li>
<li>Socket/Session stores based on aforementioned db layer</li>
<li>Better handling of server-side DOM in the absence of a session/cookie</li>
<li>Research into whether server-side rendering can be synchronized in a DRY fashion (currently the rendering is given 50 ms to complete, not ideal)</li>
<li>Better abstraction of assets, instead of (for instance) hardcoding bootstrap/LESS</li>
<li>Using standardized solutions to UI and Bootstrap interface, instead of the hackish half-hand-rolled solutions currently in place</li>
<li>Better abstraction of the RPC interface, allowing other systems beside Socket.IO</li>
<li>Research into whether the http server interface (currently using Express) is worth abstracting</li>
<li><p>There is a rudimentary working form API, but research should be done as to how to DRY it up and make sure it's secure and resistant to attack
"""</p>

<pre><code>    $scope.$emit 'shrubFinishedRendering'
</code></pre>

<p>]</p>

<p>template: """</p></li>
</ul>

<p><span
    class="about"
    data-ng-bind-html="about | uiMarkdown:false"</p>

<blockquote>
  <p></span></p>
</blockquote>

<p>"""</p></div></div></div></div></body></html>