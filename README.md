Shrub
=====

Shrub is a JavaScript (or CoffeeScript if you prefer) application
framework. [AngularJS](http://angularjs.org/) is used on the client-side, as
well as [Socket.IO](http://socket.io/), enabling real-time communication right
out of the box. The server is an [Express](http://expressjs.com)
[Node.js](http://nodejs.org/) server using
[JugglingDB](https://github.com/1602/jugglingdb) for storage.

Shrub handles generation (using [Grunt](http://gruntjs.com/)) of all Angular
boilerplate, to allow you to structure your application in a very clean and
consistent way.

Shrub is organized into packages which implement hooks. Angular services,
directives, filters, etc. are specified through package hooks, allowing you to
achieve the ultimate in clean, elegant structure. No more
(controllers|directives|filters|services).js blobs.

### Awesome example of a package

JS applications catch flak because they are not impliticly SEO-friendly,
as well as requiring JS execution, which [some people prefer not to
allow for untrusted websites](http://www.wired.com/threatlevel/2013/09/freedom-hosting-fbi/).

Shrub implements the `angular` server package, which implements 
hook `httpMiddleware`. Since both sides of the stack have fully featured JS
([well, except for certain older browsers...](http://www.youtube.com/watch?v=lD9FAOPBiDk))
, when a client requests a page from Shrub, it spins up a
[sandbox](http://cha0s.github.io/shrub/server/sandboxes.html) for the request,
and renders the entire page -- JS and all. It then serves the fully-built page
to the client.

If the client has JS enabled, the client-side Angular application takes over
from here, loading new pages instantly and generally benefitting from all the
lovely things that client-side applications offer. The package also implements
hook `endpoint`, which allows a JSful client to let the server know it can
release the sandbox.

However, if the client does not have JS enabled, a new page will hit the server
again, and the package, crafty as it is, will reuse the sandbox created for
that session, navigate the sandboxed Angular to the new page, render it, and
serve it to the client again. Amazing! 

### Get rolling

* Get yourself a clone: `$ git clone git://github.com/cha0s/shrub.git`

* Get in the new directory and then the usual `npm install`

* If you'd like to run the tests, first spin up the server using
`$ E2E=true npm start`, to start the server in end-to-end testing mode. Then
run `$ ./scripts/good-to-go`. This script will return 0 if the project builds,
and the tests run successfully. In other words, you could theoretically wire
it up in a pre-commit hook.

* Spin up the server in debug mode: `$ npm start` and navigate to
http://localhost:4201 (if you didn't run the tests above, you must first run
`$ grunt` before navigating to the site in your browser.

* Enjoy!

### TODO

There is always more to do! 

* The main concern at the moment is
**documentation**. You may view the continuously evolving autogenerated
documentation at [http://cha0s.github.io/shrub](http://cha0s.github.io/shrub)

* Better abstraction of assets, in other words, a theme/skin system
* The form API is vulnerable to CSRF at the moment, and maybe other attacks.
