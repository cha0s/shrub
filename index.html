<!DOCTYPE html><html lang="en"><head><title>index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="index"><meta name="groc-project-path" content="README.md"><meta name="groc-github-url" content="https://github.com/cha0s/shrub"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/cha0s/shrub/blob/master/README.md">README.md</a></div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="shrub">Shrub</h1>

<p>Shrub is a JavaScript (or CoffeeScript if you prefer) application
framework. <a href="http://angularjs.org/">AngularJS</a> is used on the client-side, as
well as <a href="http://socket.io/">Socket.IO</a>, enabling real-time communication right
out of the box. The server is a <a href="http://nodejs.org/">Node.js</a> server using
<a href="http://redis.io/">Redis</a> for persistence and scalability.</p>

<p>Shrub handles generation (using <a href="http://gruntjs.com/">Grunt</a>) of the vast
majority of Angular boilerplate, to allow you to structure your application in
a very clean and consistent way.</p>

<p>Also provided is an Angular service providing a NodeJS-style module framework
to allow your application to bridge the gap between Angular and the vast
ecosystem of publically available NodeJS-style modules.</p>

<h3 id="the-twist">The Twist</h3>

<p>JS applications catch flak because they are not impliticly SEO-friendly,
as well as requiring JS execution, which <a href="http://www.wired.com/threatlevel/2013/09/freedom-hosting-fbi/">some people prefer not to
allow for untrusted websites</a>.</p>

<p>Shrub does an interesting thing which is possible because both sides of the
stack have fully featured JS (<a href="http://www.youtube.com/watch?v=lD9FAOPBiDk">well, except for certain older browsers...</a>).
When a client requests a page from Shrub, it spins up a DOM for the request,
and renders the entire page, JS and all. Shrub then serves the fully-built page
to the client.</p>

<p>If the client has JS enabled, the client-side Angular application takes over
from here, loading new pages (nearly) instantly and generally benefitting from
all the lovely things that client-side applications offer.</p>

<p>However, if the client does not have JS enabled, a new page will hit the server
again, and Shrub, crafty as it is, will reuse the DOM created for that session,
navigate Angular to the new page, render it, and serve it to the client. Nice! </p>

<h3 id="get-rolling">Get rolling</h3>

<ul>
<li><p>Get yourself a clone: <code>$ git clone git://github.com/cha0s/shrub.git</code></p></li>
<li><p>Get in the new directory and then the usual <code>npm install</code>, followed by
<code>$ scripts/good-to-go</code>. This script will return 0 if the project builds, and
the tests run successfully. In other words, you can easily wire it up in a
pre-commit hook.</p></li>
<li><p>Spin up the server: <code>$ npm start</code> and navigate to http://localhost:4201 (make
sure you've run grunt at least once!)</p></li>
<li><p>Check out how Shrub has generated a lot of Angular boilerplate for
you. Particularly app/js/{controllers,directives,filters,services}.js will
be of interest.</p></li>
</ul>

<h3 id="todo">TODO</h3>

<p>There is much to do, and this project is currently essentially a
proof-of-concept of some of the ideas outlined here. My plans for this
framework include:</p>

<ul>
<li>Integration of a database abstraction layer</li>
<li>A resource layer (using the aforementioned db layer) for serving Angular $resource requests</li>
<li>Socket/Session stores based on aforementioned db layer</li>
<li>Better handling of server-side DOM in the absence of a session/cookie</li>
<li>Research into whether server-side rendering can be synchronized in a DRY fashion (currently the rendering is given 50 ms to complete, not ideal)</li>
<li>Better abstraction of assets, instead of (for instance) hardcoding bootstrap/LESS</li>
<li>Using standardized solutions to UI and Bootstrap interface, instead of the hackish half-hand-rolled solutions currently in place</li>
<li>Better abstraction of the RPC interface, allowing other systems beside Socket.IO</li>
<li>Research into whether the http server interface (currently using Express) is worth abstracting</li>
<li>There is a rudimentary working form API, but research should be done as to how to DRY it up and make sure it's secure and resistant to attack</li>
</ul></div></div></div></div></body></html>